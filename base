do local base64={};base64.chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";local b64chars={};for i=1,65 do b64chars[string.sub(base64.chars,i,i)]=i-1 ;end base64.decode=function(data) data=string.gsub(data,"[^"   .. base64.chars   .. "=]" ,"");local bytes={};local j=1;for i=1, #data,4 do local c1=b64chars[string.sub(data,i,i)] or 0 ;local c2=b64chars[string.sub(data,i + 1 ,i + 1 )] or 0 ;local c3=b64chars[string.sub(data,i + 2 ,i + 2 )];local c4=b64chars[string.sub(data,i + 3 ,i + 3 )];bytes[j]=bit32.lshift(c1,2) + bit32.rshift(c2,4) ;j=j + 1 ;if c3 then bytes[j]=bit32.lshift(bit32.band(c2,15),4) + bit32.rshift(c3,2) ;j=j + 1 ;if c4 then bytes[j]=bit32.lshift(bit32.band(c3,3),6) + c4 ;j=j + 1 ;end end end local result="";for i=1, #bytes do result=result   .. string.char(bytes[i]) ;end return result;end;local scriptParts={"bG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIFVzZXJJbnB1dFNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKQpsb2NhbCBSZXBsaWNhdGVkU3RvcmFnZSA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKQpsb2NhbCBHdWlTZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJHdWlTZXJ2aWNlIikKbG9jYWwgUnVuU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpCmxvY2FsIGNhbWVyYSA9IGdhbWUuV29ya3NwYWNlLkN1cnJlbnRDYW1lcmEKbG9jYWwgcGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllcgpsb2NhbCBiYWNrcGFjayA9IHBsYXllcjpXYWl0Rm9yQ2hpbGQoIkJhY2twYWNrIikKbG9jYWwgbXVzY2xlRXZlbnQgPSBwbGF5ZXI6RmluZEZpcnN0Q2hpbGQoIm11c2NsZUV2ZW50IikKbG9jYWwgY2hhcmFjdGVyID0gcGxheWVyLkNoYXJhY3RlciBvciBwbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpCmxvY2FsIENoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIgb3IgcGxheWVyLkNoYXJhY3RlckFkZGVkOldhaXQoKQpsb2NhbCBodW1hbm9pZFJvb3RQYXJ0ID0gQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCmxvY2FsIEh1bWFub2lkID0gQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKQoKLS0gVmFyaWFibGVzIHBvdXIgQXV0byBQdW5jaApsb2NhbCBDaGFyYWN0ZXIKbG9jYWwgSHVtYW5vaWQKbG9jYWwgTXVzY2xlRXZlbnQKbG9jYWwgSWRsZUFuaW1hdGlvbgpsb2NhbCBMZWZ0QXR0YWNrQW5pbQpsb2NhbCBSaWdodEF0dGFja0FuaW0KbG9jYWwgTGFzdEFuaW1hdGlvbgpsb2NhbCBMYXN0QXR0YWNrVGltZSA9IDAKbG9jYWwgQXV0b1B1bmNoRW5hYmxlZCA9IGZhbHNlCmxvY2FsIEF1dG9QdW5jaENvbm5lY3Rpb24KbG9jYWwgSXNDaGFyYWN0ZXJJbml0aWFsaXplZCA9IGZhbHNlCgpsb2NhbCBub0NsaXBFbmFibGVkID0gZmFsc2UKbG9jYWwgbm9DbGlwQ29ubmVjdGlvbiA9IG5pbApsb2NhbCBvcmlnaW5hbENvbGxpc2lvblZhbHVlcyA9IHt9Cgpsb2NhbCBkcmFnZ2luZyA9IGZhbHNlCmxvY2FsIGRyYWdJbnB1dApsb2NhbCBkcmFnU3RhcnQKbG9jYWwgc3RhcnRQb3MKbG9jYWwgbWVudUNvbGxhcHNlZCA9IGZhbHNlCgpsb2NhbCBnaG9zdFdhbGxFbmFibGVkID0gZmFsc2UKCmxvY2FsIGN1cnJlbnRPYnNlcnZlZFBsYXllciA9IG5pbApsb2NhbCBsYXN0T2JzZXJ2ZWRDaGFyYWN0ZXIgPSBuaWwKbG9jYWwgc3BlY3RhdGVFbmFibGVkID0gZmFsc2UKbG9jYWwgbGlzdFZpc2libGUgPSBmYWxzZQpsb2NhbCBjb25uZWN0aW9ucyA9IHt9Cgpsb2NhbCBzYXZlZFBvc2l0aW9uID0gbmlsCmxvY2FsIGlzUmVzcGF3bmluZyA9IGZhbHNlCmxvY2FsIHRlbGVwb3J0Q29ubmVjdGlvbiA9IG5pbAoKbG9jYWwgYXV0b1JlYmlydGhFbmFibGVkID0gZmFsc2UKbG9jYWwgYXV0b1JlYmlydGhUaHJlYWQgPSBuaWwKCmxvY2FsIEF1dG9UcmFpbiA9IGZhbHNlCmxvY2FsIGF1dG9UcmFpbkVuYWJsZWQgPSBmYWxzZSAtLW1vZGUgIQoKbG9jYWwgYWN0aXZlVGVsZXBvcnRQbGF5ZXIgPSBuaWwKbG9jYWwgdGVsZXBvcnRMb29wQWN0aXZlID0gZmFsc2UKbG9jYWwgcGxheWVyU3RhdHVzID0ge30KCmxvY2FsIHRvb2xMYWJlbHMgPSB7fQpsb2NhbCBkaXNwbGF5RnJhbWUgPSBuaWwKbG9jYWwgaXNEaXNwbGF5RW5hYmxlZCA9IHRydWUKCmlmIE1MX0F1dG9QdW5jaEVuYWJsZWQgPT0gbmlsIHRoZW4KICAgIE1MX0F1dG9QdW5jaEVuYWJsZWQgPSBmYWxzZQplbmQKCmlmIElzQ2hhcmFjdGVySW5pdGlhbGl6ZWQgPT0gbmlsIHRoZW4KICAgIElzQ2hhcmFjdGVySW5pdGlhbGl6ZWQgPSBmYWxzZQplbmQKCmxvY2FsIEFjdGl2YXRlZCA9IGZhbHNlCmxvY2FsIFRhcmdldFBsYXllciA9IG5pbApsb2NhbCBQb3dlciA9IDUwMApsb2NhbCBPbGRWZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsIDAsIDApCmxvY2FsIENvbGxpc2lvblN0YXRlcyA9IHt9CgotLSBDcsOpYXRpb24gZHUgbWVudSBHVUkgcHJpbmNpcGFsCmxvY2FsIHNjcmVlbkd1aSA9IEluc3RhbmNlLm5ldygiU2NyZWVuR3VpIikKc2NyZWVuR3VpLk5hbWUgPSAiVW5pdmVyc2FsTWVudSIKc2NyZWVuR3VpLlBhcmVudCA9IHBsYXllcjpXYWl0Rm9yQ2hpbGQoIlBsYXllckd1aSIpCnNjcmVlbkd1aS5SZXNldE9uU3Bhd24gPSBmYWxzZQoKbG9jYWwgbWFpbkZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCm1haW5GcmFtZS5TaXplID0gVURpbTIubmV3KDAsIDU1MCwgMCwgNjIwKQptYWluRnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAtMjc1LCAwLjUsIC0zMzApCm1haW5GcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNTAsIDUwLCA1MCkKbWFpbkZyYW1lLlZpc2libGUgPSBmYWxzZQptYWluRnJhbWUuQWN0aXZlID0gdHJ1ZSAtLSBQZXJtZXQgZGUgZMOpcGxhY2VyCm1haW5GcmFtZS5EcmFnZ2FibGUgPSB0cnVlCm1haW5GcmFtZS5QYXJlbnQgPSBzY3JlZW5HdWkKCmxvY2FsIGNvbnRlbnRDb250YWluZXIgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKY29udGVudENvbnRhaW5lci5OYW1lID0gIkNvbnRlbnRDb250YWluZXIiCmNvbnRlbnRDb250YWluZXIuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAtMzApCmNvbnRlbnRDb250YWluZXIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMzApCmNvbnRlbnRDb250YWluZXIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKY29udGVudENvbnRhaW5lci5QYXJlbnQgPSBtYWluRnJhbWUKCmxvY2FsIHRpdGxlTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCnRpdGxlTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCA0MCkKdGl0bGVMYWJlbC5UZXh0ID0gIlN3YXV4IFVuaXZlcnNhbCBNZW51Igp0aXRsZUxhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCnRpdGxlTGFiZWwuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQwLCA0MCwgNDApCnRpdGxlTGFiZWwuVGV4dFNjYWxlZCA9IHRydWUKdGl0bGVMYWJlbC5QYXJlbnQgPSBtYWluRnJhbWUKCi0tIENyw6lhdGlvbiBkZXMgb25nbGV0cyBwb3VyIGxlcyBjYXTDqWdvcmllcyAoNSBvbmdsZXRzKQpsb2NhbCB0YWJzRnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKdGFic0ZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgNDApCnRhYnNGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCA0MCkKdGFic0ZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig2MCwgNjAsIDYwKQp0YWJzRnJhbWUuUGFyZW50ID0gbWFpbkZyYW1lCgotLSBDcsOpYXRpb24gZHUgYm91dG9uIGRlIGNvbGxhcHNlIHVuaXF1ZSBkYW5zIG1haW5GcmFtZQpsb2NhbCBjb2xsYXBzZUJ1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCmNvbGxhcHNlQnV0dG9uLk5hbWUgPSAiQ29sbGFwc2VCdXR0b24iCmNvbGxhcHNlQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMCwgMzAsIDAsIDMwKQpjb2xsYXBzZUJ1dHRvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtNjAsIDAsIDApCmNvbGxhcHNlQnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAxMjAsIDIxNSkKY29sbGFwc2VCdXR0b24uQm9yZGVyU2l6ZVBpeGVsID0gMApjb2xsYXBzZUJ1dHRvbi5UZXh0ID0gIi0iCmNvbGxhcHNlQnV0dG9uLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQpjb2xsYXBzZUJ1dHRvbi5UZXh0U2l6ZSA9IDIwCmNvbGxhcHNlQnV0dG9uLlpJbmRleCA9IDEwIApjb2xsYXBzZUJ1dHRvbi5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnNCb2xkCmNvbGxhcHNlQnV0dG9uLlBhcmVudCA9IG1haW5GcmFtZQoKbG9jYWwgY2xvc2VCdXR0b24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQpjbG9zZUJ1dHRvbi5TaXplID0gVURpbTIubmV3KDAsIDMwLCAwLCAzMCkKY2xvc2VCdXR0b24uUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTMwLCAwLCAwKQpjbG9zZUJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKQpjbG9zZUJ1dHRvbi5UZXh0ID0gIlgiCmNsb3NlQnV0dG9uLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQpjbG9zZUJ1dHRvbi5QYXJlbnQgPSBtYWluRnJhbWUKY2xvc2VCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBtYWluRnJhbWUuVmlzaWJsZSA9IGZhbHNlCmVuZCkKCi0tIE9uZ2xldCBUZWxlcG9ydGF0aW9uCmxvY2FsIHRlbGVwb3J0VGFiID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKdGVsZXBvcnRUYWIuU2l6ZSA9IFVEaW0yLm5ldygxLzUsIDAsIDEsIDApCnRlbGVwb3J0VGFiLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDApCnRlbGVwb3J0VGFiLlRleHQgPSAiVGVsZXBvcnRhdGlvbiIKdGVsZXBvcnRUYWIuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKdGVsZXBvcnRUYWIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcwLCA3MCwgNzApCnRlbGVwb3J0VGFiLlRleHRTY2FsZWQgPSB0cnVlCnRlbGVwb3J0VGFiLlBhcmVudCA9IHRhYnNGcmFtZQoKLS0gT25nbGV0IEJhc2ljIFN0YXRzCmxvY2FsIHN0YXRzVGFiID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKc3RhdHNUYWIuU2l6ZSA9IFVEaW0yLm5ldygxLzUsIDAsIDEsIDApCnN0YXRzVGFiLlBvc2l0aW9uID0gVURpbTIubmV3KDEvNSwgMCwgMCwgMCkKc3RhdHNUYWIuVGV4dCA9ICJNaXNjZWxsYW5pb3VzIgpzdGF0c1RhYi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQpzdGF0c1RhYi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNjAsIDYwLCA2MCkKc3RhdHNUYWIuVGV4dFNjYWxlZCA9IHRydWUKc3RhdHNUYWIuUGFyZW50ID0gdGFic0ZyYW1lCgotLSBPbmdsZXQgRmx5CmxvY2FsIGZseVRhYiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCmZseVRhYi5TaXplID0gVURpbTIubmV3KDEvNSwgMCwgMSwgMCkKZmx5VGFiLlBvc2l0aW9uID0gVURpbTIubmV3KDIvNSwgMCwgMCwgMCkKZmx5VGFiLlRleHQgPSAiRmx5IgpmbHlUYWIuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKZmx5VGFiLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig2MCwgNjAsIDYwKQpmbHlUYWIuVGV4dFNjYWxlZCA9IHRydWUKZmx5VGFiLlBhcmVudCA9IHRhYnNGcmFtZQoKbG9jYWwgYWltYm90VGFiID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKYWltYm90VGFiLlNpemUgPSBVRGltMi5uZXcoMS81LCAwLCAxLCAwKQphaW1ib3RUYWIuUG9zaXRpb24gPSBVRGltMi5uZXcoMy81LCAwLCAwLCAwKQphaW1ib3RUYWIuVGV4dCA9ICJBaW1ib3QiCmFpbWJvdFRhYi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQphaW1ib3RUYWIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDYwLCA2MCwgNjApCmFpbWJvdFRhYi5UZXh0U2NhbGVkID0gdHJ1ZQphaW1ib3RUYWIuUGFyZW50ID0gdGFic0ZyYW1lCgpsb2NhbCBtbFRhYiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCm1sVGFiLlNpemUgPSBVRGltMi5uZXcoMS81LCAwLCAxLCAwKQptbFRhYi5Qb3NpdGlvbiA9IFVEaW0yLm5ldyg0LzUsIDAsIDAsIDApCm1sVGFiLlRleHQgPSAiTUwiCm1sVGFiLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCm1sVGFiLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig2MCwgNjAsIDYwKQptbFRhYi5UZXh0U2NhbGVkID0gdHJ1ZQptbFRhYi5QYXJlbnQgPSB0YWJzRnJhbWUKCi0tIENyw6lhdGlvbiBkZXMgY29udGVuZXVycyBwb3VyIGNoYXF1ZSBjYXTDqWdvcmllCmxvY2FsIHRlbGVwb3J0RnJhbWUgPSBJbnN0YW5jZS5uZXcoIlNjcm9sbGluZ0ZyYW1lIikKdGVsZXBvcnRGcmFtZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIC04MCkKdGVsZXBvcnRGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCA4MCkKdGVsZXBvcnRGcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNTAsIDUwLCA1MCkKdGVsZXBvcnRGcmFtZS5WaXNpYmxlID0gdHJ1ZQp0ZWxlcG9ydEZyYW1lLlBhcmVudCA9IG1haW5GcmFtZQoKbG9jYWwgc3RhdHNGcmFtZSA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQpzdGF0c0ZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgLTgwKQpzdGF0c0ZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDgwKQpzdGF0c0ZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig1MCwgNTAsIDUwKQpzdGF0c0ZyYW1lLlZpc2libGUgPSBmYWxzZQpzdGF0c0ZyYW1lLlBhcmVudCA9IG1haW5GcmFtZQoKbG9jYWwgZmx5RnJhbWUgPSBJbnN0YW5jZS5uZXcoIlNjcm9sbGluZ0ZyYW1lIikKZmx5RnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAtODApCmZseUZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDgwKQpmbHlGcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNTAsIDUwLCA1MCkKZmx5RnJhbWUuVmlzaWJsZSA9IGZhbHNlCmZseUZyYW1lLlBhcmVudCA9IG1haW5GcmFtZQoKbG9jYWwgYWltYm90RnJhbWUgPSBJbnN0YW5jZS5uZXcoIlNjcm9sbGluZ0ZyYW1lIikKYWltYm90RnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAtODApCmFpbWJvdEZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDgwKQphaW1ib3RGcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNTAsIDUwLCA1MCkKYWltYm90RnJhbWUuVmlzaWJsZSA9IGZhbHNlCmFpbWJvdEZyYW1lLlBhcmVudCA9IG1haW5GcmFtZQoKbG9jYWwgbWxGcmFtZSA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQptbEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgLTgwKQptbEZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDgwKQptbEZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig1MCwgNTAsIDUwKQptbEZyYW1lLlZpc2libGUgPSBmYWxzZQptbEZyYW1lLlBhcmVudCA9IG1haW5GcmFtZQoKLS0gRm9uY3Rpb24gcG91ciBjaGFuZ2VyIGQnb25nbGV0CmxvY2FsIGZ1bmN0aW9uIHN3aXRjaFRhYih0YWJOYW1lKQogICAgdGVsZXBvcnRGcmFtZS5WaXNpYmxlID0gKHRhYk5hbWUgPT0gIlRlbGVwb3J0YXRpb24iKQogICAgc3RhdHNGcmFtZS5WaXNpYmxlID0gKHRhYk5hbWUgPT0gIlN0YXRzIikKICAgIGZseUZyYW1lLlZpc2libGUgPSAodGFiTmFtZSA9PSAiRmx5IikKCWFpbWJvdEZyYW1lLlZpc2libGUgPSAodGFiTmFtZSA9PSAiQWltYm90IikKCW1sRnJhbWUuVmlzaWJsZSA9ICh0YWJOYW1lID09ICJNTCIpCiAgICAKICAgIHRlbGVwb3J0VGFiLkJhY2tncm91bmRDb2xvcjMgPSB0YWJOYW1lID09ICJUZWxlcG9ydGF0aW9uIiBhbmQgQ29sb3IzLmZyb21SR0IoNzAsIDcwLCA3MCkgb3IgQ29sb3IzLmZyb21SR0IoNjAsIDYwLCA2MCkKICAgIHN0YXRzVGFiLkJhY2tncm91bmRDb2xvcjMgPSB0YWJOYW1lID09ICJTdGF0cyIgYW5kIENvbG9yMy5mcm9tUkdCKDcwLCA3MCwgNzApIG9yIENvbG9yMy5mcm9tUkdCKDYwLCA2MCwgNjApCiAgICBmbHlUYWIuQmFja2dyb3VuZENvbG9yMyA9IHRhYk5hbWUgPT0gIkZseSIgYW5kIENvbG9yMy5mcm9tUkdCKDcwLCA3MCwgNzApIG9yIENvbG9yMy5mcm9tUkdCKDYwLCA2MCwgNjApCglhaW1ib3RUYWIuQmFja2dyb3VuZENvbG9yMyA9IHRhYk5hbWUgPT0gIkFpbWJvdCIgYW5kIENvbG9yMy5mcm9tUkdCKDcwLCA3MCwgNzApIG9yIENvbG9yMy5mcm9tUkdCKDYwLCA2MCwgNjApCiAgICBtbFRhYi5CYWNrZ3JvdW5kQ29sb3IzID0gdGFiTmFtZSA9PSAiTUwiIGFuZCBDb2xvcjMuZnJvbVJHQig3MCwgNzAsIDcwKSBvciBDb2xvcjMuZnJvbVJHQig2MCwgNjAsIDYwKQplbmQKCnRlbGVwb3J0VGFiLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgc3dpdGNoVGFiKCJUZWxlcG9ydGF0aW9uIikKZW5kKQoKc3RhdHNUYWIuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBzd2l0Y2hUYWIoIlN0YXRzIikKZW5kKQoKZmx5VGFiLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgc3dpdGNoVGFiKCJGbHkiKQplbmQpCgphaW1ib3RUYWIuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBzd2l0Y2hUYWIoIkFpbWJvdCIpCmVuZCkKCm1sVGFiLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgc3dpdGNoVGFiKCJNTCIpCmVuZCkKCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi0tIFNFQ1RJT04gVEVMRVBPUlRBVElPTgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpsb2NhbCByYW5kb21UcEJ1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCnJhbmRvbVRwQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMC45LCAwLCAwLCA0MCkKcmFuZG9tVHBCdXR0b24uUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wNSwgMCwgMCwgMjApCnJhbmRvbVRwQnV0dG9uLlRleHQgPSAiUmFuZG9tIFRQIgpyYW5kb21UcEJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQpyYW5kb21UcEJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNzAsIDcwLCA3MCkKcmFuZG9tVHBCdXR0b24uVGV4dFNjYWxlZCA9IHRydWUKcmFuZG9tVHBCdXR0b24uUGFyZW50ID0gdGVsZXBvcnRGcmFtZQoKbG9jYWwgY2hlY2tCb3hGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQpjaGVja0JveEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMC45LCAwLCAwLCA0MCkKY2hlY2tCb3hGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjA1LCAwLCAwLCA4MCkKY2hlY2tCb3hGcmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQpjaGVja0JveEZyYW1lLlBhcmVudCA9IHRlbGVwb3J0RnJhbWUKCmxvY2FsIGZyYW1lc1RvVG9nZ2xlID0ge30KaWYgdGVsZXBvcnRGcmFtZSB0aGVuIHRhYmxlLmluc2VydChmcmFtZXNUb1RvZ2dsZSwgdGVsZXBvcnRGcmFtZSkgZW5kCmlmIHN0YXRzRnJhbWUgdGhlbiB0YWJsZS5pbnNlcnQoZnJhbWVzVG9Ub2dnbGUsIHN0YXRzRnJhbWUpIGVuZAppZiBmbHlGcmFtZSB0aGVuIHRhYmxlLmluc2VydChmcmFtZXNUb1RvZ2dsZSwgZmx5RnJhbWUpIGVuZAppZiBhaW1ib3RGcmFtZSB0aGVuIHRhYmxlLmluc2VydChmcmFtZXNUb1RvZ2dsZSwgYWltYm90RnJhbWUpIGVuZAppZiBtbEZyYW1lIHRoZW4gdGFibGUuaW5zZXJ0KGZyYW1lc1RvVG9nZ2xlLCBtbEZyYW1lKSBlbmQKaWYgdGFic0ZyYW1lIHRoZW4gdGFibGUuaW5zZXJ0KGZyYW1lc1RvVG9nZ2xlLCB0YWJzRnJhbWUpIGVuZAoKbG9jYWwgY2hlY2tCb3ggPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQpjaGVja0JveC5TaXplID0gVURpbTIubmV3KDAsIDI1LCAwLCAyNSkKY2hlY2tCb3guUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTAsIDAsIDcpCmNoZWNrQm94LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQpjaGVja0JveC5UZXh0ID0gIiIKY2hlY2tCb3guUGFyZW50ID0gY2hlY2tCb3hGcmFtZQoKbG9jYWwgY2hlY2tMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKY2hlY2tMYWJlbC5TaXplID0gVURpbTIubmV3KDEsIC00MCwgMSwgMCkKY2hlY2tMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA0MCwgMCwgMCkKY2hlY2tMYWJlbC5UZXh0ID0gIkxvY2FsIFRQIEFsbCBQbGF5ZXJzIgpjaGVja0xhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCmNoZWNrTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKY2hlY2tMYWJlbC5UZXh0U2NhbGVkID0gdHJ1ZQpjaGVja0xhYmVsLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CmNoZWNrTGFiZWwuUGFyZW50ID0gY2hlY2tCb3hGcmFtZQoKbG9jYWwgY2hhcm1zTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCmNoYXJtc0xhYmVsLlNpemUgPSBVRGltMi5uZXcoMC45LCAwLCAwLCAzMCkKY2hhcm1zTGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wNSwgMCwgMCwgMjkwKQpjaGFybXNMYWJlbC5UZXh0ID0gIlBsYXllciBDaGFybXMgKE91dGxpbmVzKToiCmNoYXJtc0xhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCmNoYXJtc0xhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCmNoYXJtc0xhYmVsLlRleHRTY2FsZWQgPSB0cnVlCmNoYXJtc0xhYmVsLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CmNoYXJtc0xhYmVsLlBhcmVudCA9IHN0YXRzRnJhbWUKCmxvY2FsIGRyb3Bkb3duID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKZHJvcGRvd24uU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDQwKQpkcm9wZG93bi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjA1LCAwLCAwLCAxNDApCmRyb3Bkb3duLlRleHQgPSAiU2VsZWN0IFBsYXllciIKZHJvcGRvd24uVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKZHJvcGRvd24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcwLCA3MCwgNzApCmRyb3Bkb3duLlRleHRTY2FsZWQgPSB0cnVlCmRyb3Bkb3duLlBhcmVudCA9IHRlbGVwb3J0RnJhbWUKCmxvY2FsIGNoYXJtc0J1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCmNoYXJtc0J1dHRvbi5TaXplID0gVURpbTIubmV3KDAuOSwgMCwgMCwgMzApCmNoYXJtc0J1dHRvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjA1LCAwLCAwLCAzMzApCmNoYXJtc0J1dHRvbi5UZXh0ID0gIkNoYXJtczogT0ZGIgpjaGFybXNCdXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKY2hhcm1zQnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3MCwgNzAsIDcwKQpjaGFybXNCdXR0b24uVGV4dFNjYWxlZCA9IHRydWUKY2hhcm1zQnV0dG9uLlBhcmVudCA9IHN0YXRzRnJhbWUKCmxvY2FsIGRpc3RhbmNlTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCmRpc3RhbmNlTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDMwKQpkaXN0YW5jZUxhYmVsLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAsIDgwKQpkaXN0YW5jZUxhYmVsLlRleHQgPSAiRGV0ZWN0aW9uIFJhbmdlOiA1MCIKZGlzdGFuY2VMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQpkaXN0YW5jZUxhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCmRpc3RhbmNlTGFiZWwuVGV4dFNjYWxlZCA9IHRydWUKZGlzdGFuY2VMYWJlbC5QYXJlbnQgPSBhaW1ib3RGcmFtZQoKbG9jYWwgZGlzdGFuY2VTbGlkZXIgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKZGlzdGFuY2VTbGlkZXIuU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDIwKQpkaXN0YW5jZVNsaWRlci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjA1LCAwLCAwLCAxMjApCmRpc3RhbmNlU2xpZGVyLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0MCwgNDAsIDQwKQpkaXN0YW5jZVNsaWRlci5QYXJlbnQgPSBhaW1ib3RGcmFtZQoKbG9jYWwgc2xpZGVyQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKc2xpZGVyQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMC4xLCAwLCAxLCAwKQpzbGlkZXJCdXR0b24uUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLCAwKQpzbGlkZXJCdXR0b24uVGV4dCA9ICIiCnNsaWRlckJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKc2xpZGVyQnV0dG9uLlBhcmVudCA9IGRpc3RhbmNlU2xpZGVyCgpsb2NhbCBhaW1ib3RCdXR0b24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQphaW1ib3RCdXR0b24uU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDQwKQphaW1ib3RCdXR0b24uUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wNSwgMCwgMCwgMjApCmFpbWJvdEJ1dHRvbi5UZXh0ID0gIkFpbWJvdDogT0ZGIgphaW1ib3RCdXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKYWltYm90QnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3MCwgNzAsIDcwKQphaW1ib3RCdXR0b24uVGV4dFNjYWxlZCA9IHRydWUKYWltYm90QnV0dG9uLlBhcmVudCA9IGFpbWJvdEZyYW1lCgotLSBBam91dCBkZSBsJ2ludGVyZmFjZSBBdXRvIFB1bmNoIGRhbnMgbCdvbmdsZXQgTUwKbG9jYWwgYXV0b1B1bmNoQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKYXV0b1B1bmNoQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMC45LCAwLCAwLCA0MCkKYXV0b1B1bmNoQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAsIDIwKQphdXRvUHVuY2hCdXR0b24uVGV4dCA9ICJBdXRvIFB1bmNoOiBPRkYiCmF1dG9QdW5jaEJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQphdXRvUHVuY2hCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcwLCA3MCwgNzApCmF1dG9QdW5jaEJ1dHRvbi5UZXh0U2NhbGVkID0gdHJ1ZQphdXRvUHVuY2hCdXR0b24uUGFyZW50ID0gbWxGcmFtZQoKbG9jYWwgd2FsbGhhY2tCdXR0b24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQp3YWxsaGFja0J1dHRvbi5OYW1lID0gIldhbGxoYWNrQnV0dG9uIgp3YWxsaGFja0J1dHRvbi5TaXplID0gVURpbTIubmV3KDAuOSwgMCwgMCwgMzApCndhbGxoYWNrQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAsIDUxMCkKd2FsbGhhY2tCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDYwLCA2MCwgNjApCndhbGxoYWNrQnV0dG9uLlRleHQgPSAiT0ZGIgp3YWxsaGFja0J1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQp3YWxsaGFja0J1dHRvbi5UZXh0U2NhbGVkID0gdHJ1ZQp3YWxsaGFja0J1dHRvbi5QYXJlbnQgPSBzdGF0c0ZyYW1lCgpsb2NhbCB3YWxsaGFja0xhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQp3YWxsaGFja0xhYmVsLlNpemUgPSBVRGltMi5uZXcoMC45LCAwLCAwLCAzMCkKd2FsbGhhY2tMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjA1LCAwLCAwLCA0NzApCndhbGxoYWNrTGFiZWwuVGV4dCA9ICJXYWxsaGFjayhDYW4gVGhyb3VnaCBUaGUgV2FsbCk6Igp3YWxsaGFja0xhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCndhbGxoYWNrTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKd2FsbGhhY2tMYWJlbC5UZXh0U2NhbGVkID0gdHJ1ZQp3YWxsaGFja0xhYmVsLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CndhbGxoYWNrTGFiZWwuUGFyZW50ID0gc3RhdHNGcmFtZQoKLS0gw4l0YXQgZHUgTm8tQ2xpcApsb2NhbCBub0NsaXBFbmFibGVkID0gZmFsc2UKbG9jYWwgbm9DbGlwQ29ubmVjdGlvbiA9IG5pbAoKCmxvY2FsIHB1bmNoU3RhdHVzTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCnB1bmNoU3RhdHVzTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDMwKQpwdW5jaFN0YXR1c0xhYmVsLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAsIDgwKQpwdW5jaFN0YXR1c0xhYmVsLlRleHQgPSAiU3RhdHVzOiBXYWl0aW5nIGZvciBpbml0aWFsaXphdGlvbi4uLiIKcHVuY2hTdGF0dXNMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQpwdW5jaFN0YXR1c0xhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCnB1bmNoU3RhdHVzTGFiZWwuVGV4dFNjYWxlZCA9IHRydWUKcHVuY2hTdGF0dXNMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdApwdW5jaFN0YXR1c0xhYmVsLlBhcmVudCA9IG1sRnJhbWUKCmxvY2FsIHBsYXllckxpc3QgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKcGxheWVyTGlzdC5TaXplID0gVURpbTIubmV3KDAuOSwgMCwgMCwgMTAwKQpwbGF5ZXJMaXN0LlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAsIDE4MCkKcGxheWVyTGlzdC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA0MCkKcGxheWVyTGlzdC5WaXNpYmxlID0gZmFsc2UKcGxheWVyTGlzdC5QYXJlbnQgPSB0ZWxlcG9ydEZyYW1lCgpsb2NhbCBzY3JvbGxpbmdGcmFtZSA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQpzY3JvbGxpbmdGcmFtZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApCnNjcm9sbGluZ0ZyYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCnNjcm9sbGluZ0ZyYW1lLlNjcm9sbEJhclRoaWNrbmVzcyA9IDYKc2Nyb2xsaW5nRnJhbWUuUGFyZW50ID0gcGxheWVyTGlzdAoKbG9jYWwgdWlMaXN0TGF5b3V0ID0gSW5zdGFuY2UubmV3KCJVSUxpc3RMYXlvdXQiKQp1aUxpc3RMYXlvdXQuUGFyZW50ID0gc2Nyb2xsaW5nRnJhbWUKCmxvY2FsIHNlbGVjdGVkUGxheWVyID0gbmlsCgpsb2NhbCBmdW5jdGlvbiB1cGRhdGVQbGF5ZXJMaXN0KCkKICAgIGZvciBfLCBjaGlsZCBpbiBpcGFpcnMoc2Nyb2xsaW5nRnJhbWU6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiBjaGlsZDpJc0EoIlRleHRCdXR0b24iKSB0aGVuCiAgICAgICAgICAgIGNoaWxkOkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgZW5kCgogICAgbG9jYWwgdG90YWxIZWlnaHQgPSAwCiAgICBmb3IgXywgcGxyIGluIGlwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiBwbHIgfj0gcGxheWVyIHRoZW4KICAgICAgICAgICAgbG9jYWwgYnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICAgICAgYnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMSwgLTYsIDAsIDI1KQogICAgICAgICAgICBidXR0b24uVGV4dCA9IHBsci5OYW1lCiAgICAgICAgICAgIGJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogICAgICAgICAgICBidXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDYwLCA2MCwgNjApCiAgICAgICAgICAgIGJ1dHRvbi5QYXJlbnQgPSBzY3JvbGxpbmdGcmFtZQoKICAgICAgICAgICAgYnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgc2VsZWN0ZWRQbGF5ZXIgPSBwbHIKICAgICAgICAgICAgICAgIGRyb3Bkb3duLlRleHQgPSBwbHIuTmFtZQogICAgICAgICAgICAgICAgcGxheWVyTGlzdC5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAKICAgICAgICAgICAgdG90YWxIZWlnaHQgPSB0b3RhbEhlaWdodCArIDI1CiAgICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgc2Nyb2xsaW5nRnJhbWUuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCB0b3RhbEhlaWdodCkKZW5kCgpkcm9wZG93bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIHBsYXllckxpc3QuVmlzaWJsZSA9IG5vdCBwbGF5ZXJMaXN0LlZpc2libGUKICAgIGlmIHBsYXllckxpc3QuVmlzaWJsZSB0aGVuCiAgICAgICAgdXBkYXRlUGxheWVyTGlzdCgpCiAgICBlbmQKZW5kKQoKbG9jYWwgdHBUb1BsYXllckJ1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCnRwVG9QbGF5ZXJCdXR0b24uU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDQwKQp0cFRvUGxheWVyQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAsIDI5MCkKdHBUb1BsYXllckJ1dHRvbi5UZXh0ID0gIlRQIHRvIFBsYXllciIKdHBUb1BsYXllckJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQp0cFRvUGxheWVyQnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3MCwgNzAsIDcwKQp0cFRvUGxheWVyQnV0dG9uLlRleHRTY2FsZWQgPSB0cnVlCnRwVG9QbGF5ZXJCdXR0b24uUGFyZW50ID0gdGVsZXBvcnRGcmFtZQoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLS0gU0VDVElPTiBCQVNJQyBTVEFUUyAKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KbG9jYWwgc3BlZWRMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKc3BlZWRMYWJlbC5TaXplID0gVURpbTIubmV3KDAuOSwgMCwgMCwgMzApCnNwZWVkTGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wNSwgMCwgMCwgMjApCnNwZWVkTGFiZWwuVGV4dCA9ICJTcGVlZDoiCnNwZWVkTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKc3BlZWRMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQpzcGVlZExhYmVsLlRleHRTY2FsZWQgPSB0cnVlCnNwZWVkTGFiZWwuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKc3BlZWRMYWJlbC5QYXJlbnQgPSBzdGF0c0ZyYW1lCgpsb2NhbCBzcGVlZFRleHRCb3ggPSBJbnN0YW5jZS5uZXcoIlRleHRCb3giKQpzcGVlZFRleHRCb3guU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDMwKQpzcGVlZFRleHRCb3guUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wNSwgMCwgMCwgNjApCnNwZWVkVGV4dEJveC5UZXh0ID0gIjE2IgpzcGVlZFRleHRCb3guVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKc3BlZWRUZXh0Qm94LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3MCwgNzAsIDcwKQpzcGVlZFRleHRCb3guVGV4dFNjYWxlZCA9IHRydWUKc3BlZWRUZXh0Qm94LlBhcmVudCA9IHN0YXRzRnJhbWUKCmxvY2FsIGp1bXBMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKanVtcExhYmVsLlNpemUgPSBVRGltMi5uZXcoMC45LCAwLCAwLCAzMCkKanVtcExhYmVsLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAsIDExMCkKanVtcExhYmVsLlRleHQgPSAiSnVtcCBQb3dlcjoiCmp1bXBMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQpqdW1wTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKanVtcExhYmVsLlRleHRTY2FsZWQgPSB0cnVlCmp1bXBMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdApqdW1wTGFiZWwuUGFyZW50ID0gc3RhdHNGcmFtZQoKbG9jYWwganVtcFRleHRCb3ggPSBJbnN0YW5jZS5uZXcoIlRleHRCb3giKQpqdW1wVGV4dEJveC5TaXplID0gVURpbTIubmV3KDAuOSwgMCwgMCwgMzApCmp1bXBUZXh0Qm94LlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAsIDE1MCkKanVtcFRleHRCb3guVGV4dCA9ICI1MCIKanVtcFRleHRCb3guVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKanVtcFRleHRCb3guQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcwLCA3MCwgNzApCmp1bXBUZXh0Qm94LlRleHRTY2FsZWQgPSB0cnVlCmp1bXBUZXh0Qm94LlBhcmVudCA9IHN0YXRzRnJhbWUKCmxvY2FsIGhlYWx0aExhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQpoZWFsdGhMYWJlbC5TaXplID0gVURpbTIubmV3KDAuOSwgMCwgMCwgMzApCmhlYWx0aExhYmVsLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAsIDIwMCkKaGVhbHRoTGFiZWwuVGV4dCA9ICJIZWFsdGg6IgpoZWFsdGhMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQpoZWFsdGhMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQpoZWFsdGhMYWJlbC5UZXh0U2NhbGVkID0gdHJ1ZQpoZWFsdGhMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdApoZWFsdGhMYWJlbC5QYXJlbnQgPSBzdGF0c0ZyYW1lCgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQotLSBJU0xBTkQgVFAKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmxvY2FsIHRlbGVwb3J0T3B0aW9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKdGVsZXBvcnRPcHRpb24uU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDQwKQp0ZWxlcG9ydE9wdGlvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjA1LCAwLCAwLCA0MDApCnRlbGVwb3J0T3B0aW9uLlRleHQgPSAiSXNsYW5kIFRQIgp0ZWxlcG9ydE9wdGlvbi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQp0ZWxlcG9ydE9wdGlvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNzAsIDcwLCA3MCkKdGVsZXBvcnRPcHRpb24uVGV4dFNjYWxlZCA9IHRydWUKdGVsZXBvcnRPcHRpb24uUGFyZW50ID0gbWxGcmFtZQoKLS0gQ3LDqWF0aW9uIGR1IFNjcm9sbGluZ0ZyYW1lIHBvdXIgbGUgbWVudSBkw6lyb3VsYW50IGRlcyBkZXN0aW5hdGlvbnMKbG9jYWwgdGVsZXBvcnRTY3JvbGxGcmFtZSA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQp0ZWxlcG9ydFNjcm9sbEZyYW1lLk5hbWUgPSAiVGVsZXBvcnRTY3JvbGxGcmFtZSIKdGVsZXBvcnRTY3JvbGxGcmFtZS5TaXplID0gVURpbTIubmV3KDAuOSwgMCwgMCwgMTQwKSAgLS0gSGF1dGV1ciB2aXNpYmxlIGR1IG1lbnUKdGVsZXBvcnRTY3JvbGxGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjA1LCAwLCAwLCA0NDUpICAtLSBQbGFjw6kganVzdGUgZW4gZGVzc291cyBkdSBib3V0b24gcHJpbmNpcGFsCnRlbGVwb3J0U2Nyb2xsRnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDUwLCA1MCwgNTApCnRlbGVwb3J0U2Nyb2xsRnJhbWUuU2Nyb2xsQmFyVGhpY2tuZXNzID0gMTAgIC0tIMOJcGFpc3NldXIgZGUgbGEgYmFycmUgZGUgZMOpZmlsZW1lbnQKdGVsZXBvcnRTY3JvbGxGcmFtZS5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDMwMCkgIC0tIFpvbmUgdG90YWxlIGTDqWZpbGFibGUgKGF1Z21lbnRleiBjZXR0ZSB2YWxldXIgc2kgYmVzb2luKQp0ZWxlcG9ydFNjcm9sbEZyYW1lLlZpc2libGUgPSBmYWxzZSAgLS0gQ2FjaMOpIHBhciBkw6lmYXV0CnRlbGVwb3J0U2Nyb2xsRnJhbWUuUGFyZW50ID0gbWxGcmFtZQoKLS0gQWpvdXQgZCd1biBVSUxpc3RMYXlvdXQgcG91ciBvcmdhbmlzZXIgbGVzIG9wdGlvbnMgdmVydGljYWxlbWVudApsb2NhbCB1aUxpc3RMYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJTGlzdExheW91dCIpCnVpTGlzdExheW91dC5QYXJlbnQgPSB0ZWxlcG9ydFNjcm9sbEZyYW1lCnVpTGlzdExheW91dC5Tb3J0T3JkZXIgPSBFbnVtLlNvcnRPcmRlci5MYXlvdXRPcmRlcgp1aUxpc3RMYXlvdXQuUGFkZGluZyA9IFVEaW0ubmV3KDAsIDUpCgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQotLSBFTkQKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmxvY2FsIHJvY2tUUE9wdGlvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCnJvY2tUUE9wdGlvbi5TaXplID0gVURpbTIubmV3KDAuOSwgMCwgMCwgNDApCnJvY2tUUE9wdGlvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjA1LCAwLCAwLCA1ODUpICAtLSBQb3NpdGlvbm7DqSBlbiBkZXNzb3VzIGRlcyBhdXRyZXMgb3B0aW9ucwpyb2NrVFBPcHRpb24uVGV4dCA9ICJSb2NrIHRwIgpyb2NrVFBPcHRpb24uVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKcm9ja1RQT3B0aW9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3MCwgNzAsIDcwKQpyb2NrVFBPcHRpb24uVGV4dFNjYWxlZCA9IHRydWUKcm9ja1RQT3B0aW9uLlBhcmVudCA9IG1sRnJhbWUKCi0tIENyw6lhdGlvbiBkdSBTY3JvbGxpbmdGcmFtZSBwb3VyIGxlIG1lbnUgZMOpcm91bGFudCBkZXMgZGVzdGluYXRpb25zICJSb2NrIHRwIgpsb2NhbCByb2NrVFBTY3JvbGxGcmFtZSA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQpyb2NrVFBTY3JvbGxGcmFtZS5OYW1lID0gIlJvY2tUUFNjcm9sbEZyYW1lIgpyb2NrVFBTY3JvbGxGcmFtZS5TaXplID0gVURpbTIubmV3KDAuOSwgMCwgMCwgMTM4KSAgLS0gSGF1dGV1ciB2aXNpYmxlCnJvY2tUUFNjcm9sbEZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAsIDYyOSkgIC0tIFBsYWPDqSBqdXN0ZSBlbiBkZXNzb3VzIGR1IGJvdXRvbiAiUm9jayB0cCIKcm9ja1RQU2Nyb2xsRnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDUwLCA1MCwgNTApCnJvY2tUUFNjcm9sbEZyYW1lLlNjcm9sbEJhclRoaWNrbmVzcyA9IDEwICAtLSBCYXJyZSBkZSBkw6lmaWxlbWVudCB2aXNpYmxlCnJvY2tUUFNjcm9sbEZyYW1lLkNhbnZhc1NpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgMzUwKSAgLS0gWm9uZSBkw6lmaWxhYmxlIChhanVzdGV6IHNlbG9uIGxlIG5vbWJyZSBkJ29wdGlvbnMpCnJvY2tUUFNjcm9sbEZyYW1lLlZpc2libGUgPSBmYWxzZSAgLS0gQ2FjaMOpIHBhciBkw6lmYXV0CnJvY2tUUFNjcm9sbEZyYW1lLlBhcmVudCA9IG1sRnJhbWUKCi0tIEFqb3V0IGQndW4gVUlMaXN0TGF5b3V0IHBvdXIgb3JnYW5pc2VyIGxlcyBvcHRpb25zIHZlcnRpY2FsZW1lbnQgZGFucyBsZSBTY3JvbGxpbmdGcmFtZQpsb2NhbCByb2NrVFBMaXN0TGF5b3V0ID0gSW5zdGFuY2UubmV3KCJVSUxpc3RMYXlvdXQiKQpyb2NrVFBMaXN0TGF5b3V0LlBhcmVudCA9IHJvY2tUUFNjcm9sbEZyYW1lCnJvY2tUUExpc3RMYXlvdXQuU29ydE9yZGVyID0gRW51bS5Tb3J0T3JkZXIuTGF5b3V0T3JkZXIKcm9ja1RQTGlzdExheW91dC5QYWRkaW5nID0gVURpbS5uZXcoMCwgNSkKCmxvY2FsIGhlYWx0aFRleHRCb3ggPSBJbnN0YW5jZS5uZXcoIlRleHRCb3giKQpoZWFsdGhUZXh0Qm94LlNpemUgPSBVRGltMi5uZXcoMC45LCAwLCAwLCAzMCkKaGVhbHRoVGV4dEJveC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjA1LCAwLCAwLCAyNDApCmhlYWx0aFRleHRCb3guVGV4dCA9ICIxMDAiCmhlYWx0aFRleHRCb3guVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKaGVhbHRoVGV4dEJveC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNzAsIDcwLCA3MCkKaGVhbHRoVGV4dEJveC5UZXh0U2NhbGVkID0gdHJ1ZQpoZWFsdGhUZXh0Qm94LlBhcmVudCA9IHN0YXRzRnJhbWUKCmxvY2FsIGdob3N0V2FsbE9wdGlvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCmdob3N0V2FsbE9wdGlvbi5OYW1lID0gIkdob3N0V2FsbE9wdGlvbiIKZ2hvc3RXYWxsT3B0aW9uLlNpemUgPSBVRGltMi5uZXcoMC45LCAwLCAwLCAzMCkKZ2hvc3RXYWxsT3B0aW9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAsIDYwMCkgIC0tIEFqdXN0ZXogbGEgcG9zaXRpb24gdmVydGljYWxlIHNlbG9uIHZvcyBiZXNvaW5zCmdob3N0V2FsbE9wdGlvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNzAsIDcwLCA3MCkKZ2hvc3RXYWxsT3B0aW9uLkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEwMCwgMTAwLCAxMDApCmdob3N0V2FsbE9wdGlvbi5UZXh0ID0gIk9GRiIKZ2hvc3RXYWxsT3B0aW9uLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCmdob3N0V2FsbE9wdGlvbi5UZXh0U2l6ZSA9IDE2Cmdob3N0V2FsbE9wdGlvbi5UZXh0U2NhbGVkID0gdHJ1ZQpnaG9zdFdhbGxPcHRpb24uUGFyZW50ID0gc3RhdHNGcmFtZQoKbG9jYWwgZ2hvc3RXYWxsTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCmdob3N0V2FsbExhYmVsLlNpemUgPSBVRGltMi5uZXcoMC45LCAwLCAwLCAzMCkKZ2hvc3RXYWxsTGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wNSwgMCwgMCwgNTYwKQpnaG9zdFdhbGxMYWJlbC5UZXh0ID0gIkdob3N0V2FsbChDYW4gU2VlIFRocm91Z2ggVGhlIFdhbGwpOiIKZ2hvc3RXYWxsTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKZ2hvc3RXYWxsTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKZ2hvc3RXYWxsTGFiZWwuVGV4dFNjYWxlZCA9IHRydWUKZ2hvc3RXYWxsTGFiZWwuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKZ2hvc3RXYWxsTGFiZWwuUGFyZW50ID0gc3RhdHNGcmFtZQoKbG9jYWwgbG9ja2VkT3B0aW9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKbG9ja2VkT3B0aW9uLk5hbWUgPSAiTG9ja2VkT3B0aW9uIgpsb2NrZWRPcHRpb24uU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDMwKQpsb2NrZWRPcHRpb24uUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wNSwgMCwgMCwgIDY5MCkgIC0tIFBvc2l0aW9ubmV6LWxlIGNvbW1lIHZvdXMgbGUgc291aGFpdGV6IGRhbnMgbWlzY0ZyYW1lCmxvY2tlZE9wdGlvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNzAsIDcwLCA3MCkKbG9ja2VkT3B0aW9uLkJvcmRlckNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEwMCwgMTAwLCAxMDApCmxvY2tlZE9wdGlvbi5UZXh0ID0gIkxvY2tlZDogT0ZGIgpsb2NrZWRPcHRpb24uVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKbG9ja2VkT3B0aW9uLlRleHRTaXplID0gMTYKbG9ja2VkT3B0aW9uLlRleHRTY2FsZWQgPSB0cnVlCmxvY2tlZE9wdGlvbi5QYXJlbnQgPSBzdGF0c0ZyYW1lCgpsb2NhbCBsb2NrZWRMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKbG9ja2VkTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDMwKQpsb2NrZWRMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjA1LCAwLCAwLCA2NTApCmxvY2tlZExhYmVsLlRleHQgPSAiTG9ja2VkKENhbnQgTW92ZSwgaWYgWW91IERpZWQsIFlvdSdsbCBTcGF3biBhZ2FpbiBhdCB5b3VyIGxhc3QgcGxhY2UpOiIKbG9ja2VkTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKbG9ja2VkTGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKbG9ja2VkTGFiZWwuVGV4dFNjYWxlZCA9IHRydWUKbG9ja2VkTGFiZWwuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKbG9ja2VkTGFiZWwuUGFyZW50ID0gc3RhdHNGcmFtZQoKbG9jYWwgY29udHJvbEZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCmNvbnRyb2xGcmFtZS5OYW1lID0gIlNwZWN0YXRvckNvbnRyb2xGcmFtZSIKY29udHJvbEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgNTApCmNvbnRyb2xGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCA0MDApICAtLSBBanVzdGUgbGEgcG9zaXRpb24gc2Vsb24gdGVzIGJlc29pbnMKY29udHJvbEZyYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCmNvbnRyb2xGcmFtZS5QYXJlbnQgPSB0ZWxlcG9ydEZyYW1lCgotLSBMYWJlbCAiTW9kZSBTcGVjdGF0ZXVyIgpsb2NhbCBzcGVjdGF0ZUxhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQpzcGVjdGF0ZUxhYmVsLk5hbWUgPSAiU3BlY3RhdGVMYWJlbCIKc3BlY3RhdGVMYWJlbC5UZXh0ID0gIk1vZGUgU3BlY3RhdGV1ciIKc3BlY3RhdGVMYWJlbC5TaXplID0gVURpbTIubmV3KDAuNiwgMCwgMSwgMCkKc3BlY3RhdGVMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQpzcGVjdGF0ZUxhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsMSwxKQpzcGVjdGF0ZUxhYmVsLlBhcmVudCA9IGNvbnRyb2xGcmFtZQoKLS0gVG9nZ2xlIHN3aXRjaApsb2NhbCB0b2dnbGVTd2l0Y2ggPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKdG9nZ2xlU3dpdGNoLk5hbWUgPSAiVG9nZ2xlU3dpdGNoIgp0b2dnbGVTd2l0Y2guU2l6ZSA9IFVEaW0yLm5ldygwLCA1MCwgMCwgMjUpCnRvZ2dsZVN3aXRjaC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjY1LCAwLCAwLjM3NSwgLTUpCnRvZ2dsZVN3aXRjaC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTAwLCAxMDAsIDEwMCkKdG9nZ2xlU3dpdGNoLlBhcmVudCA9IGNvbnRyb2xGcmFtZQoKbG9jYWwgdG9nZ2xlVUlDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKdG9nZ2xlVUlDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMTIpCnRvZ2dsZVVJQ29ybmVyLlBhcmVudCA9IHRvZ2dsZVN3aXRjaAoKbG9jYWwgdG9nZ2xlSW5kaWNhdG9yID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCnRvZ2dsZUluZGljYXRvci5OYW1lID0gIlRvZ2dsZUluZGljYXRvciIKdG9nZ2xlSW5kaWNhdG9yLlNpemUgPSBVRGltMi5uZXcoMCwgMjUsIDEsIDApCnRvZ2dsZUluZGljYXRvci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAwKSAtLSDDoCBnYXVjaGUgcGFyIGTDqWZhdXQgKGTDqXNhY3RpdsOpKQp0b2dnbGVJbmRpY2F0b3IuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCnRvZ2dsZUluZGljYXRvci5QYXJlbnQgPSB0b2dnbGVTd2l0Y2gKCmxvY2FsIGluZGljYXRvclVJQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCmluZGljYXRvclVJQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDEyKQppbmRpY2F0b3JVSUNvcm5lci5QYXJlbnQgPSB0b2dnbGVJbmRpY2F0b3IKCi0tIEJvdXRvbiBwb3VyIGFmZmljaGVyL21hc3F1ZXIgbGEgbGlzdGUgZGVzIGpvdWV1cnMKbG9jYWwgbGlzdEJ1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCmxpc3RCdXR0b24uTmFtZSA9ICJMaXN0QnV0dG9uIgpsaXN0QnV0dG9uLlRleHQgPSAiUGxheWVyIFRvIFNwZWN0YXRlIgpsaXN0QnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMC41NSwgMCwgMCwgNDApCmxpc3RCdXR0b24uUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wNSwgMCwgMCwgMCkKbGlzdEJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoODAsIDgwLCA4MCkKbGlzdEJ1dHRvbi5UZXh0U2NhbGVkID0gdHJ1ZQpsaXN0QnV0dG9uLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsMSwxKQpsaXN0QnV0dG9uLlBhcmVudCA9IGNvbnRyb2xGcmFtZQo=","Ci0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLS0gbGEgbGlzdGUgZMOpcm91bGFudGUKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKbG9jYWwgcGxheWVyTGlzdEZyYW1lID0gSW5zdGFuY2UubmV3KCJTY3JvbGxpbmdGcmFtZSIpCnBsYXllckxpc3RGcmFtZS5OYW1lID0gIlBsYXllckxpc3RGcmFtZSIKcGxheWVyTGlzdEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMC41NSwgMCwgMCwgMTIwKQpwbGF5ZXJMaXN0RnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wNSwgMCwgMCwgNDQwKSAgLS0gUG9zaXRpb24gcmVsYXRpdmUgw6AgdGVsZXBvcnRGcmFtZQpwbGF5ZXJMaXN0RnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDYwLCA2MCwgNjApCnBsYXllckxpc3RGcmFtZS5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDApCnBsYXllckxpc3RGcmFtZS5WaXNpYmxlID0gZmFsc2UKcGxheWVyTGlzdEZyYW1lLlBhcmVudCA9IHRlbGVwb3J0RnJhbWUKCmxvY2FsIGxpc3RMYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJTGlzdExheW91dCIpCmxpc3RMYXlvdXQuUGFyZW50ID0gcGxheWVyTGlzdEZyYW1lCmxpc3RMYXlvdXQuU29ydE9yZGVyID0gRW51bS5Tb3J0T3JkZXIuTGF5b3V0T3JkZXIKCmxvY2FsIGF1dG9SZWJpcnRoQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKYXV0b1JlYmlydGhCdXR0b24uTmFtZSA9ICJBdXRvUmViaXJ0aEJ1dHRvbiIKYXV0b1JlYmlydGhCdXR0b24uU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDQwKQphdXRvUmViaXJ0aEJ1dHRvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjA1LCAwLCAwLjIsIDU1MCkgLS0gQWp1c3RleiBsYSBwb3NpdGlvbiBzZWxvbiB2b3MgYmVzb2lucwphdXRvUmViaXJ0aEJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoODAsIDgwLCA4MCkKYXV0b1JlYmlydGhCdXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCmF1dG9SZWJpcnRoQnV0dG9uLlRleHQgPSAiQXV0byBSZWJpcnRoOiBPRkYiCmF1dG9SZWJpcnRoQnV0dG9uLlRleHRTY2FsZWQgPSB0cnVlCmF1dG9SZWJpcnRoQnV0dG9uLlRleHRTaXplID0gMTYKYXV0b1JlYmlydGhCdXR0b24uUGFyZW50ID0gbWxGcmFtZQoKbG9jYWwgYXV0b1RyYWluQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKYXV0b1RyYWluQnV0dG9uLk5hbWUgPSAiQXV0b1RyYWluQnV0dG9uIgphdXRvVHJhaW5CdXR0b24uU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDQwKQphdXRvVHJhaW5CdXR0b24uUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wNSwgMCwgMCwgMjA1KSAgLS0gUG9zaXRpb25uZSBsZSBib3V0b24gw6AgbCdpbnTDqXJpZXVyIGRlIG1sRnJhbWUKYXV0b1RyYWluQnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgODAsIDgwKQphdXRvVHJhaW5CdXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCmF1dG9UcmFpbkJ1dHRvbi5UZXh0U2NhbGVkID0gdHJ1ZQphdXRvVHJhaW5CdXR0b24uVGV4dCA9ICJBdXRvIFRyYWluOiBPZmYiCmF1dG9UcmFpbkJ1dHRvbi5QYXJlbnQgPSBtbEZyYW1lCgpsb2NhbCBsb2NhbFRwQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKbG9jYWxUcEJ1dHRvbi5TaXplID0gVURpbTIubmV3KDAuOSwgMCwgMCwgNDApCmxvY2FsVHBCdXR0b24uUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wNSwgMCwgMCwgNTYwKSAgLS0gQWp1c3RleiBsYSBwb3NpdGlvbiBzaSBiZXNvaW4KbG9jYWxUcEJ1dHRvbi5UZXh0ID0gImxvY2FsIHRwIHBsYXllciIKbG9jYWxUcEJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNzAsIDcwLCA3MCkKbG9jYWxUcEJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKbG9jYWxUcEJ1dHRvbi5UZXh0U2NhbGVkID0gdHJ1ZQpsb2NhbFRwQnV0dG9uLlBhcmVudCA9IHRlbGVwb3J0RnJhbWUKCi0tIFBhbm5lYXUgZGUgbGlzdGUgZGVzIGpvdWV1cnMKbG9jYWwgbGlzdFBhbmVsID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCmxpc3RQYW5lbC5TaXplID0gVURpbTIubmV3KDAuOSwgMCwgMCwgMTAwKQpsaXN0UGFuZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wNSwgMCwgMCwgNjAzKSAgLS0gQWp1c3RleiBsYSBwb3NpdGlvbiBzZWxvbiB2b3RyZSBtZW51Cmxpc3RQYW5lbC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNzAsIDcwLCA3MCkKbGlzdFBhbmVsLlZpc2libGUgPSBmYWxzZQpsaXN0UGFuZWwuUGFyZW50ID0gdGVsZXBvcnRGcmFtZQoKLS0gU2Nyb2xsaW5nRnJhbWUgcG91ciBsYSBsaXN0ZSBkZXMgam91ZXVycwpsb2NhbCBzY3JvbGxpbmdGcmFtZSA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQpzY3JvbGxpbmdGcmFtZS5TaXplID0gVURpbTIubmV3KDEsIC0xMCwgMSwgLTEwKQpzY3JvbGxpbmdGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCA1KQpzY3JvbGxpbmdGcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA0MCkKc2Nyb2xsaW5nRnJhbWUuU2Nyb2xsQmFyVGhpY2tuZXNzID0gOApzY3JvbGxpbmdGcmFtZS5QYXJlbnQgPSBsaXN0UGFuZWwKCmxvY2FsIGxpc3RMYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJTGlzdExheW91dCIpCmxpc3RMYXlvdXQuUGFyZW50ID0gc2Nyb2xsaW5nRnJhbWUKbGlzdExheW91dC5Tb3J0T3JkZXIgPSBFbnVtLlNvcnRPcmRlci5MYXlvdXRPcmRlcgpsaXN0TGF5b3V0LlBhZGRpbmcgPSBVRGltLm5ldygwLCAwKQoKbG9jYWwgdG9nZ2xlQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKdG9nZ2xlQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMC45LCAwLCAwLCAzMCkKdG9nZ2xlQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAsIDQyMCkgIC0tIEFqdXN0ZXogbGEgcG9zaXRpb24gc2kgYmVzb2luCnRvZ2dsZUJ1dHRvbi5UZXh0ID0gIlNlZSBQbGF5ZXJzJ3MgSW52ZW50b3J5Igp0b2dnbGVCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcwLCA3MCwgNzApCnRvZ2dsZUJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKdG9nZ2xlQnV0dG9uLlRleHRTY2FsZWQgPSB0cnVlCnRvZ2dsZUJ1dHRvbi5QYXJlbnQgPSBzdGF0c0ZyYW1lCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi0tIFNFQ1RJT04gRkxZIC0gT3B0aW9uIE11bHRpcGxlIEp1bXAKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCi0tIEJvdXRvbiBwb3VyIGFjdGl2ZXIvZMOpc2FjdGl2ZXIgbGVzIHNhdXRzIG11bHRpcGxlcyAoaW5maW5pcykKbG9jYWwgbXVsdGlwbGVKdW1wQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKbXVsdGlwbGVKdW1wQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMC45LCAwLCAwLCA0MCkKbXVsdGlwbGVKdW1wQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAsIDIwKQptdWx0aXBsZUp1bXBCdXR0b24uVGV4dCA9ICJNdWx0aXBsZSBKdW1wOiBPRkYiCm11bHRpcGxlSnVtcEJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQptdWx0aXBsZUp1bXBCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcwLCA3MCwgNzApCm11bHRpcGxlSnVtcEJ1dHRvbi5UZXh0U2NhbGVkID0gdHJ1ZQptdWx0aXBsZUp1bXBCdXR0b24uUGFyZW50ID0gZmx5RnJhbWUKCmxvY2FsIGluZmluaXRlSnVtcEVuYWJsZWQgPSBmYWxzZQoKbXVsdGlwbGVKdW1wQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgaW5maW5pdGVKdW1wRW5hYmxlZCA9IG5vdCBpbmZpbml0ZUp1bXBFbmFibGVkCiAgICBpZiBpbmZpbml0ZUp1bXBFbmFibGVkIHRoZW4KICAgICAgICBtdWx0aXBsZUp1bXBCdXR0b24uVGV4dCA9ICJNdWx0aXBsZSBKdW1wOiBPTiIKICAgIGVsc2UKICAgICAgICBtdWx0aXBsZUp1bXBCdXR0b24uVGV4dCA9ICJNdWx0aXBsZSBKdW1wOiBPRkYiCiAgICBlbmQKZW5kKQoKLS0gRMOpdGVjdGlvbiBkZSBsYSB0b3VjaGUgRXNwYWNlIHBvdXIgbGVzIHNhdXRzIG11bHRpcGxlcwpVc2VySW5wdXRTZXJ2aWNlLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCwgZ2FtZVByb2Nlc3NlZCkKICAgIGlmIGdhbWVQcm9jZXNzZWQgdGhlbiByZXR1cm4gZW5kCiAgICBpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5TcGFjZSBhbmQgaW5maW5pdGVKdW1wRW5hYmxlZCB0aGVuCiAgICAgICAgbG9jYWwgY2hhcmFjdGVyID0gcGxheWVyLkNoYXJhY3RlcgogICAgICAgIGlmIGNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgIGxvY2FsIGh1bWFub2lkID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKQogICAgICAgICAgICBpZiBodW1hbm9pZCB0aGVuCiAgICAgICAgICAgICAgICBodW1hbm9pZDpDaGFuZ2VTdGF0ZShFbnVtLkh1bWFub2lkU3RhdGVUeXBlLkp1bXBpbmcpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCkKCmxvY2FsIGFpbWJvdEVuYWJsZWQgPSBmYWxzZQpsb2NhbCBkZXRlY3Rpb25SYW5nZSA9IDUwCmxvY2FsIHRhcmdldFBsYXllciA9IG5pbApsb2NhbCBydW5TZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikKbG9jYWwgYWltYm90Q29ubmVjdGlvbiA9IG5pbAotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQotLSBGT05DVElPTlMgQ09NTVVORVMKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KbG9jYWwgaXNUZWxlcG9ydGluZyA9IGZhbHNlCgpsb2NhbCBmdW5jdGlvbiB0ZWxlcG9ydFRvUmFuZG9tUGxheWVyKCkKICAgIGxvY2FsIHBsYXllcnMgPSBQbGF5ZXJzOkdldFBsYXllcnMoKQogICAgaWYgI3BsYXllcnMgPD0gMSB0aGVuIHJldHVybiBlbmQKCiAgICBsb2NhbCByYW5kb21QbGF5ZXIKICAgIHJlcGVhdAogICAgICAgIHJhbmRvbVBsYXllciA9IHBsYXllcnNbbWF0aC5yYW5kb20oMSwgI3BsYXllcnMpXQogICAgdW50aWwgcmFuZG9tUGxheWVyIH49IHBsYXllciBhbmQgcmFuZG9tUGxheWVyLkNoYXJhY3RlcgoKICAgIGxvY2FsIHRhcmdldENoYXJhY3RlciA9IHJhbmRvbVBsYXllci5DaGFyYWN0ZXIKICAgIGlmIHRhcmdldENoYXJhY3RlciB0aGVuCiAgICAgICAgbG9jYWwgdGFyZ2V0SHVtYW5vaWRSb290UGFydCA9IHRhcmdldENoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgbG9jYWwgbXlDaGFyYWN0ZXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgbG9jYWwgbXlIdW1hbm9pZFJvb3RQYXJ0ID0gbXlDaGFyYWN0ZXIgYW5kIG15Q2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKCiAgICAgICAgaWYgdGFyZ2V0SHVtYW5vaWRSb290UGFydCBhbmQgbXlIdW1hbm9pZFJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgbXlIdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHRhcmdldEh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICsgVmVjdG9yMy5uZXcoMCwgMywgMCkKICAgICAgICBlbmQKICAgIGVuZAplbmQKCmxvY2FsIGZ1bmN0aW9uIHRlbGVwb3J0QWxsUGxheWVyc1RvTWUoKQogICAgd2hpbGUgaXNUZWxlcG9ydGluZyBkbwogICAgICAgIGZvciBfLCBvdGhlclBsYXllciBpbiBpcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgICAgIGlmIG90aGVyUGxheWVyIH49IHBsYXllciBhbmQgb3RoZXJQbGF5ZXIuQ2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldENoYXJhY3RlciA9IG90aGVyUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0SHVtYW5vaWRSb290UGFydCA9IHRhcmdldENoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgICAgICBsb2NhbCBteUNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgIGxvY2FsIG15SHVtYW5vaWRSb290UGFydCA9IG15Q2hhcmFjdGVyIGFuZCBteUNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCgogICAgICAgICAgICAgICAgaWYgdGFyZ2V0SHVtYW5vaWRSb290UGFydCBhbmQgbXlIdW1hbm9pZFJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgICAgICAgICB0YXJnZXRIdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IG15SHVtYW5vaWRSb290UGFydC5DRnJhbWUgKyBWZWN0b3IzLm5ldygwLCAzLCAwKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIHdhaXQoMC4yKQogICAgZW5kCmVuZAoKbG9jYWwgZnVuY3Rpb24gdXBkYXRlUGxheWVyU3RhdHMoKQogICAgbG9jYWwgY2hhcmFjdGVyID0gcGxheWVyLkNoYXJhY3RlcgogICAgaWYgY2hhcmFjdGVyIHRoZW4KICAgICAgICBsb2NhbCBodW1hbm9pZCA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKQogICAgICAgIGlmIGh1bWFub2lkIHRoZW4KICAgICAgICAgICAgc3BlZWRUZXh0Qm94LlRleHQgPSB0b3N0cmluZyhodW1hbm9pZC5XYWxrU3BlZWQpCiAgICAgICAgICAgIGp1bXBUZXh0Qm94LlRleHQgPSB0b3N0cmluZyhodW1hbm9pZC5KdW1wUG93ZXIpCiAgICAgICAgICAgIGhlYWx0aFRleHRCb3guVGV4dCA9IHRvc3RyaW5nKGh1bWFub2lkLkhlYWx0aCkKICAgICAgICAgICAgCiAgICAgICAgICAgIHNwZWVkVGV4dEJveC5Gb2N1c0xvc3Q6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCBzcGVlZCA9IHRvbnVtYmVyKHNwZWVkVGV4dEJveC5UZXh0KQogICAgICAgICAgICAgICAgaWYgc3BlZWQgdGhlbgogICAgICAgICAgICAgICAgICAgIGh1bWFub2lkLldhbGtTcGVlZCA9IHNwZWVkCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAKICAgICAgICAgICAganVtcFRleHRCb3guRm9jdXNMb3N0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbG9jYWwganVtcCA9IHRvbnVtYmVyKGp1bXBUZXh0Qm94LlRleHQpCiAgICAgICAgICAgICAgICBpZiBqdW1wIHRoZW4KICAgICAgICAgICAgICAgICAgICBodW1hbm9pZC5KdW1wUG93ZXIgPSBqdW1wCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAKICAgICAgICAgICAgaHVtYW5vaWQ6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKCJIZWFsdGgiKTpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGhlYWx0aFRleHRCb3guVGV4dCA9IHRvc3RyaW5nKGh1bWFub2lkLkhlYWx0aCkKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCmVuZAoKcmFuZG9tVHBCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdCh0ZWxlcG9ydFRvUmFuZG9tUGxheWVyKQoKdHBUb1BsYXllckJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGlmIHNlbGVjdGVkUGxheWVyIGFuZCBzZWxlY3RlZFBsYXllci5DaGFyYWN0ZXIgYW5kIHBsYXllci5DaGFyYWN0ZXIgdGhlbgogICAgICAgIGxvY2FsIHRhcmdldFJvb3QgPSBzZWxlY3RlZFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgIGxvY2FsIG15Um9vdCA9IHBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQoKICAgICAgICBpZiB0YXJnZXRSb290IGFuZCBteVJvb3QgdGhlbgogICAgICAgICAgICBteVJvb3QuQ0ZyYW1lID0gdGFyZ2V0Um9vdC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDAsIDUpCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKQoKY2hlY2tCb3guTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBpc1RlbGVwb3J0aW5nID0gbm90IGlzVGVsZXBvcnRpbmcKICAgIGNoZWNrQm94LkJhY2tncm91bmRDb2xvcjMgPSBpc1RlbGVwb3J0aW5nIGFuZCBDb2xvcjMuZnJvbVJHQigwLCAyNTUsIDApIG9yIENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICBpZiBpc1RlbGVwb3J0aW5nIHRoZW4KICAgICAgICB0ZWxlcG9ydEFsbFBsYXllcnNUb01lKCkKICAgIGVuZAplbmQpCgpVc2VySW5wdXRTZXJ2aWNlLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCwgZ2FtZVByb2Nlc3NlZCkKICAgIGlmIGdhbWVQcm9jZXNzZWQgdGhlbiByZXR1cm4gZW5kCiAgICBpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5PbmUgYW5kIFVzZXJJbnB1dFNlcnZpY2U6SXNLZXlEb3duKEVudW0uS2V5Q29kZS5MZWZ0Q29udHJvbCkgdGhlbgogICAgICAgIG1haW5GcmFtZS5WaXNpYmxlID0gbm90IG1haW5GcmFtZS5WaXNpYmxlCiAgICAgICAgaWYgbWFpbkZyYW1lLlZpc2libGUgdGhlbgogICAgICAgICAgICB1cGRhdGVQbGF5ZXJTdGF0cygpCiAgICAgICAgZW5kCiAgICBlbmQKCS0tIEFqb3V0ZXIgbGEgZMOpdGVjdGlvbiBkZSBsYSB0b3VjaGUgRXNwYWNlCiAgICBpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5TcGFjZSBhbmQgaW5maW5pdGVKdW1wRW5hYmxlZCB0aGVuCiAgICAgICAgaXNTcGFjZUhlbGQgPSB0cnVlCiAgICAgICAgCiAgICAgICAgLS0gQm91Y2xlIGRlIHNhdXQgcXVpIGNvbnRpbnVlIHRhbnQgcXVlIGxhIHRvdWNoZSBlc3QgbWFpbnRlbnVlCiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICB3aGlsZSBpc1NwYWNlSGVsZCBhbmQgaW5maW5pdGVKdW1wRW5hYmxlZCBkbwogICAgICAgICAgICAgICAgbG9jYWwgY2hhcmFjdGVyID0gcGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICAgICAgaWYgY2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBodW1hbm9pZCA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgICAgICAgICAgICAgICAgICBpZiBodW1hbm9pZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGh1bWFub2lkOkNoYW5nZVN0YXRlKEVudW0uSHVtYW5vaWRTdGF0ZVR5cGUuSnVtcGluZykKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgd2FpdCgwLjEpIC0tIFBldGl0IGTDqWxhaSBlbnRyZSBsZXMgc2F1dHMKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCmVuZCkKCi0tIEFqb3V0ZXIgY2Ugbm91dmVhdSBnZXN0aW9ubmFpcmUgcG91ciBkw6l0ZWN0ZXIgcXVhbmQgbGEgdG91Y2hlIGVzdCByZWzDomNow6llClVzZXJJbnB1dFNlcnZpY2UuSW5wdXRFbmRlZDpDb25uZWN0KGZ1bmN0aW9uKGlucHV0LCBnYW1lUHJvY2Vzc2VkKQogICAgaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuU3BhY2UgdGhlbgogICAgICAgIGlzU3BhY2VIZWxkID0gZmFsc2UKICAgIGVuZAplbmQpCgpsb2NhbCBjaGFybXNFbmFibGVkID0gZmFsc2UKbG9jYWwgaGlnaGxpZ2h0cyA9IHt9CgotLSBGb25jdGlvbiBwb3VyIGFqb3V0ZXIgdW4gY29udG91ciDDoCB1biBqb3VldXIKbG9jYWwgZnVuY3Rpb24gYWRkQ2hhcm1Ub1BsYXllcihwbHIpCiAgICBpZiBwbHIgPT0gcGxheWVyIHRoZW4gcmV0dXJuIGVuZAogICAgCiAgICBsb2NhbCBjaGFyYWN0ZXIgPSBwbHIuQ2hhcmFjdGVyCiAgICBpZiBub3QgY2hhcmFjdGVyIHRoZW4gcmV0dXJuIGVuZAogICAgCiAgICAtLSBTdXBwcmltZXIgbCdhbmNpZW4gY29udG91ciBzaSBleGlzdGFudAogICAgaWYgaGlnaGxpZ2h0c1twbHIuTmFtZV0gdGhlbgogICAgICAgIGhpZ2hsaWdodHNbcGxyLk5hbWVdOkRlc3Ryb3koKQogICAgICAgIGhpZ2hsaWdodHNbcGxyLk5hbWVdID0gbmlsCiAgICBlbmQKICAgIAogICAgLS0gQ3LDqWVyIHVuIG5vdXZlbCBlZmZldCBkZSBjb250b3VyIChIaWdobGlnaHQpCiAgICBsb2NhbCBoaWdobGlnaHQgPSBJbnN0YW5jZS5uZXcoIkhpZ2hsaWdodCIpCiAgICBoaWdobGlnaHQuTmFtZSA9ICJQbGF5ZXJDaGFybSIKICAgIGhpZ2hsaWdodC5GaWxsVHJhbnNwYXJlbmN5ID0gMC41CiAgICBoaWdobGlnaHQuT3V0bGluZVRyYW5zcGFyZW5jeSA9IDAKICAgIGhpZ2hsaWdodC5GaWxsQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDExMywgMTEzKSAgLS0gUm91Z2UgcG91ciBsZSByZW1wbGlzc2FnZQogICAgaGlnaGxpZ2h0Lk91dGxpbmVDb2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAwKSAgLS0gSmF1bmUgcG91ciBsZSBjb250b3VyCiAgICBoaWdobGlnaHQuUGFyZW50ID0gY2hhcmFjdGVyCiAgICAKICAgIGhpZ2hsaWdodHNbcGxyLk5hbWVdID0gaGlnaGxpZ2h0CmVuZAoKLS0gRm9uY3Rpb24gcG91ciBzdXBwcmltZXIgdW4gY29udG91ciBkJ3VuIGpvdWV1cgpsb2NhbCBmdW5jdGlvbiByZW1vdmVDaGFybUZyb21QbGF5ZXIocGxyKQogICAgaWYgaGlnaGxpZ2h0c1twbHIuTmFtZV0gdGhlbgogICAgICAgIGhpZ2hsaWdodHNbcGxyLk5hbWVdOkRlc3Ryb3koKQogICAgICAgIGhpZ2hsaWdodHNbcGxyLk5hbWVdID0gbmlsCiAgICBlbmQKZW5kCgotLSBGb25jdGlvbiBwb3VyIGFwcGxpcXVlci9zdXBwcmltZXIgbGVzIGNvbnRvdXJzIMOgIHRvdXMgbGVzIGpvdWV1cnMKbG9jYWwgZnVuY3Rpb24gdXBkYXRlQWxsQ2hhcm1zKCkKICAgIGlmIGNoYXJtc0VuYWJsZWQgdGhlbgogICAgICAgIGZvciBfLCBwbHIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICBpZiBwbHIgfj0gcGxheWVyIHRoZW4KICAgICAgICAgICAgICAgIGFkZENoYXJtVG9QbGF5ZXIocGxyKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVsc2UKICAgICAgICBmb3IgXywgaGlnaGxpZ2h0IGluIHBhaXJzKGhpZ2hsaWdodHMpIGRvCiAgICAgICAgICAgIGhpZ2hsaWdodDpEZXN0cm95KCkKICAgICAgICBlbmQKICAgICAgICBoaWdobGlnaHRzID0ge30KICAgIGVuZAplbmQKCmxvY2FsIGZ1bmN0aW9uIHVwZGF0ZVNsaWRlclBvc2l0aW9uKHhPZmZzZXQpCiAgICBsb2NhbCBzbGlkZXJTaXplID0gZGlzdGFuY2VTbGlkZXIuQWJzb2x1dGVTaXplLlgKICAgIGxvY2FsIG5ld1Bvc2l0aW9uID0gbWF0aC5jbGFtcCh4T2Zmc2V0IC8gc2xpZGVyU2l6ZSwgMCwgMSkKICAgIHNsaWRlckJ1dHRvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldyhuZXdQb3NpdGlvbiwgMCwgMCwgMCkKICAgIAogICAgLS0gTWV0dHJlIMOgIGpvdXIgbGEgZGlzdGFuY2UgZGUgZMOpdGVjdGlvbiAoMTAgw6AgMTAwKQogICAgZGV0ZWN0aW9uUmFuZ2UgPSBtYXRoLmZsb29yKDEwICsgbmV3UG9zaXRpb24gKiA5MCkKICAgIGRpc3RhbmNlTGFiZWwuVGV4dCA9ICJEZXRlY3Rpb24gUmFuZ2U6ICIgLi4gZGV0ZWN0aW9uUmFuZ2UKZW5kCgotLSBHZXN0aW9uIGR1IHNsaWRlcgpsb2NhbCBpc0RyYWdnaW5nID0gZmFsc2UKCnNsaWRlckJ1dHRvbi5Nb3VzZUJ1dHRvbjFEb3duOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgaXNEcmFnZ2luZyA9IHRydWUKZW5kKQoKVXNlcklucHV0U2VydmljZS5JbnB1dEVuZGVkOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICBpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZUJ1dHRvbjEgdGhlbgogICAgICAgIGlzRHJhZ2dpbmcgPSBmYWxzZQogICAgZW5kCmVuZCkKClVzZXJJbnB1dFNlcnZpY2UuSW5wdXRDaGFuZ2VkOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICBpZiBpc0RyYWdnaW5nIGFuZCBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZU1vdmVtZW50IHRoZW4KICAgICAgICBsb2NhbCBtb3VzZVBvcyA9IFVzZXJJbnB1dFNlcnZpY2U6R2V0TW91c2VMb2NhdGlvbigpCiAgICAgICAgbG9jYWwgc2xpZGVyUG9zID0gZGlzdGFuY2VTbGlkZXIuQWJzb2x1dGVQb3NpdGlvbgogICAgICAgIGxvY2FsIHNsaWRlclNpemUgPSBkaXN0YW5jZVNsaWRlci5BYnNvbHV0ZVNpemUuWAogICAgICAgIGxvY2FsIHJlbGF0aXZlWCA9IG1vdXNlUG9zLlggLSBzbGlkZXJQb3MuWAogICAgICAgIAogICAgICAgIHVwZGF0ZVNsaWRlclBvc2l0aW9uKHJlbGF0aXZlWCkKICAgIGVuZAplbmQpCgotLSBJbml0aWFsaXNlciBsYSBwb3NpdGlvbiBkdSBzbGlkZXIgw6AgNTAlCnVwZGF0ZVNsaWRlclBvc2l0aW9uKGRpc3RhbmNlU2xpZGVyLkFic29sdXRlU2l6ZS5YICogMC41KQoKLS0gRm9uY3Rpb24gcG91ciB0cm91dmVyIGxlIGpvdWV1ciBsZSBwbHVzIHByb2NoZSBkYW5zIGxhIHBsYWdlIGRlIGTDqXRlY3Rpb24KbG9jYWwgZnVuY3Rpb24gZmluZENsb3Nlc3RQbGF5ZXIoKQogICAgbG9jYWwgY2xvc2VzdFBsYXllciA9IG5pbAogICAgbG9jYWwgc2hvcnRlc3REaXN0YW5jZSA9IGRldGVjdGlvblJhbmdlCiAgICAKICAgIGxvY2FsIG15Q2hhcmFjdGVyID0gcGxheWVyLkNoYXJhY3RlcgogICAgaWYgbm90IG15Q2hhcmFjdGVyIHRoZW4gcmV0dXJuIG5pbCBlbmQKICAgIAogICAgbG9jYWwgbXlSb290ID0gbXlDaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgaWYgbm90IG15Um9vdCB0aGVuIHJldHVybiBuaWwgZW5kCiAgICAKICAgIGZvciBfLCBwbHIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgIGlmIHBsciB+PSBwbGF5ZXIgYW5kIHBsci5DaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICBsb2NhbCB0YXJnZXRSb290ID0gcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgIGlmIHRhcmdldFJvb3QgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgZGlzdGFuY2UgPSAobXlSb290LlBvc2l0aW9uIC0gdGFyZ2V0Um9vdC5Qb3NpdGlvbikuTWFnbml0dWRlCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIGRpc3RhbmNlIDwgc2hvcnRlc3REaXN0YW5jZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgc2hvcnRlc3REaXN0YW5jZSA9IGRpc3RhbmNlCiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdFBsYXllciA9IHBscgogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIHJldHVybiBjbG9zZXN0UGxheWVyCmVuZAoKLS0gRm9uY3Rpb24gcG91ciBsJ2FpbWJvdCAtIHZpc2VyIGxlIGpvdWV1ciBsZSBwbHVzIHByb2NoZQpsb2NhbCBmdW5jdGlvbiBhaW1BdFBsYXllcigpCiAgICBpZiBub3QgYWltYm90RW5hYmxlZCB0aGVuIHJldHVybiBlbmQKICAgIAogICAgdGFyZ2V0UGxheWVyID0gZmluZENsb3Nlc3RQbGF5ZXIoKQogICAgCiAgICBsb2NhbCBteUNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIKICAgIGlmIG5vdCBteUNoYXJhY3RlciB0aGVuIHJldHVybiBlbmQKICAgIAogICAgbG9jYWwgbXlIdW1hbm9pZCA9IG15Q2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKQogICAgaWYgbm90IG15SHVtYW5vaWQgdGhlbiByZXR1cm4gZW5kCiAgICAKICAgIGlmIHRhcmdldFBsYXllciBhbmQgdGFyZ2V0UGxheWVyLkNoYXJhY3RlciB0aGVuCiAgICAgICAgbG9jYWwgdGFyZ2V0SGVhZCA9IHRhcmdldFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKQogICAgICAgIGxvY2FsIG15SGVhZCA9IG15Q2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIZWFkIikKICAgICAgICAKICAgICAgICBpZiB0YXJnZXRIZWFkIGFuZCBteUhlYWQgdGhlbgogICAgICAgICAgICAtLSBDYWxjdWxlciBsYSBkaXJlY3Rpb24gdmVycyBsYSBjaWJsZQogICAgICAgICAgICBsb2NhbCB0YXJnZXRWZWN0b3IgPSAodGFyZ2V0SGVhZC5Qb3NpdGlvbiAtIG15SGVhZC5Qb3NpdGlvbikuVW5pdAogICAgICAgICAgICAKICAgICAgICAgICAgLS0gQ29udmVydGlyIGVuIGFuZ2xlcwogICAgICAgICAgICBsb2NhbCBsb29rVmVjdG9yID0gQ0ZyYW1lLmxvb2tBdChteUhlYWQuUG9zaXRpb24sIHRhcmdldEhlYWQuUG9zaXRpb24pLkxvb2tWZWN0b3IKICAgICAgICAgICAgCiAgICAgICAgICAgIC0tIEFwcGxpcXVlciBsYSByb3RhdGlvbiBhdSBwZXJzb25uYWdlCiAgICAgICAgICAgIG15SHVtYW5vaWQuQXV0b1JvdGF0ZSA9IGZhbHNlCiAgICAgICAgICAgIG15Q2hhcmFjdGVyOlNldFByaW1hcnlQYXJ0Q0ZyYW1lKENGcmFtZS5uZXcobXlDaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24sIG15Q2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uICsgVmVjdG9yMy5uZXcobG9va1ZlY3Rvci5YLCAwLCBsb29rVmVjdG9yLlopKSkKICAgICAgICAgICAgCiAgICAgICAgICAgIC0tIEFqdXN0ZXIgbGUgcmVnYXJkIHZlcnMgbGUgaGF1dC9iYXMKICAgICAgICAgICAgaWYgbXlIdW1hbm9pZCBhbmQgbXlIdW1hbm9pZC5Ub3JzbyB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBuZWNrID0gbXlIdW1hbm9pZC5Ub3JzbzpGaW5kRmlyc3RDaGlsZCgiTmVjayIpCiAgICAgICAgICAgICAgICBpZiBuZWNrIGFuZCBuZWNrOklzQSgiTW90b3I2RCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBuZWNrLkMwID0gQ0ZyYW1lLm5ldygwLCAxLCAwKSAqIENGcmFtZS5BbmdsZXMobWF0aC5hc2luKC1sb29rVmVjdG9yLlkpLCAwLCAwKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZWxzZQogICAgICAgIC0tIFNpIHBhcyBkZSBjaWJsZSwgcsOpYWN0aXZlciBsYSByb3RhdGlvbiBhdXRvbWF0aXF1ZQogICAgICAgIGlmIG15SHVtYW5vaWQgdGhlbgogICAgICAgICAgICBteUh1bWFub2lkLkF1dG9Sb3RhdGUgPSB0cnVlCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgotLSBBY3RpdmVyL2TDqXNhY3RpdmVyIGwnYWltYm90CmFpbWJvdEJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGFpbWJvdEVuYWJsZWQgPSBub3QgYWltYm90RW5hYmxlZAogICAgCiAgICBpZiBhaW1ib3RFbmFibGVkIHRoZW4KICAgICAgICBhaW1ib3RCdXR0b24uVGV4dCA9ICJBaW1ib3Q6IE9OIgogICAgICAgIC0tIETDqW1hcnJlciBsYSBib3VjbGUgZGUgbCdhaW1ib3QKICAgICAgICBhaW1ib3RDb25uZWN0aW9uID0gcnVuU2VydmljZS5IZWFydGJlYXQ6Q29ubmVjdChhaW1BdFBsYXllcikKICAgIGVsc2UKICAgICAgICBhaW1ib3RCdXR0b24uVGV4dCA9ICJBaW1ib3Q6IE9GRiIKICAgICAgICAtLSBBcnLDqnRlciBsYSBib3VjbGUgZGUgbCdhaW1ib3QKICAgICAgICBpZiBhaW1ib3RDb25uZWN0aW9uIHRoZW4KICAgICAgICAgICAgYWltYm90Q29ubmVjdGlvbjpEaXNjb25uZWN0KCkKICAgICAgICAgICAgYWltYm90Q29ubmVjdGlvbiA9IG5pbAogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIC0tIFLDqWFjdGl2ZXIgbGEgcm90YXRpb24gYXV0b21hdGlxdWUKICAgICAgICBsb2NhbCBteUNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIKICAgICAgICBpZiBteUNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgIGxvY2FsIG15SHVtYW5vaWQgPSBteUNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgICAgICAgICAgaWYgbXlIdW1hbm9pZCB0aGVuCiAgICAgICAgICAgICAgICBteUh1bWFub2lkLkF1dG9Sb3RhdGUgPSB0cnVlCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCkKCi0tIETDqXRlY3Rpb24gZGUgbm91dmVhdXggam91ZXVycyBwb3VyIGxldXIgYWpvdXRlciB1biBjb250b3VyClBsYXllcnMuUGxheWVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbihwbHIpCiAgICBpZiBjaGFybXNFbmFibGVkIHRoZW4KICAgICAgICBwbHIuQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbihjaGFyKQogICAgICAgICAgICB3YWl0KDEpICAtLSBBdHRlbmRyZSBxdWUgbGUgcGVyc29ubmFnZSBzb2l0IGNvbXBsw6h0ZW1lbnQgY2hhcmfDqQogICAgICAgICAgICBpZiBjaGFybXNFbmFibGVkIHRoZW4KICAgICAgICAgICAgICAgIGFkZENoYXJtVG9QbGF5ZXIocGxyKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKZW5kKQoKLS0gRMOpdGVjdGlvbiBkZXMgam91ZXVycyBxdWkgcXVpdHRlbnQgcG91ciBzdXBwcmltZXIgbGV1ciBjb250b3VyClBsYXllcnMuUGxheWVyUmVtb3Zpbmc6Q29ubmVjdChmdW5jdGlvbihwbHIpCiAgICByZW1vdmVDaGFybUZyb21QbGF5ZXIocGxyKQplbmQpCgotLSBGb25jdGlvbm5hbGl0w6kgZHUgYm91dG9uIENoYXJtcwpjaGFybXNCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBjaGFybXNFbmFibGVkID0gbm90IGNoYXJtc0VuYWJsZWQKICAgIAogICAgaWYgY2hhcm1zRW5hYmxlZCB0aGVuCiAgICAgICAgY2hhcm1zQnV0dG9uLlRleHQgPSAiQ2hhcm1zOiBPTiIKICAgIGVsc2UKICAgICAgICBjaGFybXNCdXR0b24uVGV4dCA9ICJDaGFybXM6IE9GRiIKICAgIGVuZAogICAgCiAgICB1cGRhdGVBbGxDaGFybXMoKQplbmQpCgotLSBDb25uZWN0ZXIgbGVzIHBlcnNvbm5hZ2VzIGRlcyBqb3VldXJzIGV4aXN0YW50cwpmb3IgXywgcGxyIGluIGlwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgIGlmIHBsciB+PSBwbGF5ZXIgdGhlbgogICAgICAgIHBsci5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKGNoYXIpCiAgICAgICAgICAgIHdhaXQoMSkKICAgICAgICAgICAgaWYgY2hhcm1zRW5hYmxlZCB0aGVuCiAgICAgICAgICAgICAgICBhZGRDaGFybVRvUGxheWVyKHBscikKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgICAgIAogICAgICAgIGlmIHBsci5DaGFyYWN0ZXIgYW5kIGNoYXJtc0VuYWJsZWQgdGhlbgogICAgICAgICAgICBhZGRDaGFybVRvUGxheWVyKHBscikKICAgICAgICBlbmQKICAgIGVuZAplbmQKCi0tIE1ldHRyZSDDoCBqb3VyIGxlcyBjb250b3VycyBxdWFuZCBsZSBqb3VldXIgcmVzcGF3bgpwbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbihjaGFyYWN0ZXIpCiAgICAtLSBDb2RlIGV4aXN0YW50Li4uCiAgICAKICAgIC0tIE1ldHRyZSDDoCBqb3VyIGxlcyBjb250b3VycyBzaSBhY3RpdsOpcwogICAgaWYgY2hhcm1zRW5hYmxlZCB0aGVuCiAgICAgICAgd2FpdCgxKQogICAgICAgIHVwZGF0ZUFsbENoYXJtcygpCiAgICBlbmQKZW5kKQoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLS0gVkFSSUFCTEVTIE1MIEFVVE8tUFVOQ0gKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KaWYgTUxfQXV0b1B1bmNoRW5hYmxlZCA9PSBuaWwgdGhlbgogICAgTUxfQXV0b1B1bmNoRW5hYmxlZCA9IGZhbHNlCmVuZAoKaWYgSXNDaGFyYWN0ZXJJbml0aWFsaXplZCA9PSBuaWwgdGhlbgogICAgSXNDaGFyYWN0ZXJJbml0aWFsaXplZCA9IGZhbHNlCmVuZAoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLS0gRk9OQ1RJT04gc2FmZVdhaXRGb3JDaGlsZCAoZMOpasOgIGTDqWZpbmllKQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpsb2NhbCBmdW5jdGlvbiBzYWZlV2FpdEZvckNoaWxkKHBhcmVudCwgY2hpbGROYW1lLCB0aW1lb3V0KQogICAgaWYgbm90IHBhcmVudCB0aGVuCiAgICAgICAgd2Fybigic2FmZVdhaXRGb3JDaGlsZCA6IHBhcmVudCBnb3QgbmlsIER1cmluZyBUaGUgU2VhcmNoICIgLi4gY2hpbGROYW1lKQogICAgICAgIHJldHVybiBuaWwKICAgIGVuZAogICAgdGltZW91dCA9IHRpbWVvdXQgb3IgMTAKICAgIGxvY2FsIHN0YXJ0VGltZSA9IHRpY2soKQogICAgd2hpbGUgdGljaygpIC0gc3RhcnRUaW1lIDwgdGltZW91dCBkbwogICAgICAgIGxvY2FsIGNoaWxkID0gcGFyZW50OkZpbmRGaXJzdENoaWxkKGNoaWxkTmFtZSkKICAgICAgICBpZiBjaGlsZCB0aGVuCiAgICAgICAgICAgIHJldHVybiBjaGlsZAogICAgICAgIGVuZAogICAgICAgIHRhc2sud2FpdCgwLjEpCiAgICBlbmQKICAgIHdhcm4oIk5vdCBQb3NzaWJsZSBUbyBGaW5kICIgLi4gY2hpbGROYW1lIC4uICIgSW4gIiAuLiBwYXJlbnQ6R2V0RnVsbE5hbWUoKSAuLiAiIEFmdGVyICIgLi4gdGltZW91dCAuLiAiIHNlY29uZHMuIikKICAgIHJldHVybiBuaWwKZW5kCgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQotLSBGT05DVElPTiBQT1VSIEVRVUlQRVIgTCdPVVRJTCBERSBQVU5DSAotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpsb2NhbCBmdW5jdGlvbiBlcXVpcFB1bmNoVG9vbCgpCiAgICBsb2NhbCBjaGFyYWN0ZXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCiAgICBpZiBub3QgY2hhcmFjdGVyIHRoZW4gcmV0dXJuIGVuZAogICAgLS0gQ2hlcmNoZXIgbCdvdXRpbCAiUHVuY2giIGRhbnMgbGUgcGVyc29ubmFnZQogICAgbG9jYWwgdG9vbCA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUHVuY2giKQogICAgaWYgbm90IHRvb2wgdGhlbgogICAgICAgIC0tIFNpIHBhcyB0cm91dsOpIGRhbnMgbGUgcGVyc29ubmFnZSwgY2hlcmNoZXIgZGFucyBsZSBCYWNrcGFjawogICAgICAgIGxvY2FsIGJhY2twYWNrID0gcGxheWVyOkZpbmRGaXJzdENoaWxkKCJCYWNrcGFjayIpCiAgICAgICAgaWYgYmFja3BhY2sgdGhlbgogICAgICAgICAgICB0b29sID0gYmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlB1bmNoIikKICAgICAgICBlbmQKICAgIGVuZAogICAgaWYgdG9vbCB0aGVuCiAgICAgICAgLS0gVHJhbnNmw6lyZXIgbCdvdXRpbCBkYW5zIGxlIHBlcnNvbm5hZ2UgcG91ciBsJ8OpcXVpcGVyCiAgICAgICAgdG9vbC5QYXJlbnQgPSBjaGFyYWN0ZXIKICAgICAgICBwcmludCgiUHVuY2ggVG9vbHMgQXV0b21hdGljYWxseSBFcXVpcHBlZCIpCiAgICBlbHNlCiAgICAgICAgd2FybigiUHVuY2ggVG9vbHMgTm90IEZvdW5kIikKICAgIGVuZAplbmQKCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi0tIElOSVRJQUxJU0FUSU9OIERVIFBFUlNPTk5BR0UgUE9VUiBBVVRPLVBVTkNICi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmxvY2FsIGZ1bmN0aW9uIGluaXRpYWxpemVDaGFyYWN0ZXJGb3JQdW5jaChjaGFyKQogICAgcHVuY2hTdGF0dXNMYWJlbC5UZXh0ID0gIlN0YXR1czogSW5pdGlhbGl6YXRpb24gaW4gcHJvZ3Jlc3MuLi4iCiAgICAKICAgIENoYXJhY3RlciA9IGNoYXIKICAgIElzQ2hhcmFjdGVySW5pdGlhbGl6ZWQgPSBmYWxzZQoKICAgIC0tIFJlY2hlcmNoZSBkdSBIdW1hbm9pZAogICAgSHVtYW5vaWQgPSBzYWZlV2FpdEZvckNoaWxkKENoYXJhY3RlciwgIkh1bWFub2lkIiwgMTApCiAgICBpZiBub3QgSHVtYW5vaWQgdGhlbgogICAgICAgIHB1bmNoU3RhdHVzTGFiZWwuVGV4dCA9ICJTdGF0dXM6IFNlcmlvdXMgSXNzdWUgLSBIdW1hbm9pZCBOb3QgRm91bmQiCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICBlbmQKCiAgICBsb2NhbCBnYW1lQW5pbXMgPSBzYWZlV2FpdEZvckNoaWxkKFJlcGxpY2F0ZWRTdG9yYWdlLCAiZ2FtZUFuaW1zIiwgNSkKICAgIGlmIG5vdCBnYW1lQW5pbXMgdGhlbgogICAgICAgIHB1bmNoU3RhdHVzTGFiZWwuVGV4dCA9ICJTdGF0dXM6ICcnZ2FtZUFuaW1zJycgTm90IEZvdW5kIGluIFJlcGxpY2F0ZWRTdG9yYWdlIgogICAgICAgIHJldHVybiBmYWxzZQogICAgZW5kCgogICAgbG9jYWwgdG9vbHNGb2xkZXIgPSBzYWZlV2FpdEZvckNoaWxkKGdhbWVBbmltcywgIlRvb2xzIiwgNSkKICAgIGlmIG5vdCB0b29sc0ZvbGRlciB0aGVuCiAgICAgICAgcHVuY2hTdGF0dXNMYWJlbC5UZXh0ID0gIlN0YXR1czogICcnVG9vbHMnJyBGb2xkZXIgTm90IEZvdW5kIgogICAgICAgIHJldHVybiBmYWxzZQogICAgZW5kCgogICAgbG9jYWwgcHVuY2hGb2xkZXIgPSBzYWZlV2FpdEZvckNoaWxkKHRvb2xzRm9sZGVyLCAiUHVuY2giLCA1KQogICAgaWYgbm90IHB1bmNoRm9sZGVyIHRoZW4KICAgICAgICBwdW5jaFN0YXR1c0xhYmVsLlRleHQgPSAiU3RhdHVzOiAgJydQdW5jaCcnIEZvbGRlciBOb3QgRm91bmQiCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICBlbmQKCiAgICBsb2NhbCBpZGxlQW5pbU9iaiA9IHNhZmVXYWl0Rm9yQ2hpbGQocHVuY2hGb2xkZXIsICJpZGxlIiwgNSkKICAgIGlmIGlkbGVBbmltT2JqIHRoZW4KICAgICAgICBJZGxlQW5pbWF0aW9uID0gSHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihpZGxlQW5pbU9iaikKICAgIGVsc2UKICAgICAgICBwdW5jaFN0YXR1c0xhYmVsLlRleHQgPSAiU3RhdHVzOiBpZGxlIEFuaW1hdGlvbiBOb3QgRm91bmQiCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICBlbmQKCiAgICBsb2NhbCBhdHRhY2tzRm9sZGVyID0gc2FmZVdhaXRGb3JDaGlsZChwdW5jaEZvbGRlciwgImF0dGFja3MiLCA1KQogICAgaWYgbm90IGF0dGFja3NGb2xkZXIgdGhlbgogICAgICAgIHB1bmNoU3RhdHVzTGFiZWwuVGV4dCA9ICJTdGF0dXM6IEZvbGRlciAnJ2F0dGFja3MnJyBOb3QgRm91bmQiCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICBlbmQKCiAgICBsb2NhbCBsZWZ0QXR0YWNrID0gc2FmZVdhaXRGb3JDaGlsZChhdHRhY2tzRm9sZGVyLCAibGVmdEF0dGFjayIsIDUpCiAgICBsb2NhbCByaWdodEF0dGFjayA9IHNhZmVXYWl0Rm9yQ2hpbGQoYXR0YWNrc0ZvbGRlciwgInJpZ2h0QXR0YWNrIiwgNSkKICAgIGlmIGxlZnRBdHRhY2sgYW5kIHJpZ2h0QXR0YWNrIHRoZW4KICAgICAgICBMZWZ0QXR0YWNrQW5pbSA9IEh1bWFub2lkOkxvYWRBbmltYXRpb24obGVmdEF0dGFjaykKICAgICAgICBSaWdodEF0dGFja0FuaW0gPSBIdW1hbm9pZDpMb2FkQW5pbWF0aW9uKHJpZ2h0QXR0YWNrKQogICAgZWxzZQogICAgICAgIHB1bmNoU3RhdHVzTGFiZWwuVGV4dCA9ICJTdGF0dXM6IEF0dGFjayBBbmltYXRpb24gTm90IEZvdW5kIgogICAgICAgIHJldHVybiBmYWxzZQogICAgZW5kCgogICAgTXVzY2xlRXZlbnQgPSBzYWZlV2FpdEZvckNoaWxkKHBsYXllciwgIm11c2NsZUV2ZW50IiwgNSkKICAgIGlmIG5vdCBNdXNjbGVFdmVudCB0aGVuCiAgICAgICAgcHVuY2hTdGF0dXNMYWJlbC5UZXh0ID0gIlN0YXR1czogbXVzY2xlRXZlbnQgTm90IEZvdW5kIgogICAgICAgIHJldHVybiBmYWxzZQogICAgZW5kCgogICAgaWYgSWRsZUFuaW1hdGlvbiB0aGVuCiAgICAgICAgSWRsZUFuaW1hdGlvbjpQbGF5KCkKICAgIGVuZAoKICAgIElzQ2hhcmFjdGVySW5pdGlhbGl6ZWQgPSB0cnVlCiAgICBwdW5jaFN0YXR1c0xhYmVsLlRleHQgPSAiU3RhdHVzOiBSZWFkeSBUbyBIaXQiCiAgICByZXR1cm4gdHJ1ZQplbmQKCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi0tIENIT0lYIERFIEwnQU5JTUFUSU9OIEQnQVRUQVFVRQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpsb2NhbCBmdW5jdGlvbiBjaG9vc2VBdHRhY2tBbmltKCkKICAgIGlmIExhc3RBbmltYXRpb24gPT0gTGVmdEF0dGFja0FuaW0gdGhlbgogICAgICAgIExhc3RBbmltYXRpb24gPSBSaWdodEF0dGFja0FuaW0KICAgIGVsc2UKICAgICAgICBMYXN0QW5pbWF0aW9uID0gTGVmdEF0dGFja0FuaW0KICAgIGVuZAogICAgcmV0dXJuIExhc3RBbmltYXRpb24KZW5kCgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQotLSBFWMOJQ1VUSU9OIEQnVU4gUFVOQ0gKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KbG9jYWwgZnVuY3Rpb24gcGVyZm9ybVB1bmNoKCkKICAgIGlmIG5vdCBJc0NoYXJhY3RlckluaXRpYWxpemVkIG9yIG5vdCBIdW1hbm9pZCBvciBIdW1hbm9pZC5IZWFsdGggPD0gMCB0aGVuCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICBlbmQKCiAgICBsb2NhbCBjb29sZG93biA9IDAuMQogICAgaWYgdGljaygpIC0gTGFzdEF0dGFja1RpbWUgPCBjb29sZG93biB0aGVuCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICBlbmQKICAgIExhc3RBdHRhY2tUaW1lID0gdGljaygpCgogICAgbG9jYWwgYXR0YWNrQW5pbSA9IGNob29zZUF0dGFja0FuaW0oKQogICAgaWYgYXR0YWNrQW5pbSB0aGVuCiAgICAgICAgYXR0YWNrQW5pbTpQbGF5KCkKICAgIGVuZAoKICAgIGxvY2FsIGhhbmRUb1VzZSA9ICJyaWdodEhhbmQiCiAgICBpZiBhdHRhY2tBbmltID09IExlZnRBdHRhY2tBbmltIHRoZW4KICAgICAgICBoYW5kVG9Vc2UgPSAibGVmdEhhbmQiCiAgICBlbmQKCiAgICBpZiBNdXNjbGVFdmVudCB0aGVuCiAgICAgICAgTXVzY2xlRXZlbnQ6RmlyZVNlcnZlcigicHVuY2giLCBoYW5kVG9Vc2UpCiAgICAgICAgcmV0dXJuIHRydWUKICAgIGVuZAogICAgcmV0dXJuIGZhbHNlCmVuZAoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLS0gRm9uY3Rpb24gcG91ciBmb3JjZXIgbGUgZMOpc8OpcXVpcGVtZW50IGRlcyBvdXRpbHMgbm9uICJQdW5jaCIKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KbG9jYWwgZnVuY3Rpb24gZm9yY2VVbmVxdWlwTm9uUHVuY2hUb29scygpCiAgICBsb2NhbCBjaGFyYWN0ZXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCiAgICBpZiBjaGFyYWN0ZXIgdGhlbgogICAgICAgIGZvciBfLCBjaGlsZCBpbiBwYWlycyhjaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgaWYgY2hpbGQ6SXNBKCJUb29sIikgYW5kIGNoaWxkLk5hbWUgfj0gIlB1bmNoIiB0aGVuCiAgICAgICAgICAgICAgICAtLSBEw6lwbGFjZSBsJ291dGlsIGRhbnMgbGUgQmFja3BhY2sKICAgICAgICAgICAgICAgIGNoaWxkLlBhcmVudCA9IHBsYXllcjpGaW5kRmlyc3RDaGlsZCgiQmFja3BhY2siKQogICAgICAgICAgICAgICAgcHJpbnQoIk91dGlsIG5vLVB1bmNoIERlc2VxdWlwcGVkIDogIiAuLiBjaGlsZC5OYW1lKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQKCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi0tIFRPR0dMRSBERSBMJ0FVVE8tUFVOQ0gKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KbG9jYWwgZnVuY3Rpb24gdG9nZ2xlQXV0b1B1bmNoKCkKICAgIGlmIE1MX0F1dG9QdW5jaEVuYWJsZWQgdGhlbgogICAgICAgIGF1dG9QdW5jaEJ1dHRvbi5UZXh0ID0gIkF1dG8gUHVuY2g6IE9OIgogICAgICAgIC0tIMOJcXVpcGUgYXV0b21hdGlxdWVtZW50IGwnb3V0aWwgZGUgcHVuY2ggZMOocyBsJ2FjdGl2YXRpb24KICAgICAgICBlcXVpcFB1bmNoVG9vbCgpCiAgICAgICAgaWYgbm90IE1MX0F1dG9QdW5jaENvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICBNTF9BdXRvUHVuY2hDb25uZWN0aW9uID0gUnVuU2VydmljZS5IZWFydGJlYXQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAtLSBGb3JjZXIgbGUgZMOpc8OpcXVpcGVtZW50IGRlIHRvdXQgb3V0aWwgcXVpIG4nZXN0IHBhcyAiUHVuY2giCiAgICAgICAgICAgICAgICBmb3JjZVVuZXF1aXBOb25QdW5jaFRvb2xzKCkKICAgICAgICAgICAgICAgIC0tIFNpIGwnb3V0aWwgIlB1bmNoIiBuJ2VzdCBwYXMgw6lxdWlww6ksIG9uIHRlbnRlIGRlIGwnw6lxdWlwZXIKICAgICAgICAgICAgICAgIGlmIHBsYXllci5DaGFyYWN0ZXIgYW5kIG5vdCBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJQdW5jaCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBlcXVpcFB1bmNoVG9vbCgpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGxvY2FsIG9rID0gcGNhbGwocGVyZm9ybVB1bmNoKQogICAgICAgICAgICAgICAgaWYgbm90IG9rIGFuZCBJc0NoYXJhY3RlckluaXRpYWxpemVkIHRoZW4KICAgICAgICAgICAgICAgICAgICBwdW5jaFN0YXR1c0xhYmVsLlRleHQgPSAiU3RhdHVzOiBJc3N1ZSBEdXJpbmcgVGhlIEluaXRpYWxpemF0aW9uIgogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgICAgICBwdW5jaFN0YXR1c0xhYmVsLlRleHQgPSAiU3RhdHVzOiBBdXRvIFB1bmNoIEVuYWJsZWQiCiAgICBlbHNlCiAgICAgICAgYXV0b1B1bmNoQnV0dG9uLlRleHQgPSAiQXV0byBQdW5jaDogT0ZGIgogICAgICAgIGlmIE1MX0F1dG9QdW5jaENvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICBNTF9BdXRvUHVuY2hDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICBNTF9BdXRvUHVuY2hDb25uZWN0aW9uID0gbmlsCiAgICAgICAgZW5kCiAgICAgICAgcHVuY2hTdGF0dXNMYWJlbC5UZXh0ID0gIlN0YXR1czogQXV0byBQdW5jaCBEaXNhYmxlZCIKICAgIGVuZAplbmQK","LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLS0gUsOJQUNUSVZBVElPTiBBVVRPTUFUSVFVRSBBVSBSRVNQQVdOCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCnBsYXllci5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKGNoYXJhY3RlcikKICAgIHRhc2sud2FpdCgxKSAgLS0gQXR0ZW5kcmUgcXVlIGxlIHBlcnNvbm5hZ2Ugc29pdCBiaWVuIGNoYXJnw6kKICAgIGxvY2FsIHBsYXllckd1aSA9IHBsYXllcjpXYWl0Rm9yQ2hpbGQoIlBsYXllckd1aSIpCiAgICBsb2NhbCBzY3JlZW5HdWkgPSBwbGF5ZXJHdWk6RmluZEZpcnN0Q2hpbGQoIlVuaXZlcnNhbE1lbnUiKQogICAgaWYgbm90IHNjcmVlbkd1aSB0aGVuCiAgICAgICAgc2NyZWVuR3VpID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQogICAgICAgIHNjcmVlbkd1aS5OYW1lID0gIlVuaXZlcnNhbE1lbnUiCiAgICAgICAgc2NyZWVuR3VpLlBhcmVudCA9IHBsYXllckd1aQogICAgICAgIG1haW5GcmFtZS5QYXJlbnQgPSBzY3JlZW5HdWkKICAgIGVuZAoKICAgIC0tIFLDqWluaXRpYWxpc2VyIGxlcyB2YXJpYWJsZXMgbGnDqWVzIGF1IHB1bmNoCiAgICBJc0NoYXJhY3RlckluaXRpYWxpemVkID0gZmFsc2UKICAgIENoYXJhY3RlciA9IG5pbAogICAgSHVtYW5vaWQgPSBuaWwKICAgIE11c2NsZUV2ZW50ID0gbmlsCiAgICBJZGxlQW5pbWF0aW9uID0gbmlsCiAgICBMZWZ0QXR0YWNrQW5pbSA9IG5pbAogICAgUmlnaHRBdHRhY2tBbmltID0gbmlsCiAgICBMYXN0QW5pbWF0aW9uID0gbmlsCgogICAgdXBkYXRlUGxheWVyU3RhdHMoKQogICAgbWFpbkZyYW1lLlZpc2libGUgPSBmYWxzZQoKICAgIC0tIFNpIGwnb3B0aW9uIGF1dG8tcHVuY2ggw6l0YWl0IGFjdGl2w6llIGF2YW50IGxhIG1vcnQsIGxhIHLDqWFjdGl2ZXIKICAgIGlmIE1MX0F1dG9QdW5jaEVuYWJsZWQgdGhlbgogICAgICAgIGxvY2FsIHN1Y2Nlc3MgPSBpbml0aWFsaXplQ2hhcmFjdGVyRm9yUHVuY2goY2hhcmFjdGVyKQogICAgICAgIGlmIHN1Y2Nlc3MgdGhlbgogICAgICAgICAgICB0b2dnbGVBdXRvUHVuY2goKSAgLS0gUsOpYWN0aXZlIGwnYXV0by1wdW5jaCAoZXQgZG9uYyDDqXF1aXBlIGwnb3V0aWwgdmlhIGVxdWlwUHVuY2hUb29sKCkpCiAgICAgICAgICAgIGF1dG9QdW5jaEJ1dHRvbi5UZXh0ID0gIkF1dG8gUHVuY2g6IE9OIgogICAgICAgICAgICBwdW5jaFN0YXR1c0xhYmVsLlRleHQgPSAiU3RhdHVzOiBPbiIKICAgICAgICBlbHNlCiAgICAgICAgICAgIHB1bmNoU3RhdHVzTGFiZWwuVGV4dCA9ICJTdGF0dXM6IEluaXRpYWxpemF0aW9uIEZhaWxlZCIKICAgICAgICBlbmQKICAgIGVuZAplbmQpCgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQotLSBCT1VUT04gQVVUTy1QVU5DSCAoZGFucyBsJ29uZ2xldCBNTCkKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KYXV0b1B1bmNoQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgTUxfQXV0b1B1bmNoRW5hYmxlZCA9IG5vdCBNTF9BdXRvUHVuY2hFbmFibGVkCiAgICBhdXRvUHVuY2hCdXR0b24uVGV4dCA9IE1MX0F1dG9QdW5jaEVuYWJsZWQgYW5kICJBdXRvIFB1bmNoOiBPTiIgb3IgIkF1dG8gUHVuY2g6IE9GRiIKICAgIAogICAgaWYgTUxfQXV0b1B1bmNoRW5hYmxlZCB0aGVuCiAgICAgICAgaWYgbm90IElzQ2hhcmFjdGVySW5pdGlhbGl6ZWQgdGhlbgogICAgICAgICAgICBsb2NhbCBzdWNjZXNzID0gaW5pdGlhbGl6ZUNoYXJhY3RlckZvclB1bmNoKHBsYXllci5DaGFyYWN0ZXIpCiAgICAgICAgICAgIGlmIG5vdCBzdWNjZXNzIHRoZW4KICAgICAgICAgICAgICAgIHB1bmNoU3RhdHVzTGFiZWwuVGV4dCA9ICJTdGF0dXM6IEluaXRpYWxpemF0aW9uIEZhaWxlZCIKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgdG9nZ2xlQXV0b1B1bmNoKCkKZW5kKQoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLS0gRm9uY3Rpb24gV2FsbGhhY2sgKG1pc2NlbGxhbmlvdXMpCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpsb2NhbCBmdW5jdGlvbiBzYXZlT3JpZ2luYWxDb2xsaXNpb25WYWx1ZXMoY2hhcmFjdGVyKQogICAgb3JpZ2luYWxDb2xsaXNpb25WYWx1ZXMgPSB7fQogICAgCiAgICBpZiBjaGFyYWN0ZXIgdGhlbgogICAgICAgIGZvciBfLCBwYXJ0IGluIHBhaXJzKGNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiBwYXJ0OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAtLSBTdG9ja2VyIGxhIHZhbGV1ciBDYW5Db2xsaWRlIG9yaWdpbmFsZSBwb3VyIGNoYXF1ZSBwYXJ0aWUKICAgICAgICAgICAgICAgIG9yaWdpbmFsQ29sbGlzaW9uVmFsdWVzW3BhcnRdID0gcGFydC5DYW5Db2xsaWRlCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZAoKLS0gRm9uY3Rpb24gcG91ciByZXN0YXVyZXIgbGVzIHZhbGV1cnMgZGUgY29sbGlzaW9uIG9yaWdpbmFsZXMKbG9jYWwgZnVuY3Rpb24gcmVzdG9yZU9yaWdpbmFsQ29sbGlzaW9uVmFsdWVzKGNoYXJhY3RlcikKICAgIGlmIGNoYXJhY3RlciB0aGVuCiAgICAgICAgZm9yIHBhcnQsIHZhbHVlIGluIHBhaXJzKG9yaWdpbmFsQ29sbGlzaW9uVmFsdWVzKSBkbwogICAgICAgICAgICBpZiBwYXJ0IGFuZCBwYXJ0OklzQSgiQmFzZVBhcnQiKSBhbmQgcGFydDpJc0Rlc2NlbmRhbnRPZihjaGFyYWN0ZXIpIHRoZW4KICAgICAgICAgICAgICAgIHBhcnQuQ2FuQ29sbGlkZSA9IHZhbHVlCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZAoKLS0gRm9uY3Rpb24gcG91ciBnw6lyZXIgbGUgbm8tY2xpcApsb2NhbCBmdW5jdGlvbiBzZXROb0NsaXAoZW5hYmxlZCkKICAgIG5vQ2xpcEVuYWJsZWQgPSBlbmFibGVkCiAgICAKICAgIGlmIGVuYWJsZWQgdGhlbgogICAgICAgIC0tIE1pc2Ugw6Agam91ciBkZSBsJ2ludGVyZmFjZQogICAgICAgIHdhbGxoYWNrQnV0dG9uLlRleHQgPSAiT04iCiAgICAgICAgCiAgICAgICAgLS0gU2F1dmVnYXJkZXIgbGVzIHZhbGV1cnMgb3JpZ2luYWxlcyBhdmFudCBkJ2FjdGl2ZXIgbGUgbm8tY2xpcAogICAgICAgIGlmIHBsYXllci5DaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICBzYXZlT3JpZ2luYWxDb2xsaXNpb25WYWx1ZXMocGxheWVyLkNoYXJhY3RlcikKICAgICAgICBlbmQKICAgICAgICAKICAgICAgICAtLSBDcsOpYXRpb24gZGUgbGEgY29ubmV4aW9uIHBvdXIgZMOpc2FjdGl2ZXIgbGVzIGNvbGxpc2lvbnMgZW4gY29udGludQogICAgICAgIGlmIG5vQ2xpcENvbm5lY3Rpb24gdGhlbiBub0NsaXBDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKSBlbmQKICAgICAgICAKICAgICAgICBub0NsaXBDb25uZWN0aW9uID0gcnVuU2VydmljZS5IZWFydGJlYXQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIHBsYXllci5DaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgZm9yIF8sIHBhcnQgaW4gcGFpcnMocGxheWVyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHBhcnQ6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbHNlCiAgICAgICAgLS0gTWlzZSDDoCBqb3VyIGRlIGwnaW50ZXJmYWNlCiAgICAgICAgd2FsbGhhY2tCdXR0b24uVGV4dCA9ICJPRkYiCiAgICAgICAgCiAgICAgICAgLS0gRMOpY29ubmV4aW9uIGR1IHNlcnZpY2UgZGUgbm8tY2xpcAogICAgICAgIGlmIG5vQ2xpcENvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICBub0NsaXBDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICBub0NsaXBDb25uZWN0aW9uID0gbmlsCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gUmVzdGF1cmVyIGxlcyB2YWxldXJzIGRlIGNvbGxpc2lvbiBvcmlnaW5hbGVzCiAgICAgICAgaWYgcGxheWVyLkNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgIHJlc3RvcmVPcmlnaW5hbENvbGxpc2lvblZhbHVlcyhwbGF5ZXIuQ2hhcmFjdGVyKQogICAgICAgIGVuZAogICAgZW5kCmVuZAoKLS0gQ29ubmVjdGVyIGxlIGJvdXRvbiBkdSBtZW51CndhbGxoYWNrQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgc2V0Tm9DbGlwKG5vdCBub0NsaXBFbmFibGVkKQplbmQpCgotLSBHw6lyZXIgbGVzIGNhcyBkZSByZXNwYXduCnBsYXllci5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKGNoYXJhY3RlcikKICAgIC0tIEF0dGVuZHJlIHF1ZSBsZSBjYXJhY3TDqHJlIHNvaXQgY29tcGzDqHRlbWVudCBjaGFyZ8OpCiAgICB0YXNrLndhaXQoMSkKICAgIAogICAgaWYgbm9DbGlwRW5hYmxlZCB0aGVuCiAgICAgICAgLS0gU2F1dmVnYXJkZXIgbGVzIG5vdXZlbGxlcyB2YWxldXJzIG9yaWdpbmFsZXMKICAgICAgICBzYXZlT3JpZ2luYWxDb2xsaXNpb25WYWx1ZXMoY2hhcmFjdGVyKQogICAgICAgIAogICAgICAgIC0tIFLDqWFjdGl2ZXIgbGUgbm8tY2xpcAogICAgICAgIGlmIG5vQ2xpcENvbm5lY3Rpb24gdGhlbiBub0NsaXBDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKSBlbmQKICAgICAgICAKICAgICAgICBub0NsaXBDb25uZWN0aW9uID0gcnVuU2VydmljZS5IZWFydGJlYXQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIHBsYXllci5DaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgZm9yIF8sIHBhcnQgaW4gcGFpcnMocGxheWVyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHBhcnQ6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKZW5kKQoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLS0gRm9uY3Rpb24gSGlkZSBtZW51Ci0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpsb2NhbCBmdW5jdGlvbiB0b2dnbGVDb2xsYXBzZSgpCiAgICBwcmludCgiQnV0dG9uIFdhcyBDbGlja2VkIikKICAgIG1lbnVDb2xsYXBzZWQgPSBub3QgbWVudUNvbGxhcHNlZAogICAgCiAgICBpZiBtZW51Q29sbGFwc2VkIHRoZW4KICAgICAgICBjb2xsYXBzZUJ1dHRvbi5UZXh0ID0gIisiCiAgICAgICAgCgkJIG1haW5GcmFtZS5TaXplID0gVURpbTIubmV3KDAsIDU1MCwgMCwgNDApCgogICAgICAgIC0tIE1hc3F1ZXIgdG91dGVzIGxlcyBhdXRyZXMgZnJhbWVzCiAgICAgICAgZm9yIF8sIGZyYW1lIGluIHBhaXJzKGZyYW1lc1RvVG9nZ2xlKSBkbwogICAgICAgICAgICBmcmFtZS5WaXNpYmxlID0gZmFsc2UKICAgICAgICBlbmQKICAgIGVsc2UKICAgICAgICBjb2xsYXBzZUJ1dHRvbi5UZXh0ID0gIi0iCiAgICAgICAgCgkJIG1haW5GcmFtZS5TaXplID0gVURpbTIubmV3KDAsIDU1MCwgMCwgNjIwKQoKICAgICAgICAtLSBSZW5kcmUgdmlzaWJsZXMgdG91dGVzIGxlcyBhdXRyZXMgZnJhbWVzCiAgICAgICAgZm9yIF8sIGZyYW1lIGluIHBhaXJzKGZyYW1lc1RvVG9nZ2xlKSBkbwogICAgICAgICAgICBmcmFtZS5WaXNpYmxlID0gdHJ1ZQogICAgICAgIGVuZAogICAgZW5kCmVuZApjb2xsYXBzZUJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KHRvZ2dsZUNvbGxhcHNlKQoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLS0gRm9uY3Rpb24gVGVsZXBvcnRhdGlvbiBpc2xhbmQKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmxvY2FsIGZ1bmN0aW9uIGNyZWF0ZURlc3RpbmF0aW9uT3B0aW9uKG9wdGlvbk5hbWUsIHRlbGVwb3J0UG9zKQogICAgbG9jYWwgb3B0aW9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgIG9wdGlvbi5OYW1lID0gb3B0aW9uTmFtZQogICAgb3B0aW9uLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMzApCiAgICBvcHRpb24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcwLCA3MCwgNzApCiAgICBvcHRpb24uVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICAgIG9wdGlvbi5UZXh0U2NhbGVkID0gdHJ1ZQogICAgb3B0aW9uLlRleHQgPSBvcHRpb25OYW1lCiAgICBvcHRpb24uUGFyZW50ID0gdGVsZXBvcnRTY3JvbGxGcmFtZQoKICAgIG9wdGlvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBwbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIKICAgICAgICBpZiBwbGF5ZXIuQ2hhcmFjdGVyIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0IHRoZW4KICAgICAgICAgICAgcGxheWVyLkNoYXJhY3RlcjpTZXRQcmltYXJ5UGFydENGcmFtZSh0ZWxlcG9ydFBvcykKICAgICAgICBlbmQKICAgICAgICB0ZWxlcG9ydFNjcm9sbEZyYW1lLlZpc2libGUgPSBmYWxzZSAgLS0gTWFzcXVlciBsZSBtZW51IGFwcsOocyBsYSBzw6lsZWN0aW9uCiAgICBlbmQpCmVuZAoKLS0gQ3LDqWF0aW9uIGRlIHBsdXNpZXVycyBvcHRpb25zIHBvdXIgZm9yY2VyIGwnYXBwYXJpdGlvbiBkZSBsYSBiYXJyZSBkZSBkw6lmaWxlbWVudApjcmVhdGVEZXN0aW5hdGlvbk9wdGlvbigiVGlueSBJc2xhbmQoRWplY3QgRnJvbSAxaykiLCBDRnJhbWUubmV3KC0zOC4zNjgyNDQxNzExNDI1OCwgMTQuMDYxMTY3NzE2OTc5OTgsIDE4ODMuOTYzMTM0NzY1NjI1KSkKY3JlYXRlRGVzdGluYXRpb25PcHRpb24oIkZyb3N0IEd5bSIsIENGcmFtZS5uZXcoLTI2MjMuMDIyMjE2Nzk2ODc1LCAyOC42OTk5OTMxMzM1NDQ5MjIsIC00MDkuMDczMzMzNzQwMjM0NCkpCmNyZWF0ZURlc3RpbmF0aW9uT3B0aW9uKCJNeXRoaWNhbCBHeW0iLCBDRnJhbWUubmV3KDIyNTAuNzc4MDc2MTcxODc1LCAyOC42OTk5OTMxMzM1NDQ5MjIsIDEwNzMuMjI2Njg0NTcwMzEyNSkpCmNyZWF0ZURlc3RpbmF0aW9uT3B0aW9uKCJFdGVybmFsIEd5bSIsIENGcmFtZS5uZXcoLTY3NTguOTYzODY3MTg3NSwgMjguNjk5OTk2OTQ4MjQyMTg4LCAtMTI4NC45MTg3MDExNzE4NzUpKQpjcmVhdGVEZXN0aW5hdGlvbk9wdGlvbigiTGVnZW5kcyBHeW0iLCBDRnJhbWUubmV3KDQ2MDMuMjgxNzM4MjgxMjUsIDEwMDkuMDYxMjE4MjYxNzE4OCwgLTM4OTcuODY1NzIyNjU2MjUpKQpjcmVhdGVEZXN0aW5hdGlvbk9wdGlvbigiTXVzY2xlIEtpbmcgR3ltIiwgQ0ZyYW1lLm5ldygtODYyNS45Mjk2ODc1LCAxMTUuMzI1ODA1NjY0MDYyNSwgLTU3MzAuNDczMTQ0NTMxMjUpKQpjcmVhdGVEZXN0aW5hdGlvbk9wdGlvbigiSnVuZ2xlIEd5bSAiLCBDRnJhbWUubmV3KC04Njg1LjYyMTA5Mzc1LCAxNTMsIDIzOTIuMzI2NjYwMTU2MjUpKQoKLS0gQmFzY3VsZSBkZSBsYSB2aXNpYmlsaXTDqSBkdSBtZW51IGTDqXJvdWxhbnQgZW4gY2xpcXVhbnQgc3VyIGxlIGJvdXRvbiBwcmluY2lwYWwKdGVsZXBvcnRPcHRpb24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICB0ZWxlcG9ydFNjcm9sbEZyYW1lLlZpc2libGUgPSBub3QgdGVsZXBvcnRTY3JvbGxGcmFtZS5WaXNpYmxlCmVuZCkKCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi0tIEZvbmN0aW9uIFJvY2tzIFRlbGVwb3J0YXRpb24KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KbG9jYWwgZnVuY3Rpb24gY3JlYXRlUm9ja1RQRGVzdGluYXRpb25PcHRpb24ob3B0aW9uTmFtZSwgdGVsZXBvcnRQb3MpCiAgICBsb2NhbCBvcHRpb24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgb3B0aW9uLk5hbWUgPSBvcHRpb25OYW1lCiAgICBvcHRpb24uU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgIG9wdGlvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNzAsIDcwLCA3MCkKICAgIG9wdGlvbi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogICAgb3B0aW9uLlRleHRTY2FsZWQgPSB0cnVlCiAgICBvcHRpb24uVGV4dCA9IG9wdGlvbk5hbWUKICAgIG9wdGlvbi5QYXJlbnQgPSByb2NrVFBTY3JvbGxGcmFtZQoKICAgIG9wdGlvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBwbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIKICAgICAgICBpZiBwbGF5ZXIuQ2hhcmFjdGVyIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyLlByaW1hcnlQYXJ0IHRoZW4KICAgICAgICAgICAgcGxheWVyLkNoYXJhY3RlcjpTZXRQcmltYXJ5UGFydENGcmFtZSh0ZWxlcG9ydFBvcykKICAgICAgICBlbmQKICAgICAgICByb2NrVFBTY3JvbGxGcmFtZS5WaXNpYmxlID0gZmFsc2UgIC0tIE1hc3F1ZXIgbGUgbWVudSBhcHLDqHMgbGEgc8OpbGVjdGlvbgogICAgZW5kKQplbmQKCi0tIENyw6lhdGlvbiBkJ3VuZSBvcHRpb24gZGUgZGVzdGluYXRpb24gcG91ciAiUm9jayB0cCItMTUxLjEzNzM5MDEzNjcxODc1LCA5LjYzNzY4ODYzNjc3OTc4NSwgNDA3LjI0MTA1ODM0OTYwOTQKY3JlYXRlUm9ja1RQRGVzdGluYXRpb25PcHRpb24oIlRpbnkgUm9jayIsIENGcmFtZS5uZXcoOC4zNDY3NTU5ODE0NDUzMTIsIDYuNTc4OTk2NjU4MzI1MTk1LCAyMDk5LjIxMjY0NjQ4NDM3NSkgKiBDRnJhbWUuQW5nbGVzKDAsIG1hdGgucmFkKDIzMyksIDApKQpjcmVhdGVSb2NrVFBEZXN0aW5hdGlvbk9wdGlvbigiUHVuY2hpbmcgUm9jayIsIENGcmFtZS5uZXcoLTE1MS4xMzczOTAxMzY3MTg3NSwgOS42Mzc2ODg2MzY3Nzk3ODUsIDQwNy4yNDEwNTgzNDk2MDk0KSAqIENGcmFtZS5BbmdsZXMoMCwgbWF0aC5yYWQoMTgwKSwgMCkpCmNyZWF0ZVJvY2tUUERlc3RpbmF0aW9uT3B0aW9uKCJMYXJnZSBSb2NrIiwgQ0ZyYW1lLm5ldygxNjcuNTU4NjA5MDA4Nzg5MDYsIDEwLjY3NTU3NDMwMjY3MzM0LCAtMTM3LjM4NzEwMDIxOTcyNjU2KSAqIENGcmFtZS5BbmdsZXMoMCwgbWF0aC5yYWQoMCksIDApKQpjcmVhdGVSb2NrVFBEZXN0aW5hdGlvbk9wdGlvbigiR29sZGVuIFJvY2siLCBDRnJhbWUubmV3KDI4NC4zNjU3NTMxNzM4MjgxLCA5LjIyNjY3MzEyNjIyMDcwMywgLTU3Ni4wMzA5NDQ4MjQyMTg4KSAqIENGcmFtZS5BbmdsZXMoMCwgbWF0aC5yYWQoLTY1KSwgMCkpCmNyZWF0ZVJvY2tUUERlc3RpbmF0aW9uT3B0aW9uKCJGcm96ZW4gUm9jayIsIENGcmFtZS5uZXcoLTI1ODQuMjE2MDY0NDUzMTI1LCA2LjE3NDQwMzE5MDYxMjc5MywgLTIyMi40MTk1NTU2NjQwNjI1KSAqIENGcmFtZS5BbmdsZXMoMCwgbWF0aC5yYWQoLTYwLjY5MyksIDApKQpjcmVhdGVSb2NrVFBEZXN0aW5hdGlvbk9wdGlvbigiTXlzdGljIFJvY2siLCBDRnJhbWUubmV3KDIyMDIuOTc3NTM5MDYyNSwgNS42ODE0ODEzNjEzODkxNiwgMTIxMC44OTQwNDI5Njg3NSkgKiBDRnJhbWUuQW5nbGVzKDAsIG1hdGgucmFkKDE2MCksIDApKQpjcmVhdGVSb2NrVFBEZXN0aW5hdGlvbk9wdGlvbigiSW5mZXJubyBSb2NrIiwgQ0ZyYW1lLm5ldygtNzIyNy45MTg0NTcwMzEyNSwgNi4xNDk4MDY0OTk0ODEyMDEsIC0xMjgyLjE4NTU0Njg3NSkgKiBDRnJhbWUuQW5nbGVzKDAsIG1hdGgucmFkKDExMiksIDApKQpjcmVhdGVSb2NrVFBEZXN0aW5hdGlvbk9wdGlvbigiUm9jayBPZiBMZWdlbmRzIiwgQ0ZyYW1lLm5ldyg0MTg5LjQyMDg5ODQzNzUsIDk5MC4zNjk4MTIwMTE3MTg4LCAtNDA2NC44NjUyMzQzNzUpICogQ0ZyYW1lLkFuZ2xlcygwLCBtYXRoLnJhZCg2MCksIDApKQpjcmVhdGVSb2NrVFBEZXN0aW5hdGlvbk9wdGlvbigiTW9udGFpbiBLaW5nIFJvY2siLCBDRnJhbWUubmV3KC04OTc4LjE1OTE3OTY4NzUsIDcuODA0OTA0NDYwOTA2OTgyLCAtNjEzMy45MzQwODIwMzEyNSkgKiBDRnJhbWUuQW5nbGVzKDAsIG1hdGgucmFkKDE4MCksIDApKQpjcmVhdGVSb2NrVFBEZXN0aW5hdGlvbk9wdGlvbigiQW5jaWVudCBKdW5nbGUgUm9jayIsIENGcmFtZS5uZXcoLTc3MTAuOTQwNDI5Njg3NSwgMTEuODEyNzYwMzUzMDg4Mzc5LCAyODgzLjU0MjcyNDYwOTM3NSkgKiBDRnJhbWUuQW5nbGVzKDAsIG1hdGgucmFkKDI2MCksIDApKQoKLS0gQmFzY3VsZSBkZSBsYSB2aXNpYmlsaXTDqSBkdSBtZW51IGTDqXJvdWxhbnQgZW4gY2xpcXVhbnQgc3VyIGxlIGJvdXRvbiAiUm9jayB0cCIKcm9ja1RQT3B0aW9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgcm9ja1RQU2Nyb2xsRnJhbWUuVmlzaWJsZSA9IG5vdCByb2NrVFBTY3JvbGxGcmFtZS5WaXNpYmxlCmVuZCkKCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi0tIEZvbmN0aW9uIEdob3N0V2FsbChTZWUgdGhyb3VnaCB0aGUgd2FsbCkKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmdob3N0V2FsbE9wdGlvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGdob3N0V2FsbEVuYWJsZWQgPSBub3QgZ2hvc3RXYWxsRW5hYmxlZAoKICAgIGlmIGdob3N0V2FsbEVuYWJsZWQgdGhlbgogICAgICAgIGdob3N0V2FsbE9wdGlvbi5UZXh0ID0gIk9OIgogICAgICAgIGdob3N0V2FsbE9wdGlvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMTgwLCAwKQogICAgICAgIC0tIEFjdGl2YXRpb24gZHUgR2hvc3RXYWxsIDogbW9kaWZpY2F0aW9uIGRlIGxhIHRyYW5zcGFyZW5jZSBkZXMgcGFydGllcyBkdSBXb3Jrc3BhY2UKICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2OklzQSgiQmFzZVBhcnQiKSBhbmQgdi5UcmFuc3BhcmVuY3kgPCAxIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2OklzRGVzY2VuZGFudE9mKHBsYXllci5DaGFyYWN0ZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAtLSBTYXV2ZWdhcmRlIGRlIGxhIHRyYW5zcGFyZW5jZSBvcmlnaW5hbGUgc2kgZWxsZSBuJ2VzdCBwYXMgZMOpasOgIHN0b2Nrw6llCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY6RmluZEZpcnN0Q2hpbGQoIk9yaWdpbmFsVHJhbnNwYXJlbmN5IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBvcmlnaW5hbFZhbHVlID0gSW5zdGFuY2UubmV3KCJOdW1iZXJWYWx1ZSIpCiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsVmFsdWUuTmFtZSA9ICJPcmlnaW5hbFRyYW5zcGFyZW5jeSIKICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxWYWx1ZS5WYWx1ZSA9IHYuVHJhbnNwYXJlbmN5CiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsVmFsdWUuUGFyZW50ID0gdgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHYuVHJhbnNwYXJlbmN5ID0gMC42CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbHNlCiAgICAgICAgZ2hvc3RXYWxsT3B0aW9uLlRleHQgPSAiT0ZGIgogICAgICAgIGdob3N0V2FsbE9wdGlvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNjAsIDYwLCA2MCkKICAgICAgICAtLSBEw6lzYWN0aXZhdGlvbiBkdSBHaG9zdFdhbGwgOiByw6l0YWJsaXIgbGEgdHJhbnNwYXJlbmNlIG9yaWdpbmFsZSBkZXMgQmFzZVBhcnRzCiAgICAgICAgZm9yIF8sIHYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjpJc0EoIkJhc2VQYXJ0IikgYW5kIHY6RmluZEZpcnN0Q2hpbGQoIk9yaWdpbmFsVHJhbnNwYXJlbmN5IikgdGhlbgogICAgICAgICAgICAgICAgdi5UcmFuc3BhcmVuY3kgPSB2Lk9yaWdpbmFsVHJhbnNwYXJlbmN5LlZhbHVlCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCkKCmxvY2FsIGZ1bmN0aW9uIHVwZGF0ZUJ1dHRvbkFwcGVhcmFuY2UoKQogICAgaWYgdGVsZXBvcnRFbmFibGVkIHRoZW4KICAgICAgICBsb2NrZWRPcHRpb24uVGV4dCA9ICJPTiIKICAgIGVsc2UKICAgICAgICBsb2NrZWRPcHRpb24uVGV4dCA9ICJPRkYiCiAgICBlbmQKZW5kCgotLSBGb25jdGlvbiBwb3VyIHNhdXZlZ2FyZGVyIGxhIHBvc2l0aW9uIGFjdHVlbGxlCmxvY2FsIGZ1bmN0aW9uIHNhdmVDdXJyZW50UG9zaXRpb24oKQogICAgbG9jYWwgY2hhcmFjdGVyID0gcGxheWVyLkNoYXJhY3RlcgogICAgaWYgbm90IGNoYXJhY3RlciB0aGVuIHJldHVybiBlbmQKICAgIAogICAgbG9jYWwgaHJwID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgIGlmIG5vdCBocnAgdGhlbiByZXR1cm4gZW5kCiAgICAKICAgIHNhdmVkUG9zaXRpb24gPSBocnAuQ0ZyYW1lCmVuZAoKLS0gRm9uY3Rpb24gcG91ciBjb25maWd1cmVyIGxhIHTDqWzDqXBvcnRhdGlvbiBjb250aW51ZQpsb2NhbCBmdW5jdGlvbiBzZXR1cFRlbGVwb3J0TG9vcCgpCiAgICBpZiB0ZWxlcG9ydENvbm5lY3Rpb24gdGhlbiB0ZWxlcG9ydENvbm5lY3Rpb246RGlzY29ubmVjdCgpIGVuZAogICAgCiAgICBpZiBub3QgdGVsZXBvcnRFbmFibGVkIG9yIG5vdCBzYXZlZFBvc2l0aW9uIHRoZW4gcmV0dXJuIGVuZAogICAgCiAgICB0ZWxlcG9ydENvbm5lY3Rpb24gPSBSdW5TZXJ2aWNlLkhlYXJ0YmVhdDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgaWYgbm90IGNoYXJhY3RlciBvciBpc1Jlc3Bhd25pbmcgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgCiAgICAgICAgbG9jYWwgaHJwID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICBpZiBub3QgaHJwIHRoZW4gcmV0dXJuIGVuZAogICAgICAgIAogICAgICAgIGxvY2FsIGh1bWFub2lkID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpCiAgICAgICAgaWYgbm90IGh1bWFub2lkIG9yIGh1bWFub2lkLkhlYWx0aCA8PSAwIHRoZW4gcmV0dXJuIGVuZAogICAgICAgIAogICAgICAgIC0tIFTDqWzDqXBvcnRlciDDoCBsYSBwb3NpdGlvbiBzYXV2ZWdhcmTDqWUgc2FucyBhbmNyZXIgbGUgcGVyc29ubmFnZQogICAgICAgIGhycC5DRnJhbWUgPSBzYXZlZFBvc2l0aW9uCiAgICBlbmQpCmVuZAoKLS0gR2VzdGlvbiBkdSBjbGljIHN1ciBsZSBib3V0b24KbG9ja2VkT3B0aW9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgdGVsZXBvcnRFbmFibGVkID0gbm90IHRlbGVwb3J0RW5hYmxlZAogICAgdXBkYXRlQnV0dG9uQXBwZWFyYW5jZSgpCiAgICAKICAgIGlmIHRlbGVwb3J0RW5hYmxlZCB0aGVuCiAgICAgICAgc2F2ZUN1cnJlbnRQb3NpdGlvbigpCiAgICAgICAgc2V0dXBUZWxlcG9ydExvb3AoKQogICAgZWxzZQogICAgICAgIGlmIHRlbGVwb3J0Q29ubmVjdGlvbiB0aGVuCiAgICAgICAgICAgIHRlbGVwb3J0Q29ubmVjdGlvbjpEaXNjb25uZWN0KCkKICAgICAgICAgICAgdGVsZXBvcnRDb25uZWN0aW9uID0gbmlsCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKQoKLS0gR2VzdGlvbiBkZSBsYSBtb3J0IGR1IHBlcnNvbm5hZ2UgYWN0dWVsCmxvY2FsIGZ1bmN0aW9uIHNldHVwQ2hhcmFjdGVyRGllZChjaGFyYWN0ZXIpCiAgICBsb2NhbCBodW1hbm9pZCA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKQogICAgaWYgbm90IGh1bWFub2lkIHRoZW4gcmV0dXJuIGVuZAogICAgCiAgICBodW1hbm9pZC5EaWVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlzUmVzcGF3bmluZyA9IHRydWUKICAgICAgICAKICAgICAgICBpZiB0ZWxlcG9ydENvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICB0ZWxlcG9ydENvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgICAgIHRlbGVwb3J0Q29ubmVjdGlvbiA9IG5pbAogICAgICAgIGVuZAogICAgZW5kKQplbmQKCi0tIENvbmZpZ3VyYXRpb24gZHUgcGVyc29ubmFnZSBhY3R1ZWwgcydpbCBleGlzdGUKaWYgcGxheWVyLkNoYXJhY3RlciB0aGVuCiAgICBzZXR1cENoYXJhY3RlckRpZWQocGxheWVyLkNoYXJhY3RlcikKZW5kCgotLSBHZXN0aW9uIGRlIGwnYXBwYXJpdGlvbiBkJ3VuIG5vdXZlYXUgcGVyc29ubmFnZQpwbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbihjaGFyYWN0ZXIpCiAgICAtLSBBdHRlbmRyZSBxdWUgbGUgcGVyc29ubmFnZSBzb2l0IGNvbXBsw6h0ZW1lbnQgY2hhcmfDqQogICAgY2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKQogICAgY2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAKICAgIC0tIENvbmZpZ3VyZXIgbGEgZ2VzdGlvbiBkZSBsYSBtb3J0CiAgICBzZXR1cENoYXJhY3RlckRpZWQoY2hhcmFjdGVyKQogICAgCiAgICAtLSBSw6lhY3RpdmVyIGxhIHTDqWzDqXBvcnRhdGlvbiBjb250aW51ZSBzaSBuw6ljZXNzYWlyZQogICAgdGFzay53YWl0KDAuNSkgLS0gQXR0ZW5kcmUgcXVlIGxlIHBlcnNvbm5hZ2Ugc29pdCBzdGFibGUKICAgIGlzUmVzcGF3bmluZyA9IGZhbHNlCiAgICAKICAgIGlmIHRlbGVwb3J0RW5hYmxlZCBhbmQgc2F2ZWRQb3NpdGlvbiB0aGVuCiAgICAgICAgc2V0dXBUZWxlcG9ydExvb3AoKQogICAgZW5kCmVuZCkKCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLS0gRnVuY3Rpb24gU3BlY3RhdG9yCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KbG9jYWwgY29ubmVjdGlvbnMgPSB7fQoKLS0gRm9uY3Rpb24gcG91ciBkw6ljb25uZWN0ZXIgcHJvcHJlbWVudCB1bmUgY29ubmV4aW9uCmxvY2FsIGZ1bmN0aW9uIGRpc2Nvbm5lY3RJZkV4aXN0cyhrZXkpCiAgICBpZiBjb25uZWN0aW9uc1trZXldIHRoZW4KICAgICAgICBjb25uZWN0aW9uc1trZXldOkRpc2Nvbm5lY3QoKQogICAgICAgIGNvbm5lY3Rpb25zW2tleV0gPSBuaWwKICAgIGVuZAplbmQKCi0tIEZvbmN0aW9uIHBvdXIgdsOpcmlmaWVyIHNpIHVuIGpvdWV1ciBlc3QgdG91am91cnMgdmFsaWRlCmxvY2FsIGZ1bmN0aW9uIGlzUGxheWVyVmFsaWQocGxyKQogICAgcmV0dXJuIHBsciBhbmQgcGxyOklzQSgiUGxheWVyIikgYW5kIHBsci5QYXJlbnQgfj0gbmlsCmVuZAoKLS0gRm9uY3Rpb24gcG91ciBvYnNlcnZlciB1biBqb3VldXIsIG3Dqm1lIHNpIHNvbiBjaGFyYWN0ZXIgZXN0IG1vcnQKbG9jYWwgZnVuY3Rpb24gc3BlY3RhdGVQbGF5ZXIocGxyKQogICAgaWYgbm90IGlzUGxheWVyVmFsaWQocGxyKSB0aGVuIHJldHVybiBlbmQKICAgIAogICAgbG9jYWwgY2hhcmFjdGVyID0gcGxyLkNoYXJhY3RlcgogICAgaWYgY2hhcmFjdGVyIHRoZW4KICAgICAgICBsb2NhbCBodW1hbm9pZCA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKQogICAgICAgIGlmIGh1bWFub2lkIHRoZW4KICAgICAgICAgICAgY2FtZXJhLkNhbWVyYVN1YmplY3QgPSBodW1hbm9pZAogICAgICAgICAgICBsYXN0T2JzZXJ2ZWRDaGFyYWN0ZXIgPSBjaGFyYWN0ZXIKICAgICAgICAgICAgcHJpbnQoIllvdXIgQ2FtZXJhIElzIEN1cnJlbnRseSBPbiAiIC4uIHBsci5OYW1lKQogICAgICAgICAgICAKICAgICAgICAgICAgLS0gUydhc3N1cmVyIHF1ZSBsYSBjYW3DqXJhIHJlc3RlIHN1ciBjZSBDaGFyYWN0ZXIgbcOqbWUgcydpbCBtZXVydAogICAgICAgICAgICBkaXNjb25uZWN0SWZFeGlzdHMoIm9ic2VydmVkRGllZCIpCiAgICAgICAgICAgIGNvbm5lY3Rpb25zWyJvYnNlcnZlZERpZWQiXSA9IGh1bWFub2lkLkRpZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBwcmludChwbHIuTmFtZSAuLiAiIElzIERpZWQsIEJ1dCBZb3UgQ291bGQgQ29udGludWUgVG8gV2F0Y2ggaGltLCBEb250IFdvcnJ5IikKICAgICAgICAgICAgICAgIC0tIEdhcmRlciBsYSBjYW3DqXJhIHN1ciBsZSBtw6ptZSBDaGFyYWN0ZXIKICAgICAgICAgICAgICAgIGNhbWVyYS5DYW1lcmFTdWJqZWN0ID0gaHVtYW5vaWQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVsc2UKICAgICAgICAgICAgcHJpbnQoIkh1bWFub2lkIE5vdCBGb3VuZCBGcm9tIiAuLiBwbHIuTmFtZSkKICAgICAgICBlbmQKICAgIGVsc2UKICAgICAgICBwcmludCgiQ2hhcmFjdGVyIE5vdCBGb3VuZCBGcm9tICIgLi4gcGxyLk5hbWUpCiAgICAgICAgCiAgICAgICAgLS0gU2kgbGUgQ2hhcmFjdGVyIG4nZXhpc3RlIHBhcyBlbmNvcmUsIG9uIGF0dGVuZCBxdSdpbCBhcHBhcmFpc3NlCiAgICAgICAgZGlzY29ubmVjdElmRXhpc3RzKCJ3YWl0Rm9yQ2hhcmFjdGVyIikKICAgICAgICBjb25uZWN0aW9uc1sid2FpdEZvckNoYXJhY3RlciJdID0gcGxyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24obmV3Q2hhcmFjdGVyKQogICAgICAgICAgICBpZiBzcGVjdGF0ZUVuYWJsZWQgYW5kIGN1cnJlbnRPYnNlcnZlZFBsYXllciA9PSBwbHIgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgaHVtYW5vaWQgPSBuZXdDaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZCIpCiAgICAgICAgICAgICAgICBjYW1lcmEuQ2FtZXJhU3ViamVjdCA9IGh1bWFub2lkCiAgICAgICAgICAgICAgICBsYXN0T2JzZXJ2ZWRDaGFyYWN0ZXIgPSBuZXdDaGFyYWN0ZXIKICAgICAgICAgICAgICAgIHByaW50KCJOZXcgQ2hhcmFjdGVyIEZyb20gIiAuLiBwbHIuTmFtZSAuLiAiIGRldGVjdGVkLCBZb3UgQ2FuIFN0aWxsIFdhdGNoaW5nIEhpbSwgUmlnaHQgTm93IikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZGlzY29ubmVjdElmRXhpc3RzKCJvYnNlcnZlZERpZWQiKQogICAgICAgICAgICAgICAgY29ubmVjdGlvbnNbIm9ic2VydmVkRGllZCJdID0gaHVtYW5vaWQuRGllZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBwcmludChwbHIuTmFtZSAuLiAiIElzIERpZWQsIEJ1dCBZb3UgQ291bGQgQ29udGludWUgVG8gV2F0Y2ggaGltLCBEb250IFdvcnJ5IikKICAgICAgICAgICAgICAgICAgICBjYW1lcmEuQ2FtZXJhU3ViamVjdCA9IGh1bWFub2lkCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgIGVuZAplbmQKCi0tIEZvbmN0aW9uIHBvdXIgZMOpZmluaXIgbGUgam91ZXVyIMOgIG9ic2VydmVyCmxvY2FsIGZ1bmN0aW9uIHNldE9ic2VydmVkUGxheWVyKHBscikKICAgIGlmIG5vdCBpc1BsYXllclZhbGlkKHBscikgb3IgcGxyID09IHBsYXllciB0aGVuIHJldHVybiBlbmQKICAgIAogICAgY3VycmVudE9ic2VydmVkUGxheWVyID0gcGxyCiAgICAKICAgIC0tIE5ldHRveWFnZSBkZXMgYW5jaWVubmVzIGNvbm5leGlvbnMKICAgIGRpc2Nvbm5lY3RJZkV4aXN0cygib2JzZXJ2ZWREaWVkIikKICAgIGRpc2Nvbm5lY3RJZkV4aXN0cygid2FpdEZvckNoYXJhY3RlciIpCiAgICBkaXNjb25uZWN0SWZFeGlzdHMoImNoYXJhY3RlckFkZGVkIikKICAgIAogICAgLS0gU2kgbGUgbW9kZSBzcGVjdGF0ZXVyIGVzdCBhY3RpdsOpLCBjb21tZW5jZXIgw6Agb2JzZXJ2ZXIKICAgIGlmIHNwZWN0YXRlRW5hYmxlZCB0aGVuCiAgICAgICAgc3BlY3RhdGVQbGF5ZXIocGxyKQogICAgICAgIAogICAgICAgIC0tIFN1aXZyZSBsZXMgbm91dmVhdXggQ2hhcmFjdGVycyBkZSBjZSBqb3VldXIKICAgICAgICBjb25uZWN0aW9uc1siY2hhcmFjdGVyQWRkZWQiXSA9IHBsci5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKGNoYXJhY3RlcikKICAgICAgICAgICAgaWYgc3BlY3RhdGVFbmFibGVkIGFuZCBjdXJyZW50T2JzZXJ2ZWRQbGF5ZXIgPT0gcGxyIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIGh1bWFub2lkID0gY2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKQogICAgICAgICAgICAgICAgY2FtZXJhLkNhbWVyYVN1YmplY3QgPSBodW1hbm9pZAogICAgICAgICAgICAgICAgbGFzdE9ic2VydmVkQ2hhcmFjdGVyID0gY2hhcmFjdGVyCiAgICAgICAgICAgICAgICBwcmludCgiTmV3IENoYXJhY3RlciBGcm9tICIgLi4gcGxyLk5hbWUgLi4gIiBEZXRlY3RlZCwgWW91IENhbiBTdGlsbCBXYXRjaGluZyBIaW0iKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBkaXNjb25uZWN0SWZFeGlzdHMoIm9ic2VydmVkRGllZCIpCiAgICAgICAgICAgICAgICBjb25uZWN0aW9uc1sib2JzZXJ2ZWREaWVkIl0gPSBodW1hbm9pZC5EaWVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHByaW50KHBsci5OYW1lIC4uICIgSXMgRGllZCwgQnV0IFlvdSBDb3VsZCBDb250aW51ZSBUbyBXYXRjaCBoaW0sIERvbnQgV29ycnkiKQogICAgICAgICAgICAgICAgICAgIGNhbWVyYS5DYW1lcmFTdWJqZWN0ID0gaHVtYW5vaWQKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCmVuZAoKLS0gRm9uY3Rpb24gbWlzZSDDoCBqb3VyIHBvdXIgbGEgbGlzdGUgZGVzIGpvdWV1cnMKbG9jYWwgZnVuY3Rpb24gdXBkYXRlUGxheWVyTGlzdCgpCiAgICAtLSBTdXBwcmltZSBsZXMgYW5jaWVucyBib3V0b25zCiAgICBmb3IgXywgY2hpbGQgaW4gaXBhaXJzKHBsYXllckxpc3RGcmFtZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIGNoaWxkOklzQSgiVGV4dEJ1dHRvbiIpIHRoZW4KICAgICAgICAgICAgY2hpbGQ6RGVzdHJveSgpCiAgICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgbG9jYWwgY291bnQgPSAwCiAgICBmb3IgXywgb3RoZXJQbGF5ZXIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgIGlmIG90aGVyUGxheWVyIH49IHBsYXllciB0aGVuCiAgICAgICAgICAgIGxvY2FsIHBCdXR0b24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgICAgICBwQnV0dG9uLk5hbWUgPSBvdGhlclBsYXllci5OYW1lLi4iQnV0dG9uIgogICAgICAgICAgICBwQnV0dG9uLlRleHQgPSBvdGhlclBsYXllci5OYW1lCiAgICAgICAgICAgIHBCdXR0b24uU2l6ZSA9IFVEaW0yLm5ldygxLCAtMTAsIDAsIDMwKQogICAgICAgICAgICBwQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIGNvdW50ICogMzUpCiAgICAgICAgICAgIHBCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgwLCA4MCwgODApCiAgICAgICAgICAgIHBCdXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICAgICAgICAgICAgcEJ1dHRvbi5Cb3JkZXJTaXplUGl4ZWwgPSAxCiAgICAgICAgICAgIHBCdXR0b24uQm9yZGVyQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA0MCkKICAgICAgICAgICAgcEJ1dHRvbi5QYXJlbnQgPSBwbGF5ZXJMaXN0RnJhbWUKICAgICAgICAgICAgCiAgICAgICAgICAgIHBCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBzZXRPYnNlcnZlZFBsYXllcihvdGhlclBsYXllcikKICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAKICAgICAgICAgICAgY291bnQgPSBjb3VudCArIDEKICAgICAgICBlbmQKICAgIGVuZAogICAgCiAgICBwbGF5ZXJMaXN0RnJhbWUuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCBjb3VudCAqIDM1KQplbmQKCi0tIEZvbmN0aW9uIHBvdXIgcmV0b3VybmVyIMOgIGxhIHZ1ZSBkdSBqb3VldXIgbG9jYWwKbG9jYWwgZnVuY3Rpb24gcmVzZXRUb0xvY2FsUGxheWVyKCkKICAgIGRpc2Nvbm5lY3RJZkV4aXN0cygib2JzZXJ2ZWREaWVkIikKICAgIGRpc2Nvbm5lY3RJZkV4aXN0cygid2FpdEZvckNoYXJhY3RlciIpCiAgICBkaXNjb25uZWN0SWZFeGlzdHMoImNoYXJhY3RlckFkZGVkIikKICAgIAogICAgaWYgcGxheWVyIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIHRoZW4KICAgICAgICBjYW1lcmEuQ2FtZXJhU3ViamVjdCA9IHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQKICAgICAgICBwcmludCgiQmFjayBUbyBZb3VyIENhbWVyYSIpCiAgICBlbmQKICAgIAogICAgY3VycmVudE9ic2VydmVkUGxheWVyID0gbmlsCiAgICBsYXN0T2JzZXJ2ZWRDaGFyYWN0ZXIgPSBuaWwKZW5kCgotLSBGb25jdGlvbiBwb3VyIGFjdGl2ZXIvZMOpc2FjdGl2ZXIgbGUgbW9kZSBzcGVjdGF0ZXVyCmxvY2FsIGZ1bmN0aW9uIHRvZ2dsZVNwZWN0YXRvck1vZGUoZW5hYmxlZCkKICAgIHNwZWN0YXRlRW5hYmxlZCA9IGVuYWJsZWQKICAgIAogICAgaWYgZW5hYmxlZCB0aGVuCiAgICAgICAgdG9nZ2xlSW5kaWNhdG9yOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDEsIC0yNSwgMCwgMCksICJPdXQiLCAiU2luZSIsIDAuMiwgdHJ1ZSkKICAgICAgICAKICAgICAgICBpZiBpc1BsYXllclZhbGlkKGN1cnJlbnRPYnNlcnZlZFBsYXllcikgdGhlbgogICAgICAgICAgICBzcGVjdGF0ZVBsYXllcihjdXJyZW50T2JzZXJ2ZWRQbGF5ZXIpCiAgICAgICAgZWxzZQogICAgICAgICAgICBwcmludCgiU3BlY3RhdG9yIE1vZGUgRW5hYmxlZCAtIFNlbGVjdCBhIFBsYXllciBUbyBXYXRjaCIpCiAgICAgICAgZW5kCiAgICBlbHNlCiAgICAgICAgdG9nZ2xlSW5kaWNhdG9yOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDAsIDAsIDAsIDApLCAiT3V0IiwgIlNpbmUiLCAwLjIsIHRydWUpCiAgICAgICAgcmVzZXRUb0xvY2FsUGxheWVyKCkKICAgICAgICBwcmludCgiU3BlY3RhdG9yIE1vZGUgRGlzYWJsZWQiKQogICAgZW5kCmVuZAoKLS0gR2VzdGlvbiBkZSBsYSBtb3J0IGR1IGpvdWV1ciBsb2NhbApsb2NhbCBmdW5jdGlvbiBzZXR1cExvY2FsUGxheWVyRXZlbnRzKCkKICAgIGlmIHBsYXllci5DaGFyYWN0ZXIgYW5kIHBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgdGhlbgogICAgICAgIGxvY2FsIGh1bWFub2lkID0gcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKQogICAgICAgIAogICAgICAgIGRpc2Nvbm5lY3RJZkV4aXN0cygibG9jYWxQbGF5ZXJEaWVkIikKICAgICAgICAKICAgICAgICBjb25uZWN0aW9uc1sibG9jYWxQbGF5ZXJEaWVkIl0gPSBodW1hbm9pZC5EaWVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBwcmludCgiWW91IGRpZWQiKQogICAgICAgICAgICAtLSBTaSBub3VzIG9ic2Vydm9ucyBkw6lqw6AgcXVlbHF1J3VuLCBjb250aW51ZXIgw6AgbCdvYnNlcnZlcgogICAgICAgICAgICBpZiBzcGVjdGF0ZUVuYWJsZWQgYW5kIGN1cnJlbnRPYnNlcnZlZFBsYXllciB0aGVuCiAgICAgICAgICAgICAgICBzcGVjdGF0ZVBsYXllcihjdXJyZW50T2JzZXJ2ZWRQbGF5ZXIpCiAgICAgICAgICAgICAgICBwcmludCgiU3RpbGwgV2F0Y2hpbmcgIiAuLiBjdXJyZW50T2JzZXJ2ZWRQbGF5ZXIuTmFtZSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kCmVuZAoKLS0gR2VzdGlvbiBkdSBib3V0b24gcG91ciBhZmZpY2hlci9tYXNxdWVyIGxhIGxpc3RlIGRlcyBqb3VldXJzCmxpc3RCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBsaXN0VmlzaWJsZSA9IG5vdCBsaXN0VmlzaWJsZQogICAgaWYgbGlzdFZpc2libGUgdGhlbgogICAgICAgIHBsYXllckxpc3RGcmFtZS5WaXNpYmxlID0gdHJ1ZQogICAgICAgIGxpc3RCdXR0b24uVGV4dCA9ICJIaWRlIFBsYXllciBMaXN0IgogICAgICAgIHVwZGF0ZVBsYXllckxpc3QoKQogICAgZWxzZQogICAgICAgIHBsYXllckxpc3RGcmFtZS5WaXNpYmxlID0gZmFsc2UKICAgICAgICBsaXN0QnV0dG9uLlRleHQgPSAiU2hvdyBQbGF5ZXIgTGlzdCIKICAgIGVuZAplbmQpCgotLSBHZXN0aW9uIGR1IHRvZ2dsZSBzd2l0Y2ggcG91ciBhY3RpdmVyL2TDqXNhY3RpdmVyIGxlIG1vZGUgc3BlY3RhdGV1cgp0b2dnbGVTd2l0Y2guSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKGlucHV0LCBnYW1lUHJvY2Vzc2VkKQogICAgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIGFuZCBub3QgZ2FtZVByb2Nlc3NlZCB0aGVuCiAgICAgICAgdG9nZ2xlU3BlY3RhdG9yTW9kZShub3Qgc3BlY3RhdGVFbmFibGVkKQogICAgZW5kCmVuZCkKCi0tIE1pc2UgZW4gcGxhY2UgZGVzIMOpdsOpbmVtZW50cyBwb3VyIGfDqXJlciBsZXMgY2hhbmdlbWVudHMgZGUgcGVyc29ubmFnZSBkdSBqb3VldXIgbG9jYWwKcGxheWVyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oY2hhcmFjdGVyKQogICAgLS0gU2kgbGUgbW9kZSBzcGVjdGF0ZXVyIG4nZXN0IHBhcyBhY3RpdsOpLCByZWNlbnRyZXIgbGEgY2Ftw6lyYSBzdXIgbGUgam91ZXVyCiAgICBpZiBub3Qgc3BlY3RhdGVFbmFibGVkIHRoZW4KICAgICAgICBsb2NhbCBodW1hbm9pZCA9IGNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikKICAgICAgICBjYW1lcmEuQ2FtZXJhU3ViamVjdCA9IGh1bWFub2lkCiAgICBlbmQKICAgIAogICAgLS0gQ29uZmlndXJlciBsZXMgw6l2w6luZW1lbnRzIHBvdXIgbGUgbm91dmVhdSBwZXJzb25uYWdlCiAgICBzZXR1cExvY2FsUGxheWVyRXZlbnRzKCkKZW5kKQoKLS0gTmV0dG95YWdlIHF1YW5kIHVuIGpvdWV1ciBxdWl0dGUgbGUgamV1ClBsYXllcnMuUGxheWVyUmVtb3Zpbmc6Q29ubmVjdChmdW5jdGlvbihwbHIpCiAgICBpZiBjdXJyZW50T2JzZXJ2ZWRQbGF5ZXIgPT0gcGxyIHRoZW4KICAgICAgICBwcmludCgiVGhlIFBsYXllciBZb3UgT2JzZXJ2ZWQgTGVmdCBUaGUgR2FtZSIpCiAgICAgICAgcmVzZXRUb0xvY2FsUGxheWVyKCkKICAgICAgICB0b2dnbGVTcGVjdGF0b3JNb2RlKGZhbHNlKQogICAgZW5kCiAgICB1cGRhdGVQbGF5ZXJMaXN0KCkKZW5kKQoKLS0gUydhc3N1cmVyIHF1ZSBsZSBtb2RlIHNwZWN0YXRldXIgcmVzdGUgYWN0aXbDqSBtw6ptZSBhcHLDqHMgdW4gcmVzcGF3bgpSdW5TZXJ2aWNlLkhlYXJ0YmVhdDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIC0tIFNpIG5vdXMgc29tbWVzIGVuIG1vZGUgc3BlY3RhdGV1ciBtYWlzIHF1ZSBsYSBjYW3DqXJhIGEgw6l0w6kgcsOpaW5pdGlhbGlzw6llCiAgICBpZiBzcGVjdGF0ZUVuYWJsZWQgYW5kIGN1cnJlbnRPYnNlcnZlZFBsYXllciBhbmQgcGxheWVyLkNoYXJhY3RlciB0aGVuCiAgICAgICAgaWYgY2FtZXJhLkNhbWVyYVN1YmplY3QgPT0gcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSB0aGVuCiAgICAgICAgICAgIHByaW50KCJMYSBjYW3DqXJhIGEgw6l0w6kgcsOpaW5pdGlhbGlzw6llLCByZXByaXNlIGRlIGwnb2JzZXJ2YXRpb24iKQogICAgICAgICAgICBzcGVjdGF0ZVBsYXllcihjdXJyZW50T2JzZXJ2ZWRQbGF5ZXIpCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKQoKLS0gSW5pdGlhbGlzYXRpb24KcGxheWVyTGlzdEZyYW1lLlZpc2libGUgPSBmYWxzZSAtLSBNYXNxdWVyIGxhIGxpc3RlIGF1IGTDqW1hcnJhZ2UKdXBkYXRlUGxheWVyTGlzdCgpCgotLSBNZXR0cmUgw6Agam91ciBsYSBsaXN0ZSBkZXMgam91ZXVycyBxdWFuZCB1biBqb3VldXIgcmVqb2ludApQbGF5ZXJzLlBsYXllckFkZGVkOkNvbm5lY3QodXBkYXRlUGxheWVyTGlzdCkKCi0tIENvbmZpZ3VyZXIgbGVzIMOpdsOpbmVtZW50cyBwb3VyIGxlIHBlcnNvbm5hZ2UgYWN0dWVsIHMnaWwgZXhpc3RlCmlmIHBsYXllci5DaGFyYWN0ZXIgdGhlbgogICAgc2V0dXBMb2NhbFBsYXllckV2ZW50cygpCmVuZAoKLS0gTmV0dG95YWdlIGRlcyBjb25uZXhpb25zIGxvcnNxdWUgbGUgc2NyaXB0IHNlIHRlcm1pbmUKc2NyaXB0LkFuY2VzdHJ5Q2hhbmdlZDpDb25uZWN0KGZ1bmN0aW9uKF8sIHBhcmVudCkKICAgIGlmIHBhcmVudCA9PSBuaWwgdGhlbgogICAgICAgIGZvciBfLCBjb25uZWN0aW9uIGluIHBhaXJzKGNvbm5lY3Rpb25zKSBkbwogICAgICAgICAgICBpZiBjb25uZWN0aW9uIHRoZW4KICAgICAgICAgICAgICAgIGNvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGNvbm5lY3Rpb25zID0ge30KICAgIGVuZAplbmQpCgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi0tIEZ1bmN0aW9uICBBdXRvIFJlYmlydGgKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpsb2NhbCBjb25maXJtYXRpb25XaW5kb3cgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKY29uZmlybWF0aW9uV2luZG93LlNpemUgPSBVRGltMi5uZXcoMCwgMzAwLCAwLCAyMDApCmNvbmZpcm1hdGlvbldpbmRvdy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIC0xNTAsIDAuNSwgLTEwMCkKY29uZmlybWF0aW9uV2luZG93LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig1NSwgNTUsIDU1KQpjb25maXJtYXRpb25XaW5kb3cuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuMgpjb25maXJtYXRpb25XaW5kb3cuVmlzaWJsZSA9IGZhbHNlICAtLSBQYXIgZMOpZmF1dCwgbGEgZmVuw6p0cmUgZXN0IGNhY2jDqWUKY29uZmlybWF0aW9uV2luZG93LlBhcmVudCA9IG1haW5GcmFtZQoKLS0gVGl0cmUgZGUgbGEgZmVuw6p0cmUgZGUgY29uZmlybWF0aW9uCmxvY2FsIHRpdGxlTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCnRpdGxlTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLjIsIDApCnRpdGxlTGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMCkKdGl0bGVMYWJlbC5UZXh0ID0gIkRvIFlvdSBSZWFsbHkgV2FudCBUbyBUdXJuIE9uIFRoZSBBdXRvIFJlYmlydGggT3B0aW9uPyIKdGl0bGVMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKdGl0bGVMYWJlbC5UZXh0U2NhbGVkID0gdHJ1ZQp0aXRsZUxhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCnRpdGxlTGFiZWwuUGFyZW50ID0gY29uZmlybWF0aW9uV2luZG93CgotLSBCb3V0b24gZGUgY29uZmlybWF0aW9uCmxvY2FsIGNvbmZpcm1CdXR0b24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQpjb25maXJtQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMCwgMTIwLCAwLCA1MCkKY29uZmlybUJ1dHRvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIC0xMzAsIDAuNywgMCkKY29uZmlybUJ1dHRvbi5UZXh0ID0gIkNvbmZpcm1lZCIKY29uZmlybUJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKY29uZmlybUJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNzAsIDcwLCA3MCkKY29uZmlybUJ1dHRvbi5QYXJlbnQgPSBjb25maXJtYXRpb25XaW5kb3cKCi0tIEJvdXRvbiBkJ2FubnVsYXRpb24KbG9jYWwgY2FuY2VsQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKY2FuY2VsQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMCwgMTIwLCAwLCA1MCkKY2FuY2VsQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgMTAsIDAuNywgMCkKY2FuY2VsQnV0dG9uLlRleHQgPSAiQ2FuY2VsLCBicnUiCmNhbmNlbEJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKY2FuY2VsQnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3MCwgNzAsIDcwKQpjYW5jZWxCdXR0b24uUGFyZW50ID0gY29uZmlybWF0aW9uV2luZG93CgotLSBWYXJpYWJsZXMgcG91ciBnw6lyZXIgbCfDqXRhdCBkZSBsJ2F1dG8gcmViaXJ0aApsb2NhbCBhdXRvUmViaXJ0aEVuYWJsZWQgPSBmYWxzZQpsb2NhbCBhdXRvUmViaXJ0aFRocmVhZCA9IG5pbAoKLS0gYWZmaWNoZXIgbGEgZmVuw6p0cmUgZGUgY29uZmlybWF0aW9uCmxvY2FsIGZ1bmN0aW9uIHNob3dDb25maXJtYXRpb25XaW5kb3coKQogICAgY29uZmlybWF0aW9uV2luZG93LlZpc2libGUgPSB0cnVlCmVuZAoKLS0gbWFzcXVlciBsYSBmZW7DqnRyZSBkZSBjb25maXJtYXRpb24KbG9jYWwgZnVuY3Rpb24gaGlkZUNvbmZpcm1hdGlvbldpbmRvdygpCiAgICBjb25maXJtYXRpb25XaW5kb3cuVmlzaWJsZSA9IGZhbHNlCmVuZAoKLS0gRm9uY3Rpb24gcG91ciBkw6ltYXJyZXIgbCdhdXRvIHJlYmlydGgKbG9jYWwgZnVuY3Rpb24gc3RhcnRBdXRvUmViaXJ0aCgpCiAgICBpZiBhdXRvUmViaXJ0aFRocmVhZCB0aGVuIHJldHVybiBlbmQKCiAgICBhdXRvUmViaXJ0aEVuYWJsZWQgPSB0cnVlCiAgICBhdXRvUmViaXJ0aEJ1dHRvbi5UZXh0ID0gIkF1dG8gUmViaXJ0aDogT04iCiAgICBhdXRvUmViaXJ0aEJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMTIwLCAwKQogICAgCiAgICBhdXRvUmViaXJ0aFRocmVhZCA9IHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSBhdXRvUmViaXJ0aEVuYWJsZWQgZG8KICAgICAgICAgICAgd2FpdCgwLjEpCiAgICAgICAgICAgIC0tIENvZGUgcG91ciBlZmZlY3R1ZXIgbGUgcmViaXJ0aAogICAgICAgICAgICBsb2NhbCBhcmdzID0gewogICAgICAgICAgICAgICAgWzFdID0gInJlYmlydGhSZXF1ZXN0IgogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuckV2ZW50cy5yZWJpcnRoUmVtb3RlOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZCkKZW5kCgotLSBhcnLDqnRlciBsJ2F1dG8gcmViaXJ0aApsb2NhbCBmdW5jdGlvbiBzdG9wQXV0b1JlYmlydGgoKQogICAgYXV0b1JlYmlydGhFbmFibGVkID0gZmFsc2UKICAgIGF1dG9SZWJpcnRoQnV0dG9uLlRleHQgPSAiQXV0byBSZWJpcnRoOiBPRkYiCiAgICBhdXRvUmViaXJ0aEJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNTAsIDUwLCA1MCkKICAgIAogICAgaWYgYXV0b1JlYmlydGhUaHJlYWQgdGhlbgogICAgICAgIGF1dG9SZWJpcnRoVGhyZWFkID0gbmlsCiAgICBlbmQKZW5kCgotLSBib3V0b24gcG91ciBhY3RpdmVyL2TDqXNhY3RpdmVyIGwnYXV0byByZWJpcnRoCmF1dG9SZWJpcnRoQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgaWYgYXV0b1JlYmlydGhFbmFibGVkIHRoZW4KICAgICAgICBzdG9wQXV0b1JlYmlydGgoKQogICAgZWxzZQogICAgICAgIHNob3dDb25maXJtYXRpb25XaW5kb3coKSAgLS0gZmVuw6p0cmUgZGUgY29uZmlybWF0aW9uCiAgICBlbmQKZW5kKQoKLS0gYm91dG9uIGRlIGNvbmZpcm1hdGlvbiBwb3VyIGTDqW1hcnJlciBsZSByZWJpcnRoCmNvbmZpcm1CdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBzdGFydEF1dG9SZWJpcnRoKCkgLS0gYXV0byByZWJpcnRoIGFjdGl2w6kgYXByw6hzIGNvbmZpcm1hdGlvbiBzaSBvbiBhIGFzc2V6IGRlIGZvcmNlcyBwb3VyIGwnZWZmZWN0dWVyCiAgICBoaWRlQ29uZmlybWF0aW9uV2luZG93KCkgLS0gbWFzcXVlIGxhIGZlbsOqdHJlIGRlIGNvbmZpcm1hdGlvbgplbmQpCgotLSBib3V0b24gZCdhbm51bGF0aW9uIHBvdXIgZmVybWVyIGxhIGZlbsOqdHJlIHNhbnMgcmllbiBmYWlyZQpjYW5jZWxCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBoaWRlQ29uZmlybWF0aW9uV2luZG93KCkgLS0gb3V2cmlyIGxhIGZlbmV0cmUgZGUgY29uZmlyYW10aW9uIGRlIHJlYmlydGgKZW5kKQoKbWxUYWIuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBtYWluRnJhbWUuVmlzaWJsZSA9IHRydWUKZW5kKQoKaWYgYXV0b1JlYmlydGhFbmFibGVkIHRoZW4KICAgIHN0b3BBdXRvUmViaXJ0aCgpCmVuZAo=","LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQotLSBGdW5jdGlvbiBBdXRvIFRyYWluCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KbG9jYWwgZnVuY3Rpb24gdG9nZ2xlQXV0b1N0cmVuZ3RoKHN0YXRlKQoJQXV0b1RyYWluID0gc3RhdGUKCXdoaWxlIEF1dG9UcmFpbiBkbwoJCXdhaXQoMC4wMDEpCgkJLS0gQXBwZWwgZGUgbCfDqXbDqW5lbWVudCBtdXNjbGVFdmVudCBwb3VyICJyZXAiLCBhdmVjIHVuZSB2w6lyaWZpY2F0aW9uIHByw6lhbGFibGUKCQlpZiBtdXNjbGVFdmVudCB0aGVuCgkJCW11c2NsZUV2ZW50OkZpcmVTZXJ2ZXIoInJlcCIpCgkJZWxzZQoJCQl3YXJuKCJtdXNjbGVFdmVudCBlc3QgaW50cm91dmFibGUgISIpCgkJZW5kCgoJCS0tIFbDqXJpZmllIHNpIHVuIG91dGlsIGVzdCBkw6lqw6Agw6lxdWlww6kgc3VyIGxlIHBlcnNvbm5hZ2UKCQlsb2NhbCBoYXNUb29sRXF1aXBwZWQgPSBmYWxzZQoJCWZvciBfLCB0b29sIGluIHBhaXJzKGNoYXJhY3RlcjpHZXRDaGlsZHJlbigpKSBkbwoJCQlpZiB0b29sOklzQSgiVG9vbCIpIHRoZW4KCQkJCWhhc1Rvb2xFcXVpcHBlZCA9IHRydWUKCQkJCWJyZWFrCgkJCWVuZAoJCWVuZAoKCQktLSBTaSBhdWN1biBvdXRpbCBuJ2VzdCDDqXF1aXDDqSwgw6lxdWlwZSB1biBvdXRpbCDDoCBsYSBmb2lzIGRlcHVpcyBsZSBCYWNrcGFjawoJCWlmIG5vdCBoYXNUb29sRXF1aXBwZWQgdGhlbgoJCQlmb3IgXywgdiBpbiBwYWlycyhiYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbyAKCQkJCWlmIHY6SXNBKCJUb29sIikgYW5kIHYuTmFtZSA9PSAiSGFuZHN0YW5kcyIgdGhlbiAKCQkJCQl2LlBhcmVudCA9IGNoYXJhY3RlcgoJCQkJCWJyZWFrCgkJCQllbmQKCQkJZW5kCgkJCWZvciBfLCB2IGluIHBhaXJzKGJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvIAoJCQkJaWYgdjpJc0EoIlRvb2wiKSBhbmQgdi5OYW1lID09ICJTaXR1cHMiIHRoZW4gCgkJCQkJdi5QYXJlbnQgPSBjaGFyYWN0ZXIKCQkJCQlicmVhawoJCQkJZW5kCgkJCWVuZAoJCQlmb3IgXywgdiBpbiBwYWlycyhiYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbyAKCQkJCWlmIHY6SXNBKCJUb29sIikgYW5kIHYuTmFtZSA9PSAiUHVzaHVwcyIgdGhlbiAKCQkJCQl2LlBhcmVudCA9IGNoYXJhY3RlcgoJCQkJCWJyZWFrCgkJCQllbmQKCQkJZW5kCgkJCWZvciBfLCB2IGluIHBhaXJzKGJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvIAoJCQkJaWYgdjpJc0EoIlRvb2wiKSBhbmQgdi5OYW1lID09ICJXZWlnaHQiIHRoZW4gCgkJCQkJdi5QYXJlbnQgPSBjaGFyYWN0ZXIKCQkJCQlicmVhawoJCQkJZW5kCgkJCWVuZAoJCWVuZAoJZW5kCmVuZAoKYXV0b1RyYWluQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQoJYXV0b1RyYWluRW5hYmxlZCA9IG5vdCBhdXRvVHJhaW5FbmFibGVkCglhdXRvVHJhaW5CdXR0b24uVGV4dCA9ICJBdXRvIFRyYWluOiAiIC4uIChhdXRvVHJhaW5FbmFibGVkIGFuZCAiT24iIG9yICJPZmYiKQoJaWYgYXV0b1RyYWluRW5hYmxlZCB0aGVuCgkJLS0gTGFuY2VtZW50IGRlIGxhIGZvbmN0aW9uIGQnYXV0b3RyYWluIGRhbnMgdW4gc3Bhd24gcG91ciBuZSBwYXMgYmxvcXVlciBsZSBzY3JpcHQgcHJpbmNpcGFsCgkJc3Bhd24oZnVuY3Rpb24oKSB0b2dnbGVBdXRvU3RyZW5ndGgodHJ1ZSkgZW5kKQoJZWxzZQoJCUF1dG9UcmFpbiA9IGZhbHNlCgllbmQKZW5kKQoKbG9jYWwgZnVuY3Rpb24gdXBkYXRlUGxheWVyTGlzdCgpCiAgICBmb3IgXywgY2hpbGQgaW4gcGFpcnMoc2Nyb2xsaW5nRnJhbWU6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiBjaGlsZDpJc0EoIlRleHRCdXR0b24iKSB0aGVuCiAgICAgICAgICAgIGNoaWxkOkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgZW5kCgogICAgZm9yIF8sIHBsciBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiBwbHIgfj0gcGxheWVyIHRoZW4KICAgICAgICAgICAgLS0gTmUgcGFzIHLDqWluaXRpYWxpc2VyIGxlIHN0YXR1dCBzJ2lsIGVzdCBkw6lqw6AgZMOpZmluaQogICAgICAgICAgICBpZiBwbGF5ZXJTdGF0dXNbcGxyLk5hbWVdID09IG5pbCB0aGVuCiAgICAgICAgICAgICAgICBwbGF5ZXJTdGF0dXNbcGxyLk5hbWVdID0gIkluYWN0aXZlIgogICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIGxvY2FsIHBsYXllckJ1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgICAgIHBsYXllckJ1dHRvbi5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDMwKQoJCQlwbGF5ZXJCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcwLCA3MCwgNzApCgkJCXBsYXllckJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICAgICAgICAgICAgcGxheWVyQnV0dG9uLlBhcmVudCA9IHNjcm9sbGluZ0ZyYW1lCgogICAgICAgICAgICBsb2NhbCBmdW5jdGlvbiB1cGRhdGVTdGF0dXMoKQogICAgICAgICAgICAgICAgbG9jYWwgc3RhdHVzID0gcGxheWVyU3RhdHVzW3Bsci5OYW1lXQogICAgICAgICAgICAgICAgcGxheWVyQnV0dG9uLlRleHQgPSBwbHIuTmFtZSAuLiAiICgiIC4uIHN0YXR1cyAuLiAiKSIKICAgICAgICAgICAgICAgIGlmIHN0YXR1cyA9PSAiQWN0aXZlIiB0aGVuCgogICAgICAgICAgICAgICAgZWxzZQoKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIHVwZGF0ZVN0YXR1cygpCgogICAgICAgICAgICBsb2NhbCBmdW5jdGlvbiBzdGFydFRlbGVwb3J0YXRpb24oKQogICAgICAgICAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHdoaWxlIHBsYXllclN0YXR1c1twbHIuTmFtZV0gPT0gIkFjdGl2ZSIgZG8KICAgICAgICAgICAgICAgICAgICAgICAgLS0gQXNzdXJlIHF1ZSBsZXMgQ2hhcmFjdGVycyBleGlzdGVudAogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgcGxheWVyLkNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgcGxyLkNoYXJhY3RlciB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbHIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0SHVtYW5vaWRSb290UGFydCA9IHBsci5DaGFyYWN0ZXIgYW5kIHBsci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBteUh1bWFub2lkUm9vdFBhcnQgPSBwbGF5ZXIuQ2hhcmFjdGVyIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICAgICAgICAgICAgICAgICAgaWYgdGFyZ2V0SHVtYW5vaWRSb290UGFydCBhbmQgbXlIdW1hbm9pZFJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gbXlIdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSArIFZlY3RvcjMubmV3KDAsIDMsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgICAgICAgICAgLS0gU2kgbGUgQ2hhcmFjdGVyIGR1IGpvdWV1ciBjaWJsw6kgZXN0IGFic2VudCAobW9ydCksIGF0dGVuZHJlIHNhIHLDqWFwcGFyaXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHBsci5DaGFyYWN0ZXIgb3Igbm90IHBsci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIHBsci5DaGFyYWN0ZXIgYW5kIHBsci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KSAgLS0gSW50ZXJ2YWxsZSBkZSB0w6lsw6lwb3J0YXRpb24gKG1vZGlmaWFibGUpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgcGxheWVyQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgcGxheWVyU3RhdHVzW3Bsci5OYW1lXSA9PSAiSW5hY3RpdmUiIHRoZW4KICAgICAgICAgICAgICAgICAgICBwbGF5ZXJTdGF0dXNbcGxyLk5hbWVdID0gIkFjdGl2ZSIKICAgICAgICAgICAgICAgICAgICBzdGFydFRlbGVwb3J0YXRpb24oKQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHBsYXllclN0YXR1c1twbHIuTmFtZV0gPSAiSW5hY3RpdmUiCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIHVwZGF0ZVN0YXR1cygpCiAgICAgICAgICAgIGVuZCkKCiAgICAgICAgICAgIC0tIExvcnNxdSd1biBqb3VldXIgbWV1cnQsIG9uIG5lIGNoYW5nZSBwYXMgc29uIMOpdGF0IChsYSBib3VjbGUgYXR0ZW5kcmEgbGEgcsOpYXBwYXJpdGlvbikKICAgICAgICAgICAgcGxyLkNoYXJhY3RlclJlbW92aW5nOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgdXBkYXRlU3RhdHVzKCkKICAgICAgICAgICAgZW5kKQoKICAgICAgICAgICAgcGxyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgcGxheWVyU3RhdHVzW3Bsci5OYW1lXSA9PSAiQWN0aXZlIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgc3RhcnRUZWxlcG9ydGF0aW9uKCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgotLSBNZXQgw6Agam91ciBsYSBsaXN0ZSBpbml0aWFsZW1lbnQgZXQgbG9ycyBkZSBjaGFuZ2VtZW50cwp1cGRhdGVQbGF5ZXJMaXN0KCkKClBsYXllcnMuUGxheWVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbihuZXdQbHIpCiAgICBpZiBuZXdQbHIgfj0gcGxheWVyIHRoZW4KICAgICAgICBpZiBwbGF5ZXJTdGF0dXNbbmV3UGxyLk5hbWVdID09IG5pbCB0aGVuCiAgICAgICAgICAgIHBsYXllclN0YXR1c1tuZXdQbHIuTmFtZV0gPSAiSW5hY3RpdmUiCiAgICAgICAgZW5kCiAgICAgICAgdXBkYXRlUGxheWVyTGlzdCgpCiAgICBlbmQKZW5kKQoKUGxheWVycy5QbGF5ZXJSZW1vdmluZzpDb25uZWN0KGZ1bmN0aW9uKGxlYXZpbmdQbHIpCiAgICBwbGF5ZXJTdGF0dXNbbGVhdmluZ1Bsci5OYW1lXSA9IG5pbAogICAgdXBkYXRlUGxheWVyTGlzdCgpCmVuZCkKCmxvY2FsVHBCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBsaXN0UGFuZWwuVmlzaWJsZSA9IG5vdCBsaXN0UGFuZWwuVmlzaWJsZQogICAgaWYgbGlzdFBhbmVsLlZpc2libGUgdGhlbgogICAgICAgIHVwZGF0ZVBsYXllckxpc3QoKSAgLS0gUmFmcmHDrmNoaXQgbGEgbGlzdGUgw6AgY2hhcXVlIG91dmVydHVyZQogICAgZW5kCmVuZCkKCnRvZ2dsZUJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGRpc3BsYXlFbmFibGVkID0gbm90IGRpc3BsYXlFbmFibGVkCiAgICB0b2dnbGVCdXR0b24uVGV4dCA9IGRpc3BsYXlFbmFibGVkIGFuZCAiSGlkZSBQbGF5ZXJzJ3MgSW52ZW50b3J5IiBvciAiU2VlIFBsYXllcnMncyBJbnZlbnRvcnkiCiAgICAKICAgIGZvciBfLCBwbGF5ZXIgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgaWYgdG9vbExhYmVsc1twbGF5ZXIuVXNlcklkXSB0aGVuCiAgICAgICAgICAgIHRvb2xMYWJlbHNbcGxheWVyLlVzZXJJZF0uRW5hYmxlZCA9IGRpc3BsYXlFbmFibGVkCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKQoKLS0gRm9uY3Rpb24gcG91ciBvYnRlbmlyIHRvdXMgbGVzIG91dGlscyBkJ3VuIGpvdWV1cgpsb2NhbCBmdW5jdGlvbiBHZXRQbGF5ZXJUb29scyhwbGF5ZXIpCiAgICBsb2NhbCB0b29scyA9IHt9CiAgICAKICAgIC0tIFbDqXJpZmllciBvdXRpbHMgw6lxdWlww6lzIChkYW5zIGxlIENoYXJhY3RlcikKICAgIGlmIHBsYXllci5DaGFyYWN0ZXIgdGhlbgogICAgICAgIGZvciBfLCBpdGVtIGluIHBhaXJzKHBsYXllci5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgaWYgaXRlbTpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodG9vbHMsIGl0ZW0uTmFtZSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgLS0gVsOpcmlmaWVyIG91dGlscyBkYW5zIGxlIEJhY2twYWNrIChub24gw6lxdWlww6lzKQogICAgaWYgcGxheWVyOkZpbmRGaXJzdENoaWxkKCJCYWNrcGFjayIpIHRoZW4KICAgICAgICBmb3IgXywgaXRlbSBpbiBwYWlycyhwbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgaWYgaXRlbTpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodG9vbHMsIGl0ZW0uTmFtZSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgcmV0dXJuIHRvb2xzCmVuZAoKLS0gRm9uY3Rpb24gcG91ciBjcsOpZXIgbCdhZmZpY2hhZ2UKbG9jYWwgZnVuY3Rpb24gQ3JlYXRlRGlzcGxheShwbGF5ZXIpCiAgICAtLSBTJ2Fzc3VyZXIgcXVlIGxlIGpvdWV1ciBhIHVuIHBlcnNvbm5hZ2UgY2hhcmfDqQogICAgaWYgbm90IHBsYXllci5DaGFyYWN0ZXIgb3Igbm90IHBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKSB0aGVuCiAgICAgICAgcmV0dXJuCiAgICBlbmQKICAgIAogICAgLS0gU3VwcHJpbWVyIGwnYW5jaWVuIGFmZmljaGFnZSBzJ2lsIGV4aXN0ZQogICAgaWYgdG9vbExhYmVsc1twbGF5ZXIuVXNlcklkXSBhbmQgdG9vbExhYmVsc1twbGF5ZXIuVXNlcklkXS5QYXJlbnQgdGhlbgogICAgICAgIHRvb2xMYWJlbHNbcGxheWVyLlVzZXJJZF06RGVzdHJveSgpCiAgICBlbmQKICAgIAogICAgLS0gQ3LDqWVyIGxlIEJpbGxib2FyZEd1aQogICAgbG9jYWwgYmlsbGJvYXJkID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKQogICAgYmlsbGJvYXJkLk5hbWUgPSAiSW52ZW50b3J5RGlzcGxheSIKICAgIGJpbGxib2FyZC5BbHdheXNPblRvcCA9IHRydWUKICAgIGJpbGxib2FyZC5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgMTAwKQogICAgYmlsbGJvYXJkLlN0dWRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMywgMCkKICAgIGJpbGxib2FyZC5BZG9ybmVlID0gcGxheWVyLkNoYXJhY3Rlci5IZWFkCiAgICBiaWxsYm9hcmQuRW5hYmxlZCA9IGRpc3BsYXlFbmFibGVkCiAgICAKICAgIC0tIENyw6llciBsZSB0ZXh0ZQogICAgbG9jYWwgdGV4dExhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgdGV4dExhYmVsLk5hbWUgPSAiVG9vbExpc3QiCiAgICB0ZXh0TGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKQogICAgdGV4dExhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICB0ZXh0TGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICAgIHRleHRMYWJlbC5UZXh0U3Ryb2tlQ29sb3IzID0gQ29sb3IzLm5ldygwLCAwLCAwKQogICAgdGV4dExhYmVsLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwCiAgICB0ZXh0TGFiZWwuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zQm9sZAogICAgdGV4dExhYmVsLlRleHRTY2FsZWQgPSBmYWxzZQogICAgdGV4dExhYmVsLlRleHRTaXplID0gMTQKICAgIHRleHRMYWJlbC5UZXh0V3JhcHBlZCA9IHRydWUKICAgIHRleHRMYWJlbC5QYXJlbnQgPSBiaWxsYm9hcmQKICAgIAogICAgLS0gQWpvdXRlciBhdSBwZXJzb25uYWdlCiAgICBiaWxsYm9hcmQuUGFyZW50ID0gcGxheWVyLkNoYXJhY3Rlci5IZWFkCiAgICAKICAgIC0tIFN0b2NrZXIgbGEgcsOpZsOpcmVuY2UKICAgIHRvb2xMYWJlbHNbcGxheWVyLlVzZXJJZF0gPSBiaWxsYm9hcmQKZW5kCgotLSBGb25jdGlvbiBwb3VyIG1ldHRyZSDDoCBqb3VyIGwnYWZmaWNoYWdlCmxvY2FsIGZ1bmN0aW9uIFVwZGF0ZURpc3BsYXkocGxheWVyKQogICAgLS0gVsOpcmlmaWVyIHF1ZSBsJ2FmZmljaGFnZSBleGlzdGUKICAgIGlmIG5vdCBwbGF5ZXIuQ2hhcmFjdGVyIG9yIG5vdCB0b29sTGFiZWxzW3BsYXllci5Vc2VySWRdIHRoZW4KICAgICAgICByZXR1cm4KICAgIGVuZAogICAgCiAgICAtLSBPYnRlbmlyIGxlcyBvdXRpbHMgZXQgY3LDqWVyIGxlIHRleHRlCiAgICBsb2NhbCB0b29scyA9IEdldFBsYXllclRvb2xzKHBsYXllcikKICAgIGxvY2FsIHRvb2xUZXh0ID0gcGxheWVyLk5hbWUgLi4gIidzIEludmVudG9yeTpcbiIKICAgIAogICAgaWYgI3Rvb2xzID4gMCB0aGVuCiAgICAgICAgZm9yIGksIHRvb2xOYW1lIGluIGlwYWlycyh0b29scykgZG8KICAgICAgICAgICAgdG9vbFRleHQgPSB0b29sVGV4dCAuLiAiLSAiIC4uIHRvb2xOYW1lIC4uICJcbiIKICAgICAgICBlbmQKICAgIGVsc2UKICAgICAgICB0b29sVGV4dCA9IHRvb2xUZXh0IC4uICItIE5vIFRvb2xzIgogICAgZW5kCiAgICAKICAgIC0tIE1ldHRyZSDDoCBqb3VyIGxlIHRleHRlCiAgICBsb2NhbCB0ZXh0TGFiZWwgPSB0b29sTGFiZWxzW3BsYXllci5Vc2VySWRdLlRvb2xMaXN0CiAgICB0ZXh0TGFiZWwuVGV4dCA9IHRvb2xUZXh0CmVuZAoKLS0gRm9uY3Rpb24gZXjDqWN1dMOpZSBxdWFuZCB1biBqb3VldXIgc3Bhd24gb3UgcmVzcGF3bgpsb2NhbCBmdW5jdGlvbiBPbkNoYXJhY3RlckFkZGVkKGNoYXJhY3RlciwgcGxheWVyKQogICAgLS0gQXR0ZW5kcmUgdW4gcGV1IHBvdXIgcydhc3N1cmVyIHF1ZSB0b3V0IGVzdCBjaGFyZ8OpCiAgICB3YWl0KDEpCiAgICBDcmVhdGVEaXNwbGF5KHBsYXllcikKZW5kCgotLSBJbnN0YWxsZXIgcG91ciB0b3VzIGxlcyBqb3VldXJzIGFjdHVlbHMKZm9yIF8sIHBsYXllciBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgIGlmIHBsYXllci5DaGFyYWN0ZXIgdGhlbgogICAgICAgIENyZWF0ZURpc3BsYXkocGxheWVyKQogICAgZW5kCiAgICAKICAgIC0tIENvbm5lY3RlciBwb3VyIGxlcyByZXNwYXducwogICAgcGxheWVyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oY2hhcmFjdGVyKQogICAgICAgIE9uQ2hhcmFjdGVyQWRkZWQoY2hhcmFjdGVyLCBwbGF5ZXIpCiAgICBlbmQpCmVuZAoKLS0gQ29ubmVjdGVyIHBvdXIgbGVzIG5vdXZlYXV4IGpvdWV1cnMKUGxheWVycy5QbGF5ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHBsYXllcikKICAgIC0tIEF0dGVuZHJlIHF1ZSBsZSBjYXJhY3TDqHJlIHNvaXQgY2hhcmfDqQogICAgcGxheWVyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oY2hhcmFjdGVyKQogICAgICAgIE9uQ2hhcmFjdGVyQWRkZWQoY2hhcmFjdGVyLCBwbGF5ZXIpCiAgICBlbmQpCmVuZCkKCi0tIE5ldHRveWVyIHF1YW5kIHVuIGpvdWV1ciBxdWl0dGUKUGxheWVycy5QbGF5ZXJSZW1vdmluZzpDb25uZWN0KGZ1bmN0aW9uKHBsYXllcikKICAgIGlmIHRvb2xMYWJlbHNbcGxheWVyLlVzZXJJZF0gdGhlbgogICAgICAgIHRvb2xMYWJlbHNbcGxheWVyLlVzZXJJZF06RGVzdHJveSgpCiAgICAgICAgdG9vbExhYmVsc1twbGF5ZXIuVXNlcklkXSA9IG5pbAogICAgZW5kCmVuZCkKCi0tIE1ldHRyZSDDoCBqb3VyIHRvdXMgbGVzIGFmZmljaGFnZXMgZW4gY29udGludQpSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICBmb3IgXywgcGxheWVyIGluIHBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgIFVwZGF0ZURpc3BsYXkocGxheWVyKQogICAgZW5kCmVuZCkKCmxvY2FsIFBsYXllclNlbGVjdEJ1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpClBsYXllclNlbGVjdEJ1dHRvbi5TaXplID0gVURpbTIubmV3KDAuOSwgMCwgMCwgNDApClBsYXllclNlbGVjdEJ1dHRvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjA1LCAwLCAwLCA3MTApClBsYXllclNlbGVjdEJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNjAsIDYwLCA2MCkKUGxheWVyU2VsZWN0QnV0dG9uLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQpQbGF5ZXJTZWxlY3RCdXR0b24uVGV4dCA9ICJTZWxlY3QgYSBQbGF5ZXIgVG8gZmxpbmciClBsYXllclNlbGVjdEJ1dHRvbi5UZXh0U2NhbGVkID0gdHJ1ZQpQbGF5ZXJTZWxlY3RCdXR0b24uVGV4dFNpemUgPSAxNApQbGF5ZXJTZWxlY3RCdXR0b24uUGFyZW50ID0gdGVsZXBvcnRGcmFtZQoKbG9jYWwgUGxheWVyU2VsZWN0TGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpClBsYXllclNlbGVjdExhYmVsLlNpemUgPSBVRGltMi5uZXcoMC45LCAwLCAwLCAzMCkKUGxheWVyU2VsZWN0TGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wNSwgMCwgMCwgNjcwKQpQbGF5ZXJTZWxlY3RMYWJlbC5UZXh0ID0gIkZsaW5nIFBsYXllcihNYWtlIGEgUGxheWVyJ3MgQ29sbGlzaW9uIEdsaXRjaGVkIFdpdGggWW91LCBXT1JLIElOIE5PVCBTTyBNVUNIIEdBTUUpIgpQbGF5ZXJTZWxlY3RMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQpQbGF5ZXJTZWxlY3RMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQpQbGF5ZXJTZWxlY3RMYWJlbC5UZXh0U2NhbGVkID0gdHJ1ZQpQbGF5ZXJTZWxlY3RMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdApQbGF5ZXJTZWxlY3RMYWJlbC5QYXJlbnQgPSB0ZWxlcG9ydEZyYW1lCgotLSBDcsOpZXIgbGUgY2FkcmUgZMOpcm91bGFudCBwb3VyIGxhIGxpc3RlIGRlcyBqb3VldXJzCmxvY2FsIFBsYXllckxpc3RGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQpQbGF5ZXJMaXN0RnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDEzMSkKUGxheWVyTGlzdEZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAuMywgNDIwKQpQbGF5ZXJMaXN0RnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcwLCA3MCwgNzApClBsYXllckxpc3RGcmFtZS5Cb3JkZXJTaXplUGl4ZWwgPSAxClBsYXllckxpc3RGcmFtZS5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMDAsIDEwMCwgMTAwKQpQbGF5ZXJMaXN0RnJhbWUuVmlzaWJsZSA9IGZhbHNlClBsYXllckxpc3RGcmFtZS5aSW5kZXggPSAxMApQbGF5ZXJMaXN0RnJhbWUuUGFyZW50ID0gdGVsZXBvcnRGcmFtZQoKLS0gQ3LDqWVyIGxhIGxpc3RlIGTDqXJvdWxhbnRlCmxvY2FsIFBsYXllclNjcm9sbGluZ0ZyYW1lID0gSW5zdGFuY2UubmV3KCJTY3JvbGxpbmdGcmFtZSIpClBsYXllclNjcm9sbGluZ0ZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgLTIsIDEsIC0yLjUpClBsYXllclNjcm9sbGluZ0ZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEsIDAsIDEpClBsYXllclNjcm9sbGluZ0ZyYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwClBsYXllclNjcm9sbGluZ0ZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzMCwgMzAsIDMwKQpQbGF5ZXJTY3JvbGxpbmdGcmFtZS5Cb3JkZXJTaXplUGl4ZWwgPSAwClBsYXllclNjcm9sbGluZ0ZyYW1lLlNjcm9sbEJhclRoaWNrbmVzcyA9IDYKUGxheWVyU2Nyb2xsaW5nRnJhbWUuWkluZGV4ID0gMTAKUGxheWVyU2Nyb2xsaW5nRnJhbWUuUGFyZW50ID0gUGxheWVyTGlzdEZyYW1lCgotLSBDcsOpZXIgbGUgbGF5b3V0IHBvdXIgbGEgbGlzdGUgZGVzIGpvdWV1cnMKbG9jYWwgUGxheWVyTGlzdExheW91dCA9IEluc3RhbmNlLm5ldygiVUlMaXN0TGF5b3V0IikKUGxheWVyTGlzdExheW91dC5QYWRkaW5nID0gVURpbS5uZXcoMCwgMSkKUGxheWVyTGlzdExheW91dC5Tb3J0T3JkZXIgPSBFbnVtLlNvcnRPcmRlci5OYW1lClBsYXllckxpc3RMYXlvdXQuUGFyZW50ID0gUGxheWVyU2Nyb2xsaW5nRnJhbWUKCmxvY2FsIFBvd2VyU2xpZGVyID0gSW5zdGFuY2UubmV3KCJUZXh0Qm94IikKUG93ZXJTbGlkZXIuU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDI1KQpQb3dlclNsaWRlci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjA1LCAwLCAwLCA4ODUpClBvd2VyU2xpZGVyLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig2MCwgNjAsIDYwKQpQb3dlclNsaWRlci5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKUG93ZXJTbGlkZXIuUGxhY2Vob2xkZXJUZXh0ID0gIkRlZmF1bHQ6IDUwMCIKUG93ZXJTbGlkZXIuVGV4dCA9ICI1MDAiClBvd2VyU2xpZGVyLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwpQb3dlclNsaWRlci5UZXh0U2l6ZSA9IDE0ClBvd2VyU2xpZGVyLlBhcmVudCA9IHRlbGVwb3J0RnJhbWUKCmxvY2FsIEFjdGl2YXRlQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKQWN0aXZhdGVCdXR0b24uU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDI1KQpBY3RpdmF0ZUJ1dHRvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjA1LCAwLCAwLCA5MTUpCkFjdGl2YXRlQnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3MCwgNzAsIDcwKQpBY3RpdmF0ZUJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKQWN0aXZhdGVCdXR0b24uVGV4dCA9ICJFbmFibGUiCkFjdGl2YXRlQnV0dG9uLlRleHRTaXplID0gMTYKQWN0aXZhdGVCdXR0b24uUGFyZW50ID0gdGVsZXBvcnRGcmFtZQoKLS0gRm9uY3Rpb24gcG91ciBtZXR0cmUgw6Agam91ciBsYSBsaXN0ZSBkZXMgam91ZXVycwpsb2NhbCBmdW5jdGlvbiBVcGRhdGVQbGF5ZXJMaXN0KCkKICAgIC0tIEVmZmFjZXIgbGVzIGFuY2llbnMgYm91dG9ucwogICAgZm9yIF8sIGNoaWxkIGluIHBhaXJzKFBsYXllclNjcm9sbGluZ0ZyYW1lOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgY2hpbGQ6SXNBKCJUZXh0QnV0dG9uIikgdGhlbgogICAgICAgICAgICBjaGlsZDpEZXN0cm95KCkKICAgICAgICBlbmQKICAgIGVuZAogICAgCiAgICAtLSBBam91dGVyIGxlcyBub3V2ZWF1eCBib3V0b25zIHBvdXIgY2hhcXVlIGpvdWV1cgogICAgZm9yIF8sIHBsciBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiBwbHIgfj0gcGxheWVyIHRoZW4gLS0gTmUgcGFzIGluY2x1cmUgbGUgam91ZXVyIGxvY2FsCiAgICAgICAgICAgIGxvY2FsIHBsYXllckJ1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgICAgIHBsYXllckJ1dHRvbi5TaXplID0gVURpbTIubmV3KDEsIC0xMCwgMCwgMjUpCiAgICAgICAgICAgIHBsYXllckJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNzAsIDcwLCA3MCkKICAgICAgICAgICAgcGxheWVyQnV0dG9uLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgICAgICBwbGF5ZXJCdXR0b24uVGV4dCA9IHBsci5OYW1lCiAgICAgICAgICAgIHBsYXllckJ1dHRvbi5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICAgICAgICAgICAgcGxheWVyQnV0dG9uLlRleHRTaXplID0gMTQKICAgICAgICAgICAgcGxheWVyQnV0dG9uLlpJbmRleCA9IDExCiAgICAgICAgICAgIHBsYXllckJ1dHRvbi5QYXJlbnQgPSBQbGF5ZXJTY3JvbGxpbmdGcmFtZQogICAgICAgICAgICAKICAgICAgICAgICAgcGxheWVyQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgVGFyZ2V0UGxheWVyID0gcGxyCiAgICAgICAgICAgICAgICBQbGF5ZXJTZWxlY3RCdXR0b24uVGV4dCA9ICJQbGF5ZXI6ICIgLi4gcGxyLk5hbWUKICAgICAgICAgICAgICAgIFBsYXllckxpc3RGcmFtZS5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIC0tIE1ldHRyZSDDoCBqb3VyIGxhIHRhaWxsZSBkdSBjb250ZW51IHNjcm9sbGFibGUKICAgIGxvY2FsIGNvbnRlbnRTaXplID0gUGxheWVyTGlzdExheW91dC5BYnNvbHV0ZUNvbnRlbnRTaXplLlkKICAgIFBsYXllclNjcm9sbGluZ0ZyYW1lLkNhbnZhc1NpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgY29udGVudFNpemUpCmVuZAoKLS0gRm9uY3Rpb25zCmxvY2FsIGZ1bmN0aW9uIEZpbmRQbGF5ZXIobmFtZSkKICAgIG5hbWUgPSBuYW1lOmxvd2VyKCkKICAgIGZvciBfLCBwbHIgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgaWYgcGxyLk5hbWU6bG93ZXIoKTpzdWIoMSwgI25hbWUpID09IG5hbWUgdGhlbgogICAgICAgICAgICByZXR1cm4gcGxyCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiBuaWwKZW5kCgotLSBGb25jdGlvbiBwb3VyIHNhdXZlZ2FyZGVyIGwnw6l0YXQgZGVzIGNvbGxpc2lvbnMKbG9jYWwgZnVuY3Rpb24gU2F2ZUNvbGxpc2lvblN0YXRlcygpCiAgICAtLSBWw6lyaWZpZXIgcXVlIENoYXJhY3RlciBleGlzdGUKICAgIGlmIG5vdCBDaGFyYWN0ZXIgb3Igbm90IENoYXJhY3Rlci5QYXJlbnQgdGhlbiByZXR1cm4gZW5kCiAgICAKICAgIENvbGxpc2lvblN0YXRlcyA9IHt9CiAgICBmb3IgXywgcGFydCBpbiBwYWlycyhDaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICBpZiBwYXJ0OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgIENvbGxpc2lvblN0YXRlc1twYXJ0XSA9IHBhcnQuQ2FuQ29sbGlkZQogICAgICAgIGVuZAogICAgZW5kCmVuZAoKLS0gRm9uY3Rpb24gcG91ciByZXN0YXVyZXIgbCfDqXRhdCBkZXMgY29sbGlzaW9ucwpsb2NhbCBmdW5jdGlvbiBSZXN0b3JlQ29sbGlzaW9uU3RhdGVzKCkKICAgIGZvciBwYXJ0LCBzdGF0ZSBpbiBwYWlycyhDb2xsaXNpb25TdGF0ZXMpIGRvCiAgICAgICAgaWYgcGFydCBhbmQgcGFydDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICBwYXJ0LkNhbkNvbGxpZGUgPSBzdGF0ZQogICAgICAgIGVuZAogICAgZW5kCmVuZAoKLS0gU2F1dmVnYXJkZXIgbGVzIMOpdGF0cyBkZSBjb2xsaXNpb24gYXUgY2hhcmdlbWVudCBkdSBzY3JpcHQKU2F2ZUNvbGxpc2lvblN0YXRlcygpCgotLSBGb25jdGlvbiBwb3VyIGxlcyByZWNvbm5leGlvbnMgZGUgcGVyc29ubmFnZQpsb2NhbCBmdW5jdGlvbiBPbkNoYXJhY3RlckFkZGVkKG5ld0NoYXJhY3RlcikKICAgIENoYXJhY3RlciA9IG5ld0NoYXJhY3RlcgogICAgaHVtYW5vaWRSb290UGFydCA9IENoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgSHVtYW5vaWQgPSBDaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZCIpCiAgICAKICAgIC0tIFNhdXZlZ2FyZGVyIGxlcyBub3V2ZWxsZXMgY29sbGlzaW9ucwogICAgU2F2ZUNvbGxpc2lvblN0YXRlcygpCiAgICAKICAgIC0tIFLDqWluaXRpYWxpc2VyIGwnw6l0YXQKICAgIGlmIEFjdGl2YXRlZCB0aGVuCiAgICAgICAgQWN0aXZhdGVkID0gZmFsc2UKICAgICAgICBBY3RpdmF0ZUJ1dHRvbi5UZXh0ID0gIkVuYWJsZSIKICAgIGVuZAogICAgCiAgICAtLSBDb25maWd1cmVyIGwnw6l2w6luZW1lbnQgZGUgbW9ydCBwb3VyIGxlIG5vdXZlYXUgcGVyc29ubmFnZQogICAgaWYgSHVtYW5vaWQgdGhlbgogICAgICAgIEh1bWFub2lkLkRpZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIEFjdGl2YXRlZCB0aGVuCiAgICAgICAgICAgICAgICBBY3RpdmF0ZWQgPSBmYWxzZQogICAgICAgICAgICAgICAgQWN0aXZhdGVCdXR0b24uVGV4dCA9ICJFbmFibGUiCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgIGVuZAplbmQKCi0tIENvbm5leGlvbiDDoCBsJ8OpdsOpbmVtZW50IENoYXJhY3RlckFkZGVkCnBsYXllci5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KE9uQ2hhcmFjdGVyQWRkZWQpCgpsb2NhbCBmdW5jdGlvbiBUb2dnbGVGbGluZygpCiAgICAtLSBWw6lyaWZpZXIgc2kgQ2hhcmFjdGVyIGV0IGh1bWFub2lkUm9vdFBhcnQgZXhpc3RlbnQKICAgIGlmIG5vdCBDaGFyYWN0ZXIgb3Igbm90IENoYXJhY3Rlci5QYXJlbnQgdGhlbgogICAgICAgIENoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIgb3IgcGxheWVyLkNoYXJhY3RlckFkZGVkOldhaXQoKQogICAgZW5kCiAgICAKICAgIGlmIG5vdCBodW1hbm9pZFJvb3RQYXJ0IG9yIG5vdCBodW1hbm9pZFJvb3RQYXJ0LlBhcmVudCB0aGVuCiAgICAgICAgaHVtYW5vaWRSb290UGFydCA9IENoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgaWYgbm90IGh1bWFub2lkUm9vdFBhcnQgdGhlbiByZXR1cm4gZW5kCiAgICBlbmQKICAgIAogICAgaWYgbm90IEh1bWFub2lkIG9yIG5vdCBIdW1hbm9pZC5QYXJlbnQgdGhlbgogICAgICAgIEh1bWFub2lkID0gQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpCiAgICAgICAgaWYgbm90IEh1bWFub2lkIHRoZW4gcmV0dXJuIGVuZAogICAgZW5kCiAgICAKICAgIEFjdGl2YXRlZCA9IG5vdCBBY3RpdmF0ZWQKICAgIGlmIEFjdGl2YXRlZCB0aGVuCiAgICAgICAgQWN0aXZhdGVCdXR0b24uVGV4dCA9ICJEaXNhYmxlIgogICAgICAgIAogICAgICAgIC0tIFbDqXJpZmllciBzaSBsYSBjaWJsZSBleGlzdGUKICAgICAgICBpZiBub3QgVGFyZ2V0UGxheWVyIG9yIG5vdCBUYXJnZXRQbGF5ZXIuUGFyZW50IHRoZW4KICAgICAgICAgICAgQWN0aXZhdGVkID0gZmFsc2UKICAgICAgICAgICAgQWN0aXZhdGVCdXR0b24uVGV4dCA9ICJFbmFibGUiCiAgICAgICAgICAgIHJldHVybgogICAgICAgIGVuZAogICAgICAgIAogICAgICAgIC0tIE1ldHRyZSDDoCBqb3VyIGxhIHB1aXNzYW5jZQogICAgICAgIFBvd2VyID0gdG9udW1iZXIoUG93ZXJTbGlkZXIuVGV4dCkgb3IgNTAwCiAgICAgICAgCiAgICAgICAgLS0gU2F1dmVnYXJkZXIgbCdhbmNpZW5uZSB2w6lsb2NpdMOpCiAgICAgICAgT2xkVmVsb2NpdHkgPSBodW1hbm9pZFJvb3RQYXJ0LlZlbG9jaXR5CiAgICAgICAgCiAgICAgICAgLS0gU2F1dmVnYXJkZXIgbCfDqXRhdCBkZXMgY29sbGlzaW9ucyBhdmFudCBkZSBsZXMgZMOpc2FjdGl2ZXIKICAgICAgICBTYXZlQ29sbGlzaW9uU3RhdGVzKCkKICAgICAgICAKICAgICAgICAtLSBEw6lzYWN0aXZlciBsYSBjb2xsaXNpb24KICAgICAgICBmb3IgXywgcGFydCBpbiBwYWlycyhDaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgcGFydDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgcGFydC5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgCiAgICAgICAgLS0gRMOpbWFycmVyIGxlIGZsaW5nCiAgICAgICAgSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpIC0tIEV0YXQgZGUgcGxhbmFnZQogICAgICAgIAogICAgICAgIC0tIFV0aWxpc2VyIHRhc2suc3Bhd24gcG91ciDDqXZpdGVyIGRlIGJsb3F1ZXIgbGUgdGhyZWFkIHByaW5jaXBhbAogICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICB3aGlsZSBBY3RpdmF0ZWQgYW5kIHRhc2sud2FpdCgpIGRvCiAgICAgICAgICAgICAgICBpZiBub3QgVGFyZ2V0UGxheWVyIG9yIG5vdCBUYXJnZXRQbGF5ZXIuQ2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxvY2FsIFRhcmdldFJvb3QgPSBUYXJnZXRQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgICAgICAgICAgIGlmIG5vdCBUYXJnZXRSb290IHRoZW4KICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC0tIFNlIGTDqXBsYWNlciB2ZXJzIGxhIGNpYmxlIMOgIGdyYW5kZSB2aXRlc3NlCiAgICAgICAgICAgICAgICBsb2NhbCBEaXJlY3Rpb24gPSAoVGFyZ2V0Um9vdC5Qb3NpdGlvbiAtIGh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLlVuaXQKICAgICAgICAgICAgICAgIC0tIFbDqXJpZmllciBzaSBEaXJlY3Rpb24gZXN0IHZhbGlkZQogICAgICAgICAgICAgICAgaWYgRGlyZWN0aW9uLk1hZ25pdHVkZSA+IDAgdGhlbgogICAgICAgICAgICAgICAgICAgIGh1bWFub2lkUm9vdFBhcnQuVmVsb2NpdHkgPSBEaXJlY3Rpb24gKiBQb3dlcgogICAgICAgICAgICAgICAgICAgIGh1bWFub2lkUm9vdFBhcnQuUm90VmVsb2NpdHkgPSBWZWN0b3IzLm5ldyhQb3dlciwgUG93ZXIsIFBvd2VyKQogICAgICAgICAgICAgICAgICAgIGh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gVGFyZ2V0Um9vdC5DRnJhbWUKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbHNlCiAgICAgICAgQWN0aXZhdGVCdXR0b24uVGV4dCA9ICJFbmFibGUiCiAgICAgICAgCiAgICAgICAgLS0gUmVzdGF1cmVyIGwnw6l0YXQgbm9ybWFsCiAgICAgICAgaHVtYW5vaWRSb290UGFydC5WZWxvY2l0eSA9IE9sZFZlbG9jaXR5CiAgICAgICAgaHVtYW5vaWRSb290UGFydC5Sb3RWZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsIDAsIDApCiAgICAgICAgCiAgICAgICAgLS0gUmVzdGF1cmVyIGxlcyDDqXRhdHMgZGUgY29sbGlzaW9uIGQnb3JpZ2luZQogICAgICAgIFJlc3RvcmVDb2xsaXNpb25TdGF0ZXMoKQogICAgICAgIAogICAgICAgIEh1bWFub2lkOkNoYW5nZVN0YXRlKDgpIC0tIEV0YXQgbm9ybWFsCiAgICBlbmQKZW5kCgotLSBDb25uZWN0ZXIgbGVzIMOpdsOpbmVtZW50cyBkdSBib3V0b24gZGUgc8OpbGVjdGlvbiBkZSBqb3VldXIKUGxheWVyU2VsZWN0QnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgUGxheWVyTGlzdEZyYW1lLlZpc2libGUgPSBub3QgUGxheWVyTGlzdEZyYW1lLlZpc2libGUKICAgIGlmIFBsYXllckxpc3RGcmFtZS5WaXNpYmxlIHRoZW4KICAgICAgICBVcGRhdGVQbGF5ZXJMaXN0KCkKICAgIGVuZAplbmQpCgotLSBGZXJtZXIgbGEgbGlzdGUgZGVzIGpvdWV1cnMgc2kgb24gY2xpcXVlIGFpbGxldXJzClVzZXJJbnB1dFNlcnZpY2UuSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKGlucHV0KQogICAgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIHRoZW4KICAgICAgICBsb2NhbCBtb3VzZVBvcyA9IFVzZXJJbnB1dFNlcnZpY2U6R2V0TW91c2VMb2NhdGlvbigpCiAgICAgICAgbG9jYWwgbGlzdFBvcyA9IFBsYXllckxpc3RGcmFtZS5BYnNvbHV0ZVBvc2l0aW9uCiAgICAgICAgbG9jYWwgbGlzdFNpemUgPSBQbGF5ZXJMaXN0RnJhbWUuQWJzb2x1dGVTaXplCiAgICAgICAgCiAgICAgICAgLS0gVsOpcmlmaWVyIHNpIGxlIGNsaWMgZXN0IGVuIGRlaG9ycyBkZSBsYSBsaXN0ZQogICAgICAgIGlmIG1vdXNlUG9zLlggPCBsaXN0UG9zLlggb3IgbW91c2VQb3MuWCA+IGxpc3RQb3MuWCArIGxpc3RTaXplLlggb3IKICAgICAgICAgICBtb3VzZVBvcy5ZIDwgbGlzdFBvcy5ZIG9yIG1vdXNlUG9zLlkgPiBsaXN0UG9zLlkgKyBsaXN0U2l6ZS5ZIHRoZW4KICAgICAgICAgICAgUGxheWVyTGlzdEZyYW1lLlZpc2libGUgPSBmYWxzZQogICAgICAgIGVuZAogICAgZW5kCmVuZCkKCi0tIENvbm5lY3RlciBsZXMgw6l2w6luZW1lbnRzIGR1IGJvdXRvbiBkJ2FjdGl2YXRpb24KQWN0aXZhdGVCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChUb2dnbGVGbGluZykKCi0tIE1ldHRyZSDDoCBqb3VyIGxhIGxpc3RlIGRlcyBqb3VldXJzIHF1YW5kIHVuIGpvdWV1ciByZWpvaW50IG91IHF1aXR0ZQpQbGF5ZXJzLlBsYXllckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgaWYgUGxheWVyTGlzdEZyYW1lLlZpc2libGUgdGhlbgogICAgICAgIFVwZGF0ZVBsYXllckxpc3QoKQogICAgZW5kCmVuZCkKClBsYXllcnMuUGxheWVyUmVtb3Zpbmc6Q29ubmVjdChmdW5jdGlvbihwbHIpCiAgICBpZiBUYXJnZXRQbGF5ZXIgPT0gcGxyIHRoZW4KICAgICAgICBUYXJnZXRQbGF5ZXIgPSBuaWwKICAgICAgICBQbGF5ZXJTZWxlY3RCdXR0b24uVGV4dCA9ICJTZWxlY3QgYSBQbGF5ZXIgVG8gRmxpbmciCiAgICAgICAgaWYgQWN0aXZhdGVkIHRoZW4KICAgICAgICAgICAgVG9nZ2xlRmxpbmcoKSAtLSBEw6lzYWN0aXZlciBsZSBmbGluZyBzaSBsYSBjaWJsZSBxdWl0dGUKICAgICAgICBlbmQKICAgIGVuZAogICAgCiAgICBpZiBQbGF5ZXJMaXN0RnJhbWUuVmlzaWJsZSB0aGVuCiAgICAgICAgVXBkYXRlUGxheWVyTGlzdCgpCiAgICBlbmQKZW5kKQoKLS0gSW5pdGlhbGlzZXIgbCfDqXRhdAppZiBIdW1hbm9pZCBhbmQgSHVtYW5vaWQuUGFyZW50IHRoZW4KICAgIEh1bWFub2lkLkRpZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgQWN0aXZhdGVkIHRoZW4KICAgICAgICAgICAgQWN0aXZhdGVkID0gZmFsc2UKICAgICAgICAgICAgQWN0aXZhdGVCdXR0b24uVGV4dCA9ICJFbmFibGUiCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZAoKLS0gRMOpZmluaXIgZ2V0SHVtYW5vaWRSb290UGFydCBzaSBjZSBuJ2VzdCBwYXMgZMOpasOgIGZhaXQKbG9jYWwgZnVuY3Rpb24gZ2V0SHVtYW5vaWRSb290UGFydCgpCiAgICBpZiBjaGFyYWN0ZXIgYW5kIGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICByZXR1cm4gY2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQKICAgIGVuZAogICAgcmV0dXJuIG5pbAplbmQKCi0tIEluaXRpYWxpc2F0aW9uIGRlIGFudGlUUEFjdGl2ZQpsb2NhbCBhbnRpVFBBY3RpdmUgPSBmYWxzZQpsb2NhbCBhbnRpVFBDb25uZWN0aW9uID0gbmlsCgotLSBGb25jdGlvbiBwb3VyIGFjdGl2ZXIgbCdhbnRpLVRQCmxvY2FsIGZ1bmN0aW9uIGluaXRBbnRpVFAoKQogICAgaWYgbm90IGFudGlUUEFjdGl2ZSB0aGVuIHJldHVybiBlbmQgLS0gTmUgcGFzIGFjdGl2ZXIgc2kgZMOpc2FjdGl2w6kKICAgIAogICAgbG9jYWwgSHVtYW5vaWRSb290UGFydCA9IGdldEh1bWFub2lkUm9vdFBhcnQoKQogICAgaWYgbm90IEh1bWFub2lkUm9vdFBhcnQgdGhlbgogICAgICAgIHdhcm4oIltBTlRJLVRQXSBIdW1hbm9pZFJvb3RQYXJ0IE5vdCBGb3VuZCwgUmVzdGFydGluZy4uLiIpCiAgICAgICAgcGxheWVyLkNoYXJhY3RlckFkZGVkOldhaXQoKSAtLSBBdHRlbmRyZSBsZSBjaGFyZ2VtZW50IGR1IHBlcnNvbm5hZ2UKICAgICAgICB0YXNrLndhaXQoMSkgLS0gUGV0aXRlIHBhdXNlCiAgICAgICAgSHVtYW5vaWRSb290UGFydCA9IGdldEh1bWFub2lkUm9vdFBhcnQoKQogICAgICAgIGlmIG5vdCBIdW1hbm9pZFJvb3RQYXJ0IHRoZW4KICAgICAgICAgICAgd2FybigiW0FOVEktVFBdIFNlcmlvdXMgSXNzdWUgOiBIdW1hbm9pZFJvb3RQYXJ0IElzIFN0aWxsIE5vdCBGb3VuZCIpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIC0tIERlcm5pw6hyZSBwb3NpdGlvbiB2YWxpZGUKICAgIGxvY2FsIGxhc3RWYWxpZFBvc2l0aW9uID0gSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbgogICAgCiAgICAtLSBWw6lyaWZpY2F0aW9uIGRlcyBUUCBldCByZXRvdXIgw6AgbGEgZGVybmnDqHJlIHBvc2l0aW9uIHZhbGlkZQogICAgYW50aVRQQ29ubmVjdGlvbiA9IFJ1blNlcnZpY2UuSGVhcnRiZWF0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIG5vdCBhbnRpVFBBY3RpdmUgdGhlbgogICAgICAgICAgICBhbnRpVFBDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICByZXR1cm4KICAgICAgICBlbmQKCiAgICAgICAgbG9jYWwgY3VycmVudFBvc2l0aW9uID0gSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbgogICAgICAgIGxvY2FsIGRpc3RhbmNlID0gKGN1cnJlbnRQb3NpdGlvbiAtIGxhc3RWYWxpZFBvc2l0aW9uKS5tYWduaXR1ZGUKICAgICAgICAKICAgICAgICBpZiBkaXN0YW5jZSA8IDkgdGhlbgogICAgICAgICAgICBsYXN0VmFsaWRQb3NpdGlvbiA9IGN1cnJlbnRQb3NpdGlvbgogICAgICAgIGVsc2VpZiBkaXN0YW5jZSA+IDMyIHRoZW4KICAgICAgICAgICAgcHJpbnQoIltBTlRJLVRQXSBUUCBkZXRlY3RlZCwgWW91J3ZlIEJlZW4gVFAgVG8gWW91ciBMYXN0IFZhbGlkIFBvc2l0aW9uIikKICAgICAgICAgICAgSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBDRnJhbWUubmV3KGxhc3RWYWxpZFBvc2l0aW9uKQogICAgICAgIGVuZAogICAgZW5kKQogICAgCiAgICBwcmludCgiW0FOVEktVFBdIEVuYWJsZWQiKQplbmQKCi0tIFLDqWFjdGl2YXRpb24gYXByw6hzIHJlc3Bhd24KcGxheWVyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgaWYgYW50aVRQQWN0aXZlIHRoZW4KICAgICAgICBpbml0QW50aVRQKCkKICAgIGVuZAplbmQpCgoKLS0gQWpvdXRlciB1biBib3V0b24gZCdhY3RpdmF0aW9uL2TDqXNhY3RpdmF0aW9uCmlmIHRlbGVwb3J0RnJhbWUgdGhlbgogICAgbG9jYWwgYW50aVRQQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgIGFudGlUUEJ1dHRvbi5QYXJlbnQgPSB0ZWxlcG9ydEZyYW1lCiAgICBhbnRpVFBCdXR0b24uU2l6ZSA9IFVEaW0yLm5ldygwLjksIDAsIDAsIDQwKQogICAgYW50aVRQQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAuMDUsIDAsIDAsIDEwNzUpCiAgICBhbnRpVFBCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcwLCA3MCwgNzApCglhbnRpVFBCdXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICBhbnRpVFBCdXR0b24uVGV4dCA9ICJBbnRpLVRQOiBPRkYiCiAgICBhbnRpVFBCdXR0b24uVGV4dFNjYWxlZCA9IHRydWUKCiAgICAtLSBGb25jdGlvbiBwb3VyIGFjdGl2ZXIvZMOpc2FjdGl2ZXIgbCdhbnRpLVRQCiAgICBsb2NhbCBmdW5jdGlvbiB0b2dnbGVBbnRpVFAoKQogICAgICAgIGFudGlUUEFjdGl2ZSA9IG5vdCBhbnRpVFBBY3RpdmUKICAgICAgICBpZiBhbnRpVFBBY3RpdmUgdGhlbgogICAgICAgICAgICBhbnRpVFBCdXR0b24uVGV4dCA9ICJBbnRpLVRQOiBPTiIKICAgICAgICAgICAgaW5pdEFudGlUUCgpCiAgICAgICAgZWxzZQogICAgICAgICAgICBhbnRpVFBCdXR0b24uVGV4dCA9ICJBbnRpLVRQOiBPRkYiCiAgICAgICAgICAgIGlmIGFudGlUUENvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICAgICAgYW50aVRQQ29ubmVjdGlvbjpEaXNjb25uZWN0KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgYW50aVRQQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QodG9nZ2xlQW50aVRQKQplbmQKCgotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQotLSBBdXRyZShzeXN0ZW1lcywgYXV0cmVzKQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgwLjUpIGRvCiAgICAgICAgaWYgcGxheWVyIGFuZCBwbGF5ZXIuQ2hhcmFjdGVyIHRoZW4KICAgICAgICAgICAgbG9jYWwgaHVtYW5vaWQgPSBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpCiAgICAgICAgICAgIGlmIGh1bWFub2lkIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIGxvY2tlZFNwZWVkID0gdG9udW1iZXIoc3BlZWRUZXh0Qm94LlRleHQpIG9yIDE2CiAgICAgICAgICAgICAgICBpZiBodW1hbm9pZC5XYWxrU3BlZWQgfj0gbG9ja2VkU3BlZWQgdGhlbgogICAgICAgICAgICAgICAgICAgIGh1bWFub2lkLldhbGtTcGVlZCA9IGxvY2tlZFNwZWVkCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKQ=="};local function loadEncodedScript() if game:GetService("Players").LocalPlayer then print("Chargement du script en cours...");end local start=tick();local completeScript=table.concat(scriptParts);scriptParts=nil;local decoded;local success,result=pcall(function() local co=coroutine.create(function() return base64.decode(completeScript);end);local status,decodedResult;local timeout=tick() + 10 ;repeat status,decodedResult=coroutine.resume(co);task.wait();until (coroutine.status(co)=="dead") or (tick()>timeout)  if status then return decodedResult;else error("Échec du décodage: "   .. tostring(decodedResult) );end end);if success then decoded=result;print("Décodage terminé en "   .. (tick() -start)   .. " secondes" );else warn("Erreur pendant le décodage: "   .. tostring(result) );return;end task.delay(0.1,function() local execStart=tick();local execSuccess,execError=pcall(function() loadstring(decoded)();end);if execSuccess then print("Script exécuté avec succès en "   .. (tick() -execStart)   .. " secondes" );else warn("Erreur d'exécution: "   .. tostring(execError) );end end);end loadEncodedScript();local function splitString(str,maxSize) local result={};for i=1, #str,maxSize do table.insert(result,string.sub(str,i,(i + maxSize) -1 ));end return result;end end
